var Wo=Object.defineProperty;var Ko=(Re,Ie,Oe)=>Ie in Re?Wo(Re,Ie,{enumerable:!0,configurable:!0,writable:!0,value:Oe}):Re[Ie]=Oe;var me=(Re,Ie,Oe)=>(Ko(Re,typeof Ie!="symbol"?Ie+"":Ie,Oe),Oe),_n=(Re,Ie,Oe)=>{if(!Ie.has(Re))throw TypeError("Cannot "+Oe)};var t=(Re,Ie,Oe)=>(_n(Re,Ie,"read from private field"),Oe?Oe.call(Re):Ie.get(Re)),h=(Re,Ie,Oe)=>{if(Ie.has(Re))throw TypeError("Cannot add the same private member more than once");Ie instanceof WeakSet?Ie.add(Re):Ie.set(Re,Oe)},T=(Re,Ie,Oe,Ss)=>(_n(Re,Ie,"write to private field"),Ss?Ss.call(Re,Oe):Ie.set(Re,Oe),Oe);var fs=(Re,Ie,Oe,Ss)=>({set _(gn){T(Re,Ie,gn,Oe)},get _(){return t(Re,Ie,Ss)}}),y=(Re,Ie,Oe)=>(_n(Re,Ie,"access private method"),Oe);(async()=>{(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const $ of n)if($.type==="childList")for(const A of $.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&m(A)}).observe(document,{childList:!0,subtree:!0});function H(n){const $={};return n.integrity&&($.integrity=n.integrity),n.referrerPolicy&&($.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?$.credentials="include":n.crossOrigin==="anonymous"?$.credentials="omit":$.credentials="same-origin",$}function m(n){if(n.ep)return;n.ep=!0;const $=H(n);fetch(n.href,$)}})();const Re=document.querySelectorAll(".drawer"),Ie=document.querySelectorAll(".drawer__dialog"),Oe=document.querySelectorAll('[data-role="drawer"]');Oe.forEach(g=>g.addEventListener("click",Ss)),Re.forEach(g=>g.addEventListener("click",Ss)),Ie.forEach(g=>g.addEventListener("click",H=>{H.stopPropagation()}));function Ss(){Re.forEach(g=>g.classList.toggle("drawer_show")),Oe.forEach(g=>g.classList.toggle("toggler_show"))}const gn=document.querySelectorAll('[data-role="drop-down"]'),za=document.querySelectorAll(".drop-down");gn.forEach(g=>g.addEventListener("click",Xa));function Xa(){const g=document.querySelector(this.dataset.target);za.forEach(H=>{H.id!==g.id&&H.classList.remove("drop-down_open")}),g.classList.toggle("drop-down_open")}const Wa=document.getElementById("js-modal-area"),Ka=document.querySelectorAll(".modal"),Ya=document.querySelectorAll('[data-role="modal"]'),Ja=document.querySelectorAll(".modal__dialog");Ka.forEach(g=>{to(),document.getElementById("js-modal-area").appendChild(g)}),Ya.forEach(g=>{g.addEventListener("click",Qa)}),Ja.forEach(g=>g.addEventListener("click",Za));function Qa(){document.querySelector(this.dataset.target).classList.toggle("modal_open")}function Za(g){g.stopPropagation()}function to(){if(!Wa){const g=document.createElement("div");g.setAttribute("id","js-modal-area"),g.style.zIndex="100",g.style.position="relative",document.body.appendChild(g)}}function eo(){const g=document.querySelector('[data-role="modal-open"]');g&&g.dataset.errors!="{}"&&document.querySelector(g.dataset.target).classList.add("modal_open")}window.onload=eo,document.querySelectorAll(".password__toggler").forEach(g=>g.addEventListener("click",so));function so(){const g=document.querySelector(this.dataset.target);g.type=g.type==="password"?"text":"password"}const io=document.querySelectorAll(".format_num"),no=document.querySelectorAll(".format_date"),ro=document.querySelectorAll(".format_datetime"),xs="--";io.forEach(g=>{if(g.textContent){let H;g.classList.contains("format_area")&&(H={minimumFractionDigits:2});const m=Number(g.textContent).toLocaleString(void 0,H);g.innerHTML=isNaN(parseFloat(g.textContent))?g.textContent:m}}),no.forEach(g=>{if(g.textContent){let H=g.textContent.replaceAll(`
`,"").replaceAll(" ","").split("/");g.innerHTML=`${H[0]??(H[0]=xs)}`,g.innerHTML+='<span class="format_unit">\u5E74 </span>',g.innerHTML+=`${H[1]??(H[1]=xs)}`,g.innerHTML+='<span class="format_unit">\u6708 </span>',g.innerHTML+=`${H[2]??(H[2]=xs)}`,g.innerHTML+='<span class="format_unit">\u65E5</span>'}}),ro.forEach(g=>{if(g.textContent){let H=new Date(g.textContent);H!="Invalid Date"?(g.innerHTML=H.getFullYear(),g.innerHTML+='<span class="format_unit">\u5E74 </span>',g.innerHTML+=H.getMonth()+1,g.innerHTML+='<span class="format_unit">\u6708 </span>',g.innerHTML+=H.getDate(),g.innerHTML+='<span class="format_unit">\u65E5 </span>',g.innerHTML+=`${H.getHours()}:${H.getMinutes()<10?"0":""}${H.getMinutes()}`):(g.innerHTML=`${xs}`,g.innerHTML+='<span class="format_unit">\u5E74 </span>',g.innerHTML+=`${xs}`,g.innerHTML+='<span class="format_unit">\u6708 </span>',g.innerHTML+=`${xs}`,g.innerHTML+='<span class="format_unit">\u65E5 </span>',g.innerHTML+=`${xs}`)}});const ao=document.querySelectorAll('[data-role="auth-menu"'),mr=document.querySelector(".main-header__auth-menu"),vr=document.querySelector(".main-header__auth-bg");mr&&vr&&(ao.forEach(g=>g.addEventListener("click",br)),vr.addEventListener("click",br));function br(){mr.classList.toggle("main-header__auth-menu_open")}const Ar=document.querySelectorAll('[data-role="toggle-section"]'),oo=document.querySelectorAll(".toggle-section__item");Ar.forEach(g=>g.addEventListener("click",ho));function ho(){oo.forEach(g=>g.classList.remove("toggle-section__item_show")),Ar.forEach(g=>g.classList.remove("toggle-btn__item_active")),document.querySelector(this.dataset.target).classList.add("toggle-section__item_show"),this.classList.add("toggle-btn__item_active"),window.scrollTo({top:window.scrollY+document.querySelector(".fund-detail__thumbnail").getBoundingClientRect().bottom-57})}document.querySelectorAll(".schedule__status").forEach(g=>{if(g.dataset){const H=new Date,m=new Date(g.dataset.start),n=new Date(g.dataset.end);m!=="Invalid Date"&&n!=="Invalid Date"?H>n?(g.classList.remove("schedule__status_yet"),g.classList.add("schedule__status_complete")):m<=H&&H<=n&&(g.classList.remove("schedule__status_yet"),g.classList.add("schedule__status_current")):console.log("invalid date!",`
 start: ${m}`,`
end: ${n}`)}else console.log(g.dataset)});var Os=function(){return Os=Object.assign||function(g){for(var H,m=1,n=arguments.length;m<n;m++)for(var $ in H=arguments[m])Object.prototype.hasOwnProperty.call(H,$)&&(g[$]=H[$]);return g},Os.apply(this,arguments)};function yr(g,H,m){if(m||arguments.length===2)for(var n,$=0,A=H.length;$<A;$++)!n&&$ in H||(n||(n=Array.prototype.slice.call(H,0,$)),n[$]=H[$]);return g.concat(n||Array.prototype.slice.call(H))}function _r(g){return Array.prototype.slice.call(g)}function wr(g,H){var m=Math.floor(g);return m===H||m+1===H?g:H}function Er(){return Date.now()}function fn(g,H,m){if(H="data-keen-slider-"+H,m===null)return g.removeAttribute(H);g.setAttribute(H,m||"")}function Li(g,H){return H=H||document,typeof g=="function"&&(g=g(H)),Array.isArray(g)?g:typeof g=="string"?_r(H.querySelectorAll(g)):g instanceof HTMLElement?[g]:g instanceof NodeList?_r(g):[]}function ei(g){g.raw&&(g=g.raw),g.cancelable&&!g.defaultPrevented&&g.preventDefault()}function si(g){g.raw&&(g=g.raw),g.stopPropagation&&g.stopPropagation()}function Sr(){var g=[];return{add:function(H,m,n,$){H.addListener?H.addListener(n):H.addEventListener(m,n,$),g.push([H,m,n,$])},input:function(H,m,n,$){this.add(H,m,function(A){return function(D){D.nativeEvent&&(D=D.nativeEvent);var st=D.changedTouches||[],O=D.targetTouches||[],M=D.detail&&D.detail.x?D.detail:null;return A({id:M?M.identifier?M.identifier:"i":O[0]?O[0]?O[0].identifier:"e":"d",idChanged:M?M.identifier?M.identifier:"i":st[0]?st[0]?st[0].identifier:"e":"d",raw:D,x:M&&M.x?M.x:O[0]?O[0].screenX:M?M.x:D.pageX,y:M&&M.y?M.y:O[0]?O[0].screenY:M?M.y:D.pageY})}}(n),$)},purge:function(){g.forEach(function(H){H[0].removeListener?H[0].removeListener(H[2]):H[0].removeEventListener(H[1],H[2],H[3])}),g=[]}}}function mn(g,H,m){return Math.min(Math.max(g,H),m)}function es(g){return(g>0?1:0)-(g<0?1:0)||+g}function xr(g){var H=g.getBoundingClientRect();return{height:wr(H.height,g.offsetHeight),width:wr(H.width,g.offsetWidth)}}function ze(g,H,m,n){var $=g&&g[H];return $==null?m:n&&typeof $=="function"?$():$}function ts(g){return Math.round(1e6*g)/1e6}function lo(g){var H,m,n,$,A,D;function st(R){D||(D=R),O(!0);var w=R-D;w>n&&(w=n);var N=$[m];if(N[3]<w)return m++,st(R);var B=N[2],K=N[4],at=N[0],J=N[1]*(0,N[5])(K===0?1:(w-B)/K);if(J&&g.track.to(at+J),w<n)return C();D=null,O(!1),M(null),g.emit("animationEnded")}function O(R){H.active=R}function M(R){H.targetIdx=R}function C(){var R;R=st,A=window.requestAnimationFrame(R)}function W(){var R;R=A,window.cancelAnimationFrame(R),O(!1),M(null),D&&g.emit("animationStopped"),D=null}return H={active:!1,start:function(R){if(W(),g.track.details){var w=0,N=g.track.details.position;m=0,n=0,$=R.map(function(B){var K,at=Number(N),J=(K=B.earlyExit)!==null&&K!==void 0?K:B.duration,x=B.easing,V=B.distance*x(J/B.duration)||0;N+=V;var F=n;return n+=J,w+=V,[at,B.distance,F,n,B.duration,x]}),M(g.track.distToIdx(w)),C(),g.emit("animationStarted")}},stop:W,targetIdx:null}}function co(g){var H,m,n,$,A,D,st,O,M,C,W,R,w,N,B=1/0,K=[],at=null,J=0;function x(Mt){Ot(J+Mt)}function V(Mt){var Pt=F(J+Mt).abs;return Z(Pt)?Pt:null}function F(Mt){var Pt=Math.floor(Math.abs(ts(Mt/m))),Et=ts((Mt%m+m)%m);Et===m&&(Et=0);var Q=es(Mt),gt=st.indexOf(yr([],st,!0).reduce(function(Rt,qt){return Math.abs(qt-Et)<Math.abs(Rt-Et)?qt:Rt})),kt=gt;return Q<0&&Pt++,gt===D&&(kt=0,Pt+=Q>0?1:-1),{abs:kt+Pt*D*Q,origin:gt,rel:kt}}function P(Mt,Pt,Et){var Q;if(Pt||!Dt())return j(Mt,Et);if(!Z(Mt))return null;var gt=F(Et??J),kt=gt.abs,Rt=Mt-gt.rel,qt=kt+Rt;Q=j(qt);var Kt=j(qt-D*es(Rt));return(Kt!==null&&Math.abs(Kt)<Math.abs(Q)||Q===null)&&(Q=Kt),ts(Q)}function j(Mt,Pt){if(Pt==null&&(Pt=ts(J)),!Z(Mt)||Mt===null)return null;Mt=Math.round(Mt);var Et=F(Pt),Q=Et.abs,gt=Et.rel,kt=Et.origin,Rt=Tt(Mt),qt=(Pt%m+m)%m,Kt=st[kt],ie=Math.floor((Mt-(Q-gt))/D)*m;return ts(Kt-qt-Kt+st[Rt]+ie+(kt===D?m:0))}function Z(Mt){return vt(Mt)===Mt}function vt(Mt){return mn(Mt,M,C)}function Dt(){return $.loop}function Tt(Mt){return(Mt%D+D)%D}function Ot(Mt){var Pt;Pt=Mt-J,K.push({distance:Pt,timestamp:Er()}),K.length>6&&(K=K.slice(-6)),J=ts(Mt);var Et=_t().abs;if(Et!==at){var Q=at!==null;at=Et,Q&&g.emit("slideChanged")}}function _t(Mt){var Pt=Mt?null:function(){if(D){var Et=Dt(),Q=Et?(J%m+m)%m:J,gt=(Et?J%m:J)-A[0][2],kt=0-(gt<0&&Et?m-Math.abs(gt):gt),Rt=0,qt=F(J),Kt=qt.abs,ie=qt.rel,xe=A[ie][2],de=A.map(function(le,ve){var Vt=kt+Rt;(Vt<0-le[0]||Vt>1)&&(Vt+=(Math.abs(Vt)>m-1&&Et?m:0)*es(-Vt));var ae=ve-ie,Te=es(ae),ee=ae+Kt;Et&&(Te===-1&&Vt>xe&&(ee+=D),Te===1&&Vt<xe&&(ee-=D),W!==null&&ee<W&&(Vt+=m),R!==null&&ee>R&&(Vt-=m));var Ee=Vt+le[0]+le[1],ne=Math.max(Vt>=0&&Ee<=1?1:Ee<0||Vt>1?0:Vt<0?Math.min(1,(le[0]+Vt)/le[0]):(1-Vt)/le[0],0);return Rt+=le[0]+le[1],{abs:ee,distance:$.rtl?-1*Vt+1-le[0]:Vt,portion:ne,size:le[0]}});return Kt=vt(Kt),ie=Tt(Kt),{abs:vt(Kt),length:n,max:N,maxIdx:C,min:w,minIdx:M,position:J,progress:Et?Q/m:J/n,rel:ie,slides:de,slidesLength:m}}}();return H.details=Pt,g.emit("detailsChanged"),Pt}return H={absToRel:Tt,add:x,details:null,distToIdx:V,idxToDist:P,init:function(Mt){if(function(){if($=g.options,A=($.trackConfig||[]).map(function(gt){return[ze(gt,"size",1),ze(gt,"spacing",0),ze(gt,"origin",0)]}),D=A.length){m=ts(A.reduce(function(gt,kt){return gt+kt[0]+kt[1]},0));var Et,Q=D-1;n=ts(m+A[0][2]-A[Q][0]-A[Q][2]-A[Q][1]),st=A.reduce(function(gt,kt){if(!gt)return[0];var Rt=A[gt.length-1],qt=gt[gt.length-1]+(Rt[0]+Rt[2])+Rt[1];return qt-=kt[2],gt[gt.length-1]>qt&&(qt=gt[gt.length-1]),qt=ts(qt),gt.push(qt),(!Et||Et<qt)&&(O=gt.length-1),Et=qt,gt},null),n===0&&(O=0),st.push(ts(m))}}(),!D)return _t(!0);var Pt;(function(){var Et=g.options.range,Q=g.options.loop;W=M=Q?ze(Q,"min",-1/0):0,R=C=Q?ze(Q,"max",B):O;var gt=ze(Et,"min",null),kt=ze(Et,"max",null);gt!==null&&(M=gt),kt!==null&&(C=kt),w=M===-1/0?M:g.track.idxToDist(M||0,!0,0),N=C===B?C:P(C,!0,0),kt===null&&(R=C),ze(Et,"align",!1)&&C!==B&&A[Tt(C)][2]===0&&(N-=1-A[Tt(C)][0],C=V(N-J)),w=ts(w),N=ts(N)})(),Pt=Mt,Number(Pt)===Pt?x(j(vt(Mt))):_t()},to:Ot,velocity:function(){var Mt=Er(),Pt=K.reduce(function(Et,Q){var gt=Q.distance,kt=Q.timestamp;return Mt-kt>200||(es(gt)!==es(Et.distance)&&Et.distance&&(Et={distance:0,lastTimestamp:0,time:0}),Et.time&&(Et.distance+=gt),Et.lastTimestamp&&(Et.time+=kt-Et.lastTimestamp),Et.lastTimestamp=kt),Et},{distance:0,lastTimestamp:0,time:0});return Pt.distance/Pt.time||0}}}function uo(g){var H,m,n,$,A,D,st,O;function M(at){return 2*at}function C(at){return mn(at,st,O)}function W(at){return 1-Math.pow(1-at,3)}function R(){return n?g.track.velocity():0}function w(){K();var at=g.options.mode==="free-snap",J=g.track,x=R();$=es(x);var V=g.track.details,F=[];if(x||!at){var P=N(x),j=P.dist,Z=P.dur;if(Z=M(Z),j*=$,at){var vt=J.idxToDist(J.distToIdx(j),!0);vt&&(j=vt)}F.push({distance:j,duration:Z,easing:W});var Dt=V.position,Tt=Dt+j;if(Tt<A||Tt>D){var Ot=Tt<A?A-Dt:D-Dt,_t=0,Mt=x;if(es(Ot)===$){var Pt=Math.min(Math.abs(Ot)/Math.abs(j),1),Et=function(kt){return 1-Math.pow(1-kt,1/3)}(Pt)*Z;F[0].earlyExit=Et,Mt=x*(1-Pt)}else F[0].earlyExit=0,_t+=Ot;var Q=N(Mt,100),gt=Q.dist*$;g.options.rubberband&&(F.push({distance:gt,duration:M(Q.dur),easing:W}),F.push({distance:-gt+_t,duration:500,easing:W}))}g.animator.start(F)}else g.moveToIdx(C(V.abs),!0,{duration:500,easing:function(kt){return 1+--kt*kt*kt*kt*kt}})}function N(at,J){J===void 0&&(J=1e3);var x=147e-9+(at=Math.abs(at))/J;return{dist:Math.pow(at,2)/x,dur:at/x}}function B(){var at=g.track.details;at&&(A=at.min,D=at.max,st=at.minIdx,O=at.maxIdx)}function K(){g.animator.stop()}g.on("updated",B),g.on("optionsChanged",B),g.on("created",B),g.on("dragStarted",function(){n=!1,K(),H=m=g.track.details.abs}),g.on("dragChecked",function(){n=!0}),g.on("dragEnded",function(){var at=g.options.mode;at==="snap"&&function(){var J=g.track,x=g.track.details,V=x.position,F=es(R());(V>D||V<A)&&(F=0);var P=H+F;x.slides[J.absToRel(P)].portion===0&&(P-=F),H!==m&&(P=m),es(J.idxToDist(P,!0))!==F&&(P+=F),P=C(P);var j=J.idxToDist(P,!0);g.animator.start([{distance:j,duration:500,easing:function(Z){return 1+--Z*Z*Z*Z*Z}}])}(),at!=="free"&&at!=="free-snap"||w()}),g.on("dragged",function(){m=g.track.details.abs})}function po(g){var H,m,n,$,A,D,st,O,M,C,W,R,w,N,B,K,at,J,x=Sr();function V(_t){if(D&&O===_t.id){var Mt=Z(_t);if(M){if(!j(_t))return P(_t);C=Mt,M=!1,g.emit("dragChecked")}if(K)return C=Mt;ei(_t);var Pt=function(Q){if(at===-1/0&&J===1/0)return Q;var gt=g.track.details,kt=gt.length,Rt=gt.position,qt=mn(Q,at-Rt,J-Rt);if(kt===0)return 0;if(!g.options.rubberband)return qt;if(Rt<=J&&Rt>=at||Rt<at&&m>0||Rt>J&&m<0)return Q;var Kt=(Rt<at?Rt-at:Rt-J)/kt,ie=$*kt,xe=Math.abs(Kt*ie),de=Math.max(0,1-xe/A*2);return de*de*Q}(st(C-Mt)/$*n);m=es(Pt);var Et=g.track.details.position;(Et>at&&Et<J||Et===at&&m>0||Et===J&&m<0)&&si(_t),W+=Pt,!R&&Math.abs(W*$)>5&&(R=!0),g.track.add(Pt),C=Mt,g.emit("dragged")}}function F(_t){!D&&g.track.details&&g.track.details.length&&(W=0,D=!0,R=!1,M=!0,O=_t.id,j(_t),C=Z(_t),g.emit("dragStarted"))}function P(_t){D&&O===_t.idChanged&&(D=!1,g.emit("dragEnded"))}function j(_t){var Mt=vt(),Pt=Mt?_t.y:_t.x,Et=Mt?_t.x:_t.y,Q=w!==void 0&&N!==void 0&&Math.abs(N-Et)<=Math.abs(w-Pt);return w=Pt,N=Et,Q}function Z(_t){return vt()?_t.y:_t.x}function vt(){return g.options.vertical}function Dt(){$=g.size,A=vt()?window.innerHeight:window.innerWidth;var _t=g.track.details;_t&&(at=_t.min,J=_t.max)}function Tt(_t){R&&(si(_t),ei(_t))}function Ot(){if(x.purge(),g.options.drag&&!g.options.disabled){var _t;_t=g.options.dragSpeed||1,st=typeof _t=="function"?_t:function(Pt){return Pt*_t},n=g.options.rtl?-1:1,Dt(),H=g.container,function(){var Pt="data-keen-slider-clickable";Li("[".concat(Pt,"]:not([").concat(Pt,"=false])"),H).map(function(Et){x.add(Et,"dragstart",si),x.add(Et,"mousedown",si),x.add(Et,"touchstart",si)})}(),x.add(H,"dragstart",function(Pt){ei(Pt)}),x.add(H,"click",Tt,{capture:!0}),x.input(H,"ksDragStart",F),x.input(H,"ksDrag",V),x.input(H,"ksDragEnd",P),x.input(H,"mousedown",F),x.input(H,"mousemove",V),x.input(H,"mouseleave",P),x.input(H,"mouseup",P),x.input(H,"touchstart",F,{passive:!0}),x.input(H,"touchmove",V,{passive:!1}),x.input(H,"touchend",P),x.input(H,"touchcancel",P),x.add(window,"wheel",function(Pt){D&&ei(Pt)});var Mt="data-keen-slider-scrollable";Li("[".concat(Mt,"]:not([").concat(Mt,"=false])"),g.container).map(function(Pt){return function(Et){var Q;x.input(Et,"touchstart",function(gt){Q=Z(gt),K=!0,B=!0},{passive:!0}),x.input(Et,"touchmove",function(gt){var kt=vt(),Rt=kt?Et.scrollHeight-Et.clientHeight:Et.scrollWidth-Et.clientWidth,qt=Q-Z(gt),Kt=kt?Et.scrollTop:Et.scrollLeft,ie=kt&&Et.style.overflowY==="scroll"||!kt&&Et.style.overflowX==="scroll";if(Q=Z(gt),(qt<0&&Kt>0||qt>0&&Kt<Rt)&&B&&ie)return K=!0;B=!1,ei(gt),K=!1}),x.input(Et,"touchend",function(){K=!1})}(Pt)})}}g.on("updated",Dt),g.on("optionsChanged",Ot),g.on("created",Ot),g.on("destroyed",x.purge)}function go(g){var H,m,n=null;function $(w,N,B){g.animator.active?D(w,N,B):requestAnimationFrame(function(){return D(w,N,B)})}function A(){$(!1,!1,m)}function D(w,N,B){var K=0,at=g.size,J=g.track.details;if(J&&H){var x=J.slides;H.forEach(function(V,F){if(w)!n&&N&&O(V,null,B),M(V,null,B);else{if(!x[F])return;var P=x[F].size*at;!n&&N&&O(V,P,B),M(V,x[F].distance*at-K,B),K+=P}})}}function st(w){return g.options.renderMode==="performance"?Math.round(w):w}function O(w,N,B){var K=B?"height":"width";N!==null&&(N=st(N)+"px"),w.style["min-"+K]=N,w.style["max-"+K]=N}function M(w,N,B){if(N!==null){N=st(N);var K=B?N:0;N="translate3d(".concat(B?0:N,"px, ").concat(K,"px, 0)")}w.style.transform=N,w.style["-webkit-transform"]=N}function C(){H&&(D(!0,!0,m),H=null),g.on("detailsChanged",A,!0)}function W(){$(!1,!0,m)}function R(){C(),m=g.options.vertical,g.options.disabled||g.options.renderMode==="custom"||(n=ze(g.options.slides,"perView",null)==="auto",g.on("detailsChanged",A),(H=g.slides).length&&W())}g.on("created",R),g.on("optionsChanged",R),g.on("beforeOptionsChanged",function(){C()}),g.on("updated",W),g.on("destroyed",C)}function fo(g,H){return function(m){var n,$,A,D,st,O=Sr();function M(j){var Z;fn(m.container,"reverse",(Z=m.container,window.getComputedStyle(Z,null).getPropertyValue("direction")!=="rtl"||j?null:"")),fn(m.container,"v",m.options.vertical&&!j?"":null),fn(m.container,"disabled",m.options.disabled&&!j?"":null)}function C(){W()&&K()}function W(){var j=null;if(D.forEach(function(vt){vt.matches&&(j=vt.__media)}),j===n)return!1;n||m.emit("beforeOptionsChanged"),n=j;var Z=j?A.breakpoints[j]:A;return m.options=Os(Os({},A),Z),M(),F(),P(),J(),!0}function R(j){var Z=xr(j);return(m.options.vertical?Z.height:Z.width)/m.size||1}function w(){return m.options.trackConfig.length}function N(j){for(var Z in n=!1,A=Os(Os({},H),j),O.purge(),$=m.size,D=[],A.breakpoints||[]){var vt=window.matchMedia(Z);vt.__media=Z,D.push(vt),O.add(vt,"change",C)}O.add(window,"orientationchange",V),O.add(window,"resize",x),W()}function B(j){m.animator.stop();var Z=m.track.details;m.track.init(j??(Z?Z.abs:0))}function K(j){B(j),m.emit("optionsChanged")}function at(j,Z){if(j)return N(j),void K(Z);F(),P();var vt=w();J(),w()!==vt?K(Z):B(Z),m.emit("updated")}function J(){var j=m.options.slides;if(typeof j=="function")return m.options.trackConfig=j(m.size,m.slides);for(var Z=m.slides,vt=Z.length,Dt=typeof j=="number"?j:ze(j,"number",vt,!0),Tt=[],Ot=ze(j,"perView",1,!0),_t=ze(j,"spacing",0,!0)/m.size||0,Mt=Ot==="auto"?_t:_t/Ot,Pt=ze(j,"origin","auto"),Et=0,Q=0;Q<Dt;Q++){var gt=Ot==="auto"?R(Z[Q]):1/Ot-_t+Mt,kt=Pt==="center"?.5-gt/2:Pt==="auto"?0:Pt;Tt.push({origin:kt,size:gt,spacing:_t}),Et+=gt}if(Et+=_t*(Dt-1),Pt==="auto"&&!m.options.loop&&Ot!==1){var Rt=0;Tt.map(function(qt){var Kt=Et-Rt;return Rt+=qt.size+_t,Kt>=1||(qt.origin=1-Kt-(Et>1?0:1-Et)),qt})}m.options.trackConfig=Tt}function x(){F();var j=m.size;m.options.disabled||j===$||($=j,at())}function V(){x(),setTimeout(x,500),setTimeout(x,2e3)}function F(){var j=xr(m.container);m.size=(m.options.vertical?j.height:j.width)||1}function P(){m.slides=Li(m.options.selector,m.container)}m.container=(st=Li(g,document)).length?st[0]:null,m.destroy=function(){O.purge(),m.emit("destroyed"),M(!0)},m.prev=function(){m.moveToIdx(m.track.details.abs-1,!0)},m.next=function(){m.moveToIdx(m.track.details.abs+1,!0)},m.update=at,N(m.options)}}var mo=function(g,H,m){try{return function(n,$){var A,D={};return A={emit:function(st){D[st]&&D[st].forEach(function(M){M(A)});var O=A.options&&A.options[st];O&&O(A)},moveToIdx:function(st,O,M){var C=A.track.idxToDist(st,O);if(C){var W=A.options.defaultAnimation;A.animator.start([{distance:C,duration:ze(M||W,"duration",500),easing:ze(M||W,"easing",function(R){return 1+--R*R*R*R*R})}])}},on:function(st,O,M){M===void 0&&(M=!1),D[st]||(D[st]=[]);var C=D[st].indexOf(O);C>-1?M&&delete D[st][C]:M||D[st].push(O)},options:n},function(){if(A.track=co(A),A.animator=lo(A),$)for(var st=0,O=$;st<O.length;st++)(0,O[st])(A);A.track.init(A.options.initial||0),A.emit("created")}(),A}(H,yr([fo(g,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),go,po,uo],m||[],!0))}catch(n){console.error(n)}};const vo=document.querySelectorAll('[data-role="slider-thumbnail"]'),Tr=document.getElementById("js-main-slider");function bo(g){return H=>{function m(){g.forEach(n=>{n.addEventListener("click",()=>{H.moveToIdx(Number(n.dataset.target)),g.forEach($=>{$.dataset.target!=n.dataset.target?$.classList.remove("slider-thumbnail__img_active"):$.classList.add("slider-thumbnail__img_active")})})})}H.on("created",()=>{m()}),H.on("animationEnded",()=>{const n=H.track.details.rel;g.forEach($=>{$.dataset.target==n?$.classList.add("slider-thumbnail__img_active"):$.classList.remove("slider-thumbnail__img_active")})})}}Tr&&new mo(Tr,{slides:{perView:1},defaultAnimation:{duration:0}},[bo(vo)]),document.querySelectorAll('[data-role="zengin-input"]').forEach(g=>{g.addEventListener("change",Ao)});function Ao(g){let H=g.target.value;if(H){const m=yo(H);g.target.value=m}}function yo(g){const H=/[^0-9A-Zｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜﾝﾞﾟ\(\)｢｣\/\-\.\\ ]/g,m=["\uFF70","\uFF67","\uFF68","\uFF69","\uFF6A","\uFF6B","\uFF6F","\uFF6C","\uFF6D","\uFF6E","\uFF08","\uFF09"],n=["-","\uFF71","\uFF72","\uFF73","\uFF74","\uFF75","\uFF82","\uFF94","\uFF95","\uFF96","(",")"];let $;return $=g.toUpperCase(),$=_o($,"khsa"),m.forEach((A,D)=>{$=$.replaceAll(A,n[D])}),$=$.replace(H,""),$}function _o(g,H){var m,n,$,A,D,st;if(m=["\uFF76\uFF9E","\uFF77\uFF9E","\uFF78\uFF9E","\uFF79\uFF9E","\uFF7A\uFF9E","\uFF7B\uFF9E","\uFF7C\uFF9E","\uFF7D\uFF9E","\uFF7E\uFF9E","\uFF7F\uFF9E","\uFF80\uFF9E","\uFF81\uFF9E","\uFF82\uFF9E","\uFF83\uFF9E","\uFF84\uFF9E","\uFF8A\uFF9E","\uFF8A\uFF9F","\uFF8B\uFF9E","\uFF8B\uFF9F","\uFF8C\uFF9E","\uFF8C\uFF9F","\uFF8D\uFF9E","\uFF8D\uFF9F","\uFF8E\uFF9E","\uFF8E\uFF9F","\uFF73\uFF9E","\uFF70","\uFF67","\uFF71","\uFF68","\uFF72","\uFF69","\uFF73","\uFF6A","\uFF74","\uFF6B","\uFF75","\uFF76","\uFF77","\uFF78","\uFF79","\uFF7A","\uFF7B","\uFF7C","\uFF7D","\uFF7E","\uFF7F","\uFF80","\uFF81","\uFF6F","\uFF82","\uFF83","\uFF84","\uFF85","\uFF86","\uFF87","\uFF88","\uFF89","\uFF8A","\uFF8B","\uFF8C","\uFF8D","\uFF8E","\uFF8F","\uFF90","\uFF91","\uFF92","\uFF93","\uFF6C","\uFF94","\uFF6D","\uFF95","\uFF6E","\uFF96","\uFF97","\uFF98","\uFF99","\uFF9A","\uFF9B","\uFF9C","\uFF66","\uFF9D","\uFF76","\uFF79","\uFF9C","\uFF72","\uFF74","\uFF9E","\uFF9F"],n=["\u30AC","\u30AE","\u30B0","\u30B2","\u30B4","\u30B6","\u30B8","\u30BA","\u30BC","\u30BE","\u30C0","\u30C2","\u30C5","\u30C7","\u30C9","\u30D0","\u30D1","\u30D3","\u30D4","\u30D6","\u30D7","\u30D9","\u30DA","\u30DC","\u30DD","\u30F4","\u30FC","\u30A1","\u30A2","\u30A3","\u30A4","\u30A5","\u30A6","\u30A7","\u30A8","\u30A9","\u30AA","\u30AB","\u30AD","\u30AF","\u30B1","\u30B3","\u30B5","\u30B7","\u30B9","\u30BB","\u30BD","\u30BF","\u30C1","\u30C3","\u30C4","\u30C6","\u30C8","\u30CA","\u30CB","\u30CC","\u30CD","\u30CE","\u30CF","\u30D2","\u30D5","\u30D8","\u30DB","\u30DE","\u30DF","\u30E0","\u30E1","\u30E2","\u30E3","\u30E4","\u30E5","\u30E6","\u30E7","\u30E8","\u30E9","\u30EA","\u30EB","\u30EC","\u30ED","\u30EF","\u30F2","\u30F3","\u30F5","\u30F6","\u30EE","\u30F0","\u30F1","\u309B","\u309C"],$=["\u304C","\u304E","\u3050","\u3052","\u3054","\u3056","\u3058","\u305A","\u305C","\u305E","\u3060","\u3062","\u3065","\u3067","\u3069","\u3070","\u3071","\u3073","\u3074","\u3076","\u3077","\u3079","\u307A","\u307C","\u307D","\u30F4","\u30FC","\u3041","\u3042","\u3043","\u3044","\u3045","\u3046","\u3047","\u3048","\u3049","\u304A","\u304B","\u304D","\u304F","\u3051","\u3053","\u3055","\u3057","\u3059","\u305B","\u305D","\u305F","\u3061","\u3063","\u3064","\u3066","\u3068","\u306A","\u306B","\u306C","\u306D","\u306E","\u306F","\u3072","\u3075","\u3078","\u307B","\u307E","\u307F","\u3080","\u3081","\u3082","\u3083","\u3084","\u3085","\u3086","\u3087","\u3088","\u3089","\u308A","\u308B","\u308C","\u308D","\u308F","\u3092","\u3093","\u304B","\u3051","\u308E","\u3090","\u3091","\u309B","\u309C"],A=m.length,H.match(/[ra]/)&&(g=g.replace(/[Ａ-ｚ]/g,function(O){return String.fromCharCode(parseInt(O.charCodeAt(0))-65248)})),H.match(/[RA]/)&&(g=g.replace(/[A-z]/g,function(O){return String.fromCharCode(parseInt(O.charCodeAt(0))+65248)})),H.match(/[na]/)&&(g=g.replace(/[０-９]/g,function(O){return String.fromCharCode(parseInt(O.charCodeAt(0))-65248)})),H.match(/[NA]/)&&(g=g.replace(/[0-9]/g,function(O){return String.fromCharCode(parseInt(O.charCodeAt(0))+65248)})),H.match(/s/)&&(g=g.replace(/　/g," ")),H.match(/S/)&&(g=g.replace(/ /g,"\u3000")),H.match(/k/))for(D=0;D<A;D++)st=new RegExp(n[D],"g"),g=g.replace(st,m[D]);if(H.match(/K/))for(H.match(/V/)||(g=g.replace(/ﾞ/g,"\u309B"),g=g.replace(/ﾟ/g,"\u309C")),D=0;D<A;D++)st=new RegExp(m[D],"g"),g=g.replace(st,n[D]);if(H.match(/h/))for(D=0;D<A;D++)st=new RegExp($[D],"g"),g=g.replace(st,m[D]);if(H.match(/H/))for(H.match(/V/)||(g=g.replace(/ﾞ/g,"\u309B"),g=g.replace(/ﾟ/g,"\u309C")),D=0;D<A;D++)st=new RegExp(m[D],"g"),g=g.replace(st,$[D]);if(H.match(/c/))for(D=0;D<A;D++)st=new RegExp(n[D],"g"),g=g.replace(st,$[D]);if(H.match(/C/))for(D=0;D<A;D++)st=new RegExp($[D],"g"),g=g.replace(st,n[D]);return g}document.querySelectorAll('[data-role="toggle-input--btn"]').forEach(g=>{g.addEventListener("click",H=>{const m=H.target.dataset.group;document.querySelectorAll(`[data-group="${m}"][data-role="toggle-input--value"], [data-group="${m}"][data-role="toggle-input--input"]`).forEach(n=>{n.classList.toggle("toggle-input_show")})})});const wo=document.querySelectorAll('[data-role="resize-input"]'),Eo=document.querySelectorAll('[data-role="drop-input"]');document.querySelectorAll('[data-role="preview-img"]'),wo.forEach(g=>{g.addEventListener("change",Co)}),Eo.forEach(g=>{g.addEventListener("dragover",H=>H.preventDefault()),g.addEventListener("drop",To)});function Cr(g,H){if(!g.type.match(Mo))throw new Error("invalid mime type");let m=new FileReader;m.onload=async()=>{const n=m.result,$=await So(n),A=await(await fetch($)).blob();H.file=new File([A],"resize.jpeg",{type:"image/jpeg"}),xo($,H.dataset.target)},m.readAsDataURL(g)}async function So(g){const H=await new Promise((A,D)=>{const st=new Image;st.onload=()=>{A(st)},st.onerror=()=>{D()},st.src=g}),m=document.createElement("canvas");let n=H.naturalWidth,$=H.naturalHeight;for(;n*$>5e5;)n/=10,$/=10;return m.width=n,m.height=$,m.getContext("2d").drawImage(H,0,0,n,$),m.toDataURL("image/jpeg")}function xo(g,H){const m=document.querySelector(H),n=document.createElement("img");n.classList.add("preview-img"),n.onload=()=>{m.innerHTML=null,m.appendChild(n)},n.src=g}function To(g){g.preventDefault();const H=g.dataTransfer.files[0];Cr(H,g.target.childNodes[1])}function Co(g){const H=g.target.files[0];Cr(H,g.target)}const Mo=/^(image\/jpg|image\/jpeg|image\/png|image\/webp)$/,Lo="modulepreload",Po=function(g){return"/"+g},Mr={},ms=function(g,H,m){let n=Promise.resolve();if(H&&H.length>0){const $=document.getElementsByTagName("link"),A=document.querySelector("meta[property=csp-nonce]"),D=(A==null?void 0:A.nonce)||(A==null?void 0:A.getAttribute("nonce"));n=Promise.all(H.map(st=>{if(st=Po(st),st in Mr)return;Mr[st]=!0;const O=st.endsWith(".css"),M=O?'[rel="stylesheet"]':"";if(m)for(let W=$.length-1;W>=0;W--){const R=$[W];if(R.href===st&&(!O||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${st}"]${M}`))return;const C=document.createElement("link");if(C.rel=O?"stylesheet":Lo,O||(C.as="script",C.crossOrigin=""),C.href=st,D&&C.setAttribute("nonce",D),document.head.appendChild(C),O)return new Promise((W,R)=>{C.addEventListener("load",W),C.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${st}`)))})}))}return n.then(()=>g()).catch($=>{const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=$,window.dispatchEvent(A),!A.defaultPrevented)throw $})};var ko={976:(g,H,m)=>{var le,Vt,Ds,Te,Dr,Ee,Fr,tt,s,i,l,d,a,f,p,v,c,r,o,E,U,G,rt,ot,yt,Nr,ut,qi,S,wn,nt,En,u,q,z,lt,ft,Ct,Ft,Sn,re,he,Ce,_e,Or,fe,xn;m.d(H,{AnnotationLayer:()=>de,FreeTextAnnotationElement:()=>Tt,InkAnnotationElement:()=>gt,StampAnnotationElement:()=>ie});var n=m(292),$=m(419),A=m(792);function D(se){return Math.floor(Math.max(0,Math.min(1,se))*255).toString(16).padStart(2,"0")}function st(se){return Math.max(0,Math.min(255,255*se))}class O{static CMYK_G([L,b,Y,it]){return["G",1-Math.min(1,.3*L+.59*Y+.11*b+it)]}static G_CMYK([L]){return["CMYK",0,0,0,1-L]}static G_RGB([L]){return["RGB",L,L,L]}static G_rgb([L]){return L=st(L),[L,L,L]}static G_HTML([L]){const b=D(L);return`#${b}${b}${b}`}static RGB_G([L,b,Y]){return["G",.3*L+.59*b+.11*Y]}static RGB_rgb(L){return L.map(st)}static RGB_HTML(L){return`#${L.map(D).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([L,b,Y,it]){return["RGB",1-Math.min(1,L+it),1-Math.min(1,Y+it),1-Math.min(1,b+it)]}static CMYK_rgb([L,b,Y,it]){return[st(1-Math.min(1,L+it)),st(1-Math.min(1,Y+it)),st(1-Math.min(1,b+it))]}static CMYK_HTML(L){const b=this.CMYK_RGB(L).slice(1);return this.RGB_HTML(b)}static RGB_CMYK([L,b,Y]){const it=1-L,ct=1-b,wt=1-Y,bt=Math.min(it,ct,wt);return["CMYK",it,ct,wt,bt]}}var M=m(284);const C=1e3,W=9,R=new WeakSet;function w(se){return{width:se[2]-se[0],height:se[3]-se[1]}}class N{static create(L){switch(L.data.annotationType){case n.AnnotationType.LINK:return new K(L);case n.AnnotationType.TEXT:return new at(L);case n.AnnotationType.WIDGET:switch(L.data.fieldType){case"Tx":return new x(L);case"Btn":return L.data.radioButton?new P(L):L.data.checkBox?new F(L):new j(L);case"Ch":return new Z(L);case"Sig":return new V(L)}return new J(L);case n.AnnotationType.POPUP:return new vt(L);case n.AnnotationType.FREETEXT:return new Tt(L);case n.AnnotationType.LINE:return new Ot(L);case n.AnnotationType.SQUARE:return new _t(L);case n.AnnotationType.CIRCLE:return new Mt(L);case n.AnnotationType.POLYLINE:return new Pt(L);case n.AnnotationType.CARET:return new Q(L);case n.AnnotationType.INK:return new gt(L);case n.AnnotationType.POLYGON:return new Et(L);case n.AnnotationType.HIGHLIGHT:return new kt(L);case n.AnnotationType.UNDERLINE:return new Rt(L);case n.AnnotationType.SQUIGGLY:return new qt(L);case n.AnnotationType.STRIKEOUT:return new Kt(L);case n.AnnotationType.STAMP:return new ie(L);case n.AnnotationType.FILEATTACHMENT:return new xe(L);default:return new B(L)}}}const ve=class ve{constructor(L,{isRenderable:b=!1,ignoreBorder:Y=!1,createQuadrilaterals:it=!1}={}){h(this,le,!1);this.isRenderable=b,this.data=L.data,this.layer=L.layer,this.linkService=L.linkService,this.downloadManager=L.downloadManager,this.imageResourcesPath=L.imageResourcesPath,this.renderForms=L.renderForms,this.svgFactory=L.svgFactory,this.annotationStorage=L.annotationStorage,this.enableScripting=L.enableScripting,this.hasJSActions=L.hasJSActions,this._fieldObjects=L.fieldObjects,this.parent=L.parent,b&&(this.container=this._createContainer(Y)),it&&this._createQuadrilaterals()}static _hasPopupData({titleObj:L,contentsObj:b,richText:Y}){return!!(L!=null&&L.str||b!=null&&b.str||Y!=null&&Y.str)}get hasPopupData(){return ve._hasPopupData(this.data)}_createContainer(L){const{data:b,parent:{page:Y,viewport:it}}=this,ct=document.createElement("section");ct.setAttribute("data-annotation-id",b.id),this instanceof J||(ct.tabIndex=C),ct.style.zIndex=this.parent.zIndex++,b.popupRef&&ct.setAttribute("aria-haspopup","dialog"),b.alternativeText&&(ct.title=b.alternativeText),b.noRotate&&ct.classList.add("norotate");const{pageWidth:wt,pageHeight:bt,pageX:zt,pageY:Gt}=it.rawDims;if(!b.rect||this instanceof vt){const{rotation:$t}=b;return!b.hasOwnCanvas&&$t!==0&&this.setRotation($t,ct),ct}const{width:Nt,height:Yt}=w(b.rect),Ut=n.Util.normalizeRect([b.rect[0],Y.view[3]-b.rect[1]+Y.view[1],b.rect[2],Y.view[3]-b.rect[3]+Y.view[1]]);if(!L&&b.borderStyle.width>0){ct.style.borderWidth=`${b.borderStyle.width}px`;const $t=b.borderStyle.horizontalCornerRadius,Qt=b.borderStyle.verticalCornerRadius;if($t>0||Qt>0){const ce=`calc(${$t}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;ct.style.borderRadius=ce}else if(this instanceof P){const ce=`calc(${Nt}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;ct.style.borderRadius=ce}switch(b.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:ct.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:ct.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:ct.style.borderBottomStyle="solid";break}const ue=b.borderColor||null;ue?(T(this,le,!0),ct.style.borderColor=n.Util.makeHexColor(ue[0]|0,ue[1]|0,ue[2]|0)):ct.style.borderWidth=0}ct.style.left=`${100*(Ut[0]-zt)/wt}%`,ct.style.top=`${100*(Ut[1]-Gt)/bt}%`;const{rotation:xt}=b;return b.hasOwnCanvas||xt===0?(ct.style.width=`${100*Nt/wt}%`,ct.style.height=`${100*Yt/bt}%`):this.setRotation(xt,ct),ct}setRotation(L,b=this.container){if(!this.data.rect)return;const{pageWidth:Y,pageHeight:it}=this.parent.viewport.rawDims,{width:ct,height:wt}=w(this.data.rect);let bt,zt;L%180===0?(bt=100*ct/Y,zt=100*wt/it):(bt=100*wt/Y,zt=100*ct/it),b.style.width=`${bt}%`,b.style.height=`${zt}%`,b.setAttribute("data-main-rotation",(360-L)%360)}get _commonActions(){const L=(b,Y,it)=>{const ct=it.detail[b],wt=ct[0],bt=ct.slice(1);it.target.style[Y]=O[`${wt}_HTML`](bt),this.annotationStorage.setValue(this.data.id,{[Y]:O[`${wt}_rgb`](bt)})};return(0,n.shadow)(this,"_commonActions",{display:b=>{const{display:Y}=b.detail,it=Y%2===1;this.container.style.visibility=it?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:it,noPrint:Y===1||Y===2})},print:b=>{this.annotationStorage.setValue(this.data.id,{noPrint:!b.detail.print})},hidden:b=>{const{hidden:Y}=b.detail;this.container.style.visibility=Y?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Y,noView:Y})},focus:b=>{setTimeout(()=>b.target.focus({preventScroll:!1}),0)},userName:b=>{b.target.title=b.detail.userName},readonly:b=>{b.target.disabled=b.detail.readonly},required:b=>{this._setRequired(b.target,b.detail.required)},bgColor:b=>{L("bgColor","backgroundColor",b)},fillColor:b=>{L("fillColor","backgroundColor",b)},fgColor:b=>{L("fgColor","color",b)},textColor:b=>{L("textColor","color",b)},borderColor:b=>{L("borderColor","borderColor",b)},strokeColor:b=>{L("strokeColor","borderColor",b)},rotation:b=>{const Y=b.detail.rotation;this.setRotation(Y),this.annotationStorage.setValue(this.data.id,{rotation:Y})}})}_dispatchEventFromSandbox(L,b){var it;const Y=this._commonActions;for(const ct of Object.keys(b.detail))(it=L[ct]||Y[ct])==null||it(b)}_setDefaultPropertiesFromJS(L){if(!this.enableScripting)return;const b=this.annotationStorage.getRawValue(this.data.id);if(!b)return;const Y=this._commonActions;for(const[it,ct]of Object.entries(b)){const wt=Y[it];if(wt){const bt={detail:{[it]:ct},target:L};wt(bt),delete b[it]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:L}=this.data;if(!L)return;const[b,Y,it,ct]=this.data.rect;if(L.length===1){const[,{x:Qt,y:ue},{x:ce,y:we}]=L[0];if(it===Qt&&ct===ue&&b===ce&&Y===we)return}const{style:wt}=this.container;let bt;if(t(this,le)){const{borderColor:Qt,borderWidth:ue}=wt;wt.borderWidth=0,bt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Qt}" stroke-width="${ue}">`],this.container.classList.add("hasBorder")}const zt=it-b,Gt=ct-Y,{svgFactory:Nt}=this,Yt=Nt.createElement("svg");Yt.classList.add("quadrilateralsContainer"),Yt.setAttribute("width",0),Yt.setAttribute("height",0);const Ut=Nt.createElement("defs");Yt.append(Ut);const xt=Nt.createElement("clipPath"),$t=`clippath_${this.data.id}`;xt.setAttribute("id",$t),xt.setAttribute("clipPathUnits","objectBoundingBox"),Ut.append(xt);for(const[,{x:Qt,y:ue},{x:ce,y:we}]of L){const Me=Nt.createElement("rect"),Qe=(ce-b)/zt,Xe=(ct-ue)/Gt,We=(Qt-ce)/zt,ss=(ue-we)/Gt;Me.setAttribute("x",Qe),Me.setAttribute("y",Xe),Me.setAttribute("width",We),Me.setAttribute("height",ss),xt.append(Me),bt==null||bt.push(`<rect vector-effect="non-scaling-stroke" x="${Qe}" y="${Xe}" width="${We}" height="${ss}"/>`)}t(this,le)&&(bt.push("</g></svg>')"),wt.backgroundImage=bt.join("")),this.container.append(Yt),this.container.style.clipPath=`url(#${$t})`}_createPopup(){const{container:L,data:b}=this;L.setAttribute("aria-haspopup","dialog");const Y=new vt({data:{color:b.color,titleObj:b.titleObj,modificationDate:b.modificationDate,contentsObj:b.contentsObj,richText:b.richText,parentRect:b.rect,borderStyle:0,id:`popup_${b.id}`,rotation:b.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Y.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(L,b=null){const Y=[];if(this._fieldObjects){const it=this._fieldObjects[L];if(it)for(const{page:ct,id:wt,exportValues:bt}of it){if(ct===-1||wt===b)continue;const zt=typeof bt=="string"?bt:null,Gt=document.querySelector(`[data-element-id="${wt}"]`);if(Gt&&!R.has(Gt)){(0,n.warn)(`_getElementsByName - element not allowed: ${wt}`);continue}Y.push({id:wt,exportValue:zt,domElement:Gt})}return Y}for(const it of document.getElementsByName(L)){const{exportValue:ct}=it,wt=it.getAttribute("data-element-id");wt!==b&&R.has(it)&&Y.push({id:wt,exportValue:ct,domElement:it})}return Y}show(){var L;this.container&&(this.container.hidden=!1),(L=this.popup)==null||L.maybeShow()}hide(){var L;this.container&&(this.container.hidden=!0),(L=this.popup)==null||L.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const L=this.getElementsToTriggerPopup();if(Array.isArray(L))for(const b of L)b.classList.add("highlightArea");else L.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:L,data:{id:b}}=this;this.container.addEventListener("dblclick",()=>{var Y;(Y=this.linkService.eventBus)==null||Y.dispatch("switchannotationeditormode",{source:this,mode:L,editId:b})})}};le=new WeakMap;let B=ve;class K extends B{constructor(b,Y=null){super(b,{isRenderable:!0,ignoreBorder:!!(Y!=null&&Y.ignoreBorder),createQuadrilaterals:!0});h(this,Vt);h(this,Te);h(this,Ee);this.isTooltipOnly=b.data.isTooltipOnly}render(){const{data:b,linkService:Y}=this,it=document.createElement("a");it.setAttribute("data-element-id",b.id);let ct=!1;return b.url?(Y.addLinkAttributes(it,b.url,b.newWindow),ct=!0):b.action?(this._bindNamedAction(it,b.action),ct=!0):b.attachment?(y(this,Te,Dr).call(this,it,b.attachment,b.attachmentDest),ct=!0):b.setOCGState?(y(this,Ee,Fr).call(this,it,b.setOCGState),ct=!0):b.dest?(this._bindLink(it,b.dest),ct=!0):(b.actions&&(b.actions.Action||b.actions["Mouse Up"]||b.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(it,b),ct=!0),b.resetForm?(this._bindResetFormAction(it,b.resetForm),ct=!0):this.isTooltipOnly&&!ct&&(this._bindLink(it,""),ct=!0)),this.container.classList.add("linkAnnotation"),ct&&this.container.append(it),this.container}_bindLink(b,Y){b.href=this.linkService.getDestinationHash(Y),b.onclick=()=>(Y&&this.linkService.goToDestination(Y),!1),(Y||Y==="")&&y(this,Vt,Ds).call(this)}_bindNamedAction(b,Y){b.href=this.linkService.getAnchorUrl(""),b.onclick=()=>(this.linkService.executeNamedAction(Y),!1),y(this,Vt,Ds).call(this)}_bindJSAction(b,Y){b.href=this.linkService.getAnchorUrl("");const it=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ct of Object.keys(Y.actions)){const wt=it.get(ct);wt&&(b[wt]=()=>{var bt;return(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y.id,name:ct}}),!1})}b.onclick||(b.onclick=()=>!1),y(this,Vt,Ds).call(this)}_bindResetFormAction(b,Y){const it=b.onclick;if(it||(b.href=this.linkService.getAnchorUrl("")),y(this,Vt,Ds).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),it||(b.onclick=()=>!1);return}b.onclick=()=>{var Yt;it==null||it();const{fields:ct,refs:wt,include:bt}=Y,zt=[];if(ct.length!==0||wt.length!==0){const Ut=new Set(wt);for(const xt of ct){const $t=this._fieldObjects[xt]||[];for(const{id:Qt}of $t)Ut.add(Qt)}for(const xt of Object.values(this._fieldObjects))for(const $t of xt)Ut.has($t.id)===bt&&zt.push($t)}else for(const Ut of Object.values(this._fieldObjects))zt.push(...Ut);const Gt=this.annotationStorage,Nt=[];for(const Ut of zt){const{id:xt}=Ut;switch(Nt.push(xt),Ut.type){case"text":{const Qt=Ut.defaultValue||"";Gt.setValue(xt,{value:Qt});break}case"checkbox":case"radiobutton":{const Qt=Ut.defaultValue===Ut.exportValues;Gt.setValue(xt,{value:Qt});break}case"combobox":case"listbox":{const Qt=Ut.defaultValue||"";Gt.setValue(xt,{value:Qt});break}default:continue}const $t=document.querySelector(`[data-element-id="${xt}"]`);if($t){if(!R.has($t)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${xt}`);continue}}else continue;$t.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Nt,name:"ResetForm"}})),!1}}}Vt=new WeakSet,Ds=function(){this.container.setAttribute("data-internal-link","")},Te=new WeakSet,Dr=function(b,Y,it=null){b.href=this.linkService.getAnchorUrl(""),b.onclick=()=>{var ct;return(ct=this.downloadManager)==null||ct.openOrDownloadData(Y.content,Y.filename,it),!1},y(this,Vt,Ds).call(this)},Ee=new WeakSet,Fr=function(b,Y){b.href=this.linkService.getAnchorUrl(""),b.onclick=()=>(this.linkService.executeSetOCGState(Y),!1),y(this,Vt,Ds).call(this)};class at extends B{constructor(L){super(L,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const L=document.createElement("img");return L.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",L.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),L.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(L),this.container}}class J extends B{render(){return this.container}showElementAndHideCanvas(L){var b;this.data.hasOwnCanvas&&(((b=L.previousSibling)==null?void 0:b.nodeName)==="CANVAS"&&(L.previousSibling.hidden=!0),L.hidden=!1)}_getKeyModifier(L){return n.FeatureTest.platform.isMac?L.metaKey:L.ctrlKey}_setEventListener(L,b,Y,it,ct){Y.includes("mouse")?L.addEventListener(Y,wt=>{var bt;(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:it,value:ct(wt),shift:wt.shiftKey,modifier:this._getKeyModifier(wt)}})}):L.addEventListener(Y,wt=>{var bt;if(Y==="blur"){if(!b.focused||!wt.relatedTarget)return;b.focused=!1}else if(Y==="focus"){if(b.focused)return;b.focused=!0}ct&&((bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:it,value:ct(wt)}}))})}_setEventListeners(L,b,Y,it){var ct,wt,bt;for(const[zt,Gt]of Y)(Gt==="Action"||(ct=this.data.actions)!=null&&ct[Gt])&&((Gt==="Focus"||Gt==="Blur")&&(b||(b={focused:!1})),this._setEventListener(L,b,zt,Gt,it),Gt==="Focus"&&!((wt=this.data.actions)!=null&&wt.Blur)?this._setEventListener(L,b,"blur","Blur",null):Gt==="Blur"&&!((bt=this.data.actions)!=null&&bt.Focus)&&this._setEventListener(L,b,"focus","Focus",null))}_setBackgroundColor(L){const b=this.data.backgroundColor||null;L.style.backgroundColor=b===null?"transparent":n.Util.makeHexColor(b[0],b[1],b[2])}_setTextStyle(L){const b=["left","center","right"],{fontColor:Y}=this.data.defaultAppearanceData,it=this.data.defaultAppearanceData.fontSize||W,ct=L.style;let wt;const bt=2,zt=Gt=>Math.round(10*Gt)/10;if(this.data.multiLine){const Gt=Math.abs(this.data.rect[3]-this.data.rect[1]-bt),Nt=Math.round(Gt/(n.LINE_FACTOR*it))||1,Yt=Gt/Nt;wt=Math.min(it,zt(Yt/n.LINE_FACTOR))}else{const Gt=Math.abs(this.data.rect[3]-this.data.rect[1]-bt);wt=Math.min(it,zt(Gt/n.LINE_FACTOR))}ct.fontSize=`calc(${wt}px * var(--scale-factor))`,ct.color=n.Util.makeHexColor(Y[0],Y[1],Y[2]),this.data.textAlignment!==null&&(ct.textAlign=b[this.data.textAlignment])}_setRequired(L,b){b?L.setAttribute("required",!0):L.removeAttribute("required"),L.setAttribute("aria-required",b)}}class x extends J{constructor(L){const b=L.renderForms||L.data.hasOwnCanvas||!L.data.hasAppearance&&!!L.data.fieldValue;super(L,{isRenderable:b})}setPropertyOnSiblings(L,b,Y,it){const ct=this.annotationStorage;for(const wt of this._getElementsByName(L.name,L.id))wt.domElement&&(wt.domElement[b]=Y),ct.setValue(wt.id,{[it]:Y})}render(){var it,ct;const L=this.annotationStorage,b=this.data.id;this.container.classList.add("textWidgetAnnotation");let Y=null;if(this.renderForms){const wt=L.getValue(b,{value:this.data.fieldValue});let bt=wt.value||"";const zt=L.getValue(b,{charLimit:this.data.maxLen}).charLimit;zt&&bt.length>zt&&(bt=bt.slice(0,zt));let Gt=wt.formattedValue||((it=this.data.textContent)==null?void 0:it.join(`
`))||null;Gt&&this.data.comb&&(Gt=Gt.replaceAll(/\s+/g,""));const Nt={userValue:bt,formattedValue:Gt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Y=document.createElement("textarea"),Y.textContent=Gt??bt,this.data.doNotScroll&&(Y.style.overflowY="hidden")):(Y=document.createElement("input"),Y.type="text",Y.setAttribute("value",Gt??bt),this.data.doNotScroll&&(Y.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Y.hidden=!0),R.add(Y),Y.setAttribute("data-element-id",b),Y.disabled=this.data.readOnly,Y.name=this.data.fieldName,Y.tabIndex=C,this._setRequired(Y,this.data.required),zt&&(Y.maxLength=zt),Y.addEventListener("input",Ut=>{L.setValue(b,{value:Ut.target.value}),this.setPropertyOnSiblings(Y,"value",Ut.target.value,"value"),Nt.formattedValue=null}),Y.addEventListener("resetform",Ut=>{const xt=this.data.defaultFieldValue??"";Y.value=Nt.userValue=xt,Nt.formattedValue=null});let Yt=Ut=>{const{formattedValue:xt}=Nt;xt!=null&&(Ut.target.value=xt),Ut.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Y.addEventListener("focus",xt=>{var Qt;if(Nt.focused)return;const{target:$t}=xt;Nt.userValue&&($t.value=Nt.userValue),Nt.lastCommittedValue=$t.value,Nt.commitKey=1,(Qt=this.data.actions)!=null&&Qt.Focus||(Nt.focused=!0)}),Y.addEventListener("updatefromsandbox",xt=>{this.showElementAndHideCanvas(xt.target);const $t={value(Qt){Nt.userValue=Qt.detail.value??"",L.setValue(b,{value:Nt.userValue.toString()}),Qt.target.value=Nt.userValue},formattedValue(Qt){const{formattedValue:ue}=Qt.detail;Nt.formattedValue=ue,ue!=null&&Qt.target!==document.activeElement&&(Qt.target.value=ue),L.setValue(b,{formattedValue:ue})},selRange(Qt){Qt.target.setSelectionRange(...Qt.detail.selRange)},charLimit:Qt=>{var Me;const{charLimit:ue}=Qt.detail,{target:ce}=Qt;if(ue===0){ce.removeAttribute("maxLength");return}ce.setAttribute("maxLength",ue);let we=Nt.userValue;!we||we.length<=ue||(we=we.slice(0,ue),ce.value=Nt.userValue=we,L.setValue(b,{value:we}),(Me=this.linkService.eventBus)==null||Me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:we,willCommit:!0,commitKey:1,selStart:ce.selectionStart,selEnd:ce.selectionEnd}}))}};this._dispatchEventFromSandbox($t,xt)}),Y.addEventListener("keydown",xt=>{var ue;Nt.commitKey=1;let $t=-1;if(xt.key==="Escape"?$t=0:xt.key==="Enter"&&!this.data.multiLine?$t=2:xt.key==="Tab"&&(Nt.commitKey=3),$t===-1)return;const{value:Qt}=xt.target;Nt.lastCommittedValue!==Qt&&(Nt.lastCommittedValue=Qt,Nt.userValue=Qt,(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:Qt,willCommit:!0,commitKey:$t,selStart:xt.target.selectionStart,selEnd:xt.target.selectionEnd}}))});const Ut=Yt;Yt=null,Y.addEventListener("blur",xt=>{var Qt,ue;if(!Nt.focused||!xt.relatedTarget)return;(Qt=this.data.actions)!=null&&Qt.Blur||(Nt.focused=!1);const{value:$t}=xt.target;Nt.userValue=$t,Nt.lastCommittedValue!==$t&&((ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:$t,willCommit:!0,commitKey:Nt.commitKey,selStart:xt.target.selectionStart,selEnd:xt.target.selectionEnd}})),Ut(xt)}),(ct=this.data.actions)!=null&&ct.Keystroke&&Y.addEventListener("beforeinput",xt=>{var Xe;Nt.lastCommittedValue=null;const{data:$t,target:Qt}=xt,{value:ue,selectionStart:ce,selectionEnd:we}=Qt;let Me=ce,Qe=we;switch(xt.inputType){case"deleteWordBackward":{const We=ue.substring(0,ce).match(/\w*[^\w]*$/);We&&(Me-=We[0].length);break}case"deleteWordForward":{const We=ue.substring(ce).match(/^[^\w]*\w*/);We&&(Qe+=We[0].length);break}case"deleteContentBackward":ce===we&&(Me-=1);break;case"deleteContentForward":ce===we&&(Qe+=1);break}xt.preventDefault(),(Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:ue,change:$t||"",willCommit:!1,selStart:Me,selEnd:Qe}})}),this._setEventListeners(Y,Nt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],xt=>xt.target.value)}if(Yt&&Y.addEventListener("blur",Yt),this.data.comb){const Ut=(this.data.rect[2]-this.data.rect[0])/zt;Y.classList.add("comb"),Y.style.letterSpacing=`calc(${Ut}px * var(--scale-factor) - 1ch)`}}else Y=document.createElement("div"),Y.textContent=this.data.fieldValue,Y.style.verticalAlign="middle",Y.style.display="table-cell",this.data.hasOwnCanvas&&(Y.hidden=!0);return this._setTextStyle(Y),this._setBackgroundColor(Y),this._setDefaultPropertiesFromJS(Y),this.container.append(Y),this.container}}class V extends J{constructor(L){super(L,{isRenderable:!!L.data.hasOwnCanvas})}}class F extends J{constructor(L){super(L,{isRenderable:L.renderForms})}render(){const L=this.annotationStorage,b=this.data,Y=b.id;let it=L.getValue(Y,{value:b.exportValue===b.fieldValue}).value;typeof it=="string"&&(it=it!=="Off",L.setValue(Y,{value:it})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ct=document.createElement("input");return R.add(ct),ct.setAttribute("data-element-id",Y),ct.disabled=b.readOnly,this._setRequired(ct,this.data.required),ct.type="checkbox",ct.name=b.fieldName,it&&ct.setAttribute("checked",!0),ct.setAttribute("exportValue",b.exportValue),ct.tabIndex=C,ct.addEventListener("change",wt=>{const{name:bt,checked:zt}=wt.target;for(const Gt of this._getElementsByName(bt,Y)){const Nt=zt&&Gt.exportValue===b.exportValue;Gt.domElement&&(Gt.domElement.checked=Nt),L.setValue(Gt.id,{value:Nt})}L.setValue(Y,{value:zt})}),ct.addEventListener("resetform",wt=>{const bt=b.defaultFieldValue||"Off";wt.target.checked=bt===b.exportValue}),this.enableScripting&&this.hasJSActions&&(ct.addEventListener("updatefromsandbox",wt=>{const bt={value(zt){zt.target.checked=zt.detail.value!=="Off",L.setValue(Y,{value:zt.target.checked})}};this._dispatchEventFromSandbox(bt,wt)}),this._setEventListeners(ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],wt=>wt.target.checked)),this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class P extends J{constructor(L){super(L,{isRenderable:L.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const L=this.annotationStorage,b=this.data,Y=b.id;let it=L.getValue(Y,{value:b.fieldValue===b.buttonValue}).value;if(typeof it=="string"&&(it=it!==b.buttonValue,L.setValue(Y,{value:it})),it)for(const wt of this._getElementsByName(b.fieldName,Y))L.setValue(wt.id,{value:!1});const ct=document.createElement("input");if(R.add(ct),ct.setAttribute("data-element-id",Y),ct.disabled=b.readOnly,this._setRequired(ct,this.data.required),ct.type="radio",ct.name=b.fieldName,it&&ct.setAttribute("checked",!0),ct.tabIndex=C,ct.addEventListener("change",wt=>{const{name:bt,checked:zt}=wt.target;for(const Gt of this._getElementsByName(bt,Y))L.setValue(Gt.id,{value:!1});L.setValue(Y,{value:zt})}),ct.addEventListener("resetform",wt=>{const bt=b.defaultFieldValue;wt.target.checked=bt!=null&&bt===b.buttonValue}),this.enableScripting&&this.hasJSActions){const wt=b.buttonValue;ct.addEventListener("updatefromsandbox",bt=>{const zt={value:Gt=>{const Nt=wt===Gt.detail.value;for(const Yt of this._getElementsByName(Gt.target.name)){const Ut=Nt&&Yt.id===Y;Yt.domElement&&(Yt.domElement.checked=Ut),L.setValue(Yt.id,{value:Ut})}}};this._dispatchEventFromSandbox(zt,bt)}),this._setEventListeners(ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],bt=>bt.target.checked)}return this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class j extends K{constructor(L){super(L,{ignoreBorder:L.data.hasAppearance})}render(){const L=super.render();L.classList.add("buttonWidgetAnnotation","pushButton");const b=L.lastChild;return this.enableScripting&&this.hasJSActions&&b&&(this._setDefaultPropertiesFromJS(b),b.addEventListener("updatefromsandbox",Y=>{this._dispatchEventFromSandbox({},Y)})),L}}class Z extends J{constructor(L){super(L,{isRenderable:L.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const L=this.annotationStorage,b=this.data.id,Y=L.getValue(b,{value:this.data.fieldValue}),it=document.createElement("select");R.add(it),it.setAttribute("data-element-id",b),it.disabled=this.data.readOnly,this._setRequired(it,this.data.required),it.name=this.data.fieldName,it.tabIndex=C;let ct=this.data.combo&&this.data.options.length>0;this.data.combo||(it.size=this.data.options.length,this.data.multiSelect&&(it.multiple=!0)),it.addEventListener("resetform",Nt=>{const Yt=this.data.defaultFieldValue;for(const Ut of it.options)Ut.selected=Ut.value===Yt});for(const Nt of this.data.options){const Yt=document.createElement("option");Yt.textContent=Nt.displayValue,Yt.value=Nt.exportValue,Y.value.includes(Nt.exportValue)&&(Yt.setAttribute("selected",!0),ct=!1),it.append(Yt)}let wt=null;if(ct){const Nt=document.createElement("option");Nt.value=" ",Nt.setAttribute("hidden",!0),Nt.setAttribute("selected",!0),it.prepend(Nt),wt=()=>{Nt.remove(),it.removeEventListener("input",wt),wt=null},it.addEventListener("input",wt)}const bt=Nt=>{const Yt=Nt?"value":"textContent",{options:Ut,multiple:xt}=it;return xt?Array.prototype.filter.call(Ut,$t=>$t.selected).map($t=>$t[Yt]):Ut.selectedIndex===-1?null:Ut[Ut.selectedIndex][Yt]};let zt=bt(!1);const Gt=Nt=>{const Yt=Nt.target.options;return Array.prototype.map.call(Yt,Ut=>({displayValue:Ut.textContent,exportValue:Ut.value}))};return this.enableScripting&&this.hasJSActions?(it.addEventListener("updatefromsandbox",Nt=>{const Yt={value(Ut){wt==null||wt();const xt=Ut.detail.value,$t=new Set(Array.isArray(xt)?xt:[xt]);for(const Qt of it.options)Qt.selected=$t.has(Qt.value);L.setValue(b,{value:bt(!0)}),zt=bt(!1)},multipleSelection(Ut){it.multiple=!0},remove(Ut){const xt=it.options,$t=Ut.detail.remove;xt[$t].selected=!1,it.remove($t),xt.length>0&&Array.prototype.findIndex.call(xt,Qt=>Qt.selected)===-1&&(xt[0].selected=!0),L.setValue(b,{value:bt(!0),items:Gt(Ut)}),zt=bt(!1)},clear(Ut){for(;it.length!==0;)it.remove(0);L.setValue(b,{value:null,items:[]}),zt=bt(!1)},insert(Ut){const{index:xt,displayValue:$t,exportValue:Qt}=Ut.detail.insert,ue=it.children[xt],ce=document.createElement("option");ce.textContent=$t,ce.value=Qt,ue?ue.before(ce):it.append(ce),L.setValue(b,{value:bt(!0),items:Gt(Ut)}),zt=bt(!1)},items(Ut){const{items:xt}=Ut.detail;for(;it.length!==0;)it.remove(0);for(const $t of xt){const{displayValue:Qt,exportValue:ue}=$t,ce=document.createElement("option");ce.textContent=Qt,ce.value=ue,it.append(ce)}it.options.length>0&&(it.options[0].selected=!0),L.setValue(b,{value:bt(!0),items:Gt(Ut)}),zt=bt(!1)},indices(Ut){const xt=new Set(Ut.detail.indices);for(const $t of Ut.target.options)$t.selected=xt.has($t.index);L.setValue(b,{value:bt(!0)}),zt=bt(!1)},editable(Ut){Ut.target.disabled=!Ut.detail.editable}};this._dispatchEventFromSandbox(Yt,Nt)}),it.addEventListener("input",Nt=>{var Ut;const Yt=bt(!0);L.setValue(b,{value:Yt}),Nt.preventDefault(),(Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:zt,changeEx:Yt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(it,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Nt=>Nt.target.value)):it.addEventListener("input",function(Nt){L.setValue(b,{value:bt(!0)})}),this.data.combo&&this._setTextStyle(it),this._setBackgroundColor(it),this._setDefaultPropertiesFromJS(it),this.container.append(it),this.container}}class vt extends B{constructor(L){const{data:b,elements:Y}=L;super(L,{isRenderable:B._hasPopupData(b)}),this.elements=Y}render(){this.container.classList.add("popupAnnotation");const L=new Dt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),b=[];for(const Y of this.elements)Y.popup=L,b.push(Y.data.id),Y.addHighlightArea();return this.container.setAttribute("aria-controls",b.map(Y=>`${n.AnnotationPrefix}${Y}`).join(",")),this.container}}class Dt{constructor({container:L,color:b,elements:Y,titleObj:it,modificationDate:ct,contentsObj:wt,richText:bt,parent:zt,rect:Gt,parentRect:Nt,open:Yt}){h(this,yt);h(this,ut);h(this,S);h(this,nt);h(this,tt,y(this,yt,Nr).bind(this));h(this,s,y(this,nt,En).bind(this));h(this,i,y(this,S,wn).bind(this));h(this,l,y(this,ut,qi).bind(this));h(this,d,null);h(this,a,null);h(this,f,null);h(this,p,null);h(this,v,null);h(this,c,null);h(this,r,null);h(this,o,!1);h(this,E,null);h(this,U,null);h(this,G,null);h(this,rt,null);h(this,ot,!1);var Ut;T(this,a,L),T(this,rt,it),T(this,f,wt),T(this,G,bt),T(this,c,zt),T(this,d,b),T(this,U,Gt),T(this,r,Nt),T(this,v,Y),T(this,p,$.PDFDateString.toDateObject(ct)),this.trigger=Y.flatMap(xt=>xt.getElementsToTriggerPopup());for(const xt of this.trigger)xt.addEventListener("click",t(this,l)),xt.addEventListener("mouseenter",t(this,i)),xt.addEventListener("mouseleave",t(this,s)),xt.classList.add("popupTriggerArea");for(const xt of Y)(Ut=xt.container)==null||Ut.addEventListener("keydown",t(this,tt));t(this,a).hidden=!0,Yt&&y(this,ut,qi).call(this)}render(){if(t(this,E))return;const{page:{view:L},viewport:{rawDims:{pageWidth:b,pageHeight:Y,pageX:it,pageY:ct}}}=t(this,c),wt=T(this,E,document.createElement("div"));if(wt.className="popup",t(this,d)){const we=wt.style.outlineColor=n.Util.makeHexColor(...t(this,d));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?wt.style.backgroundColor=`color-mix(in srgb, ${we} 30%, white)`:wt.style.backgroundColor=n.Util.makeHexColor(...t(this,d).map(Me=>Math.floor(.7*(255-Me)+Me)))}const bt=document.createElement("span");bt.className="header";const zt=document.createElement("h1");if(bt.append(zt),{dir:zt.dir,str:zt.textContent}=t(this,rt),wt.append(bt),t(this,p)){const we=document.createElement("span");we.classList.add("popupDate"),we.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),we.setAttribute("data-l10n-args",JSON.stringify({date:t(this,p).toLocaleDateString(),time:t(this,p).toLocaleTimeString()})),bt.append(we)}const Gt=t(this,f),Nt=t(this,G);if(Nt!=null&&Nt.str&&(!(Gt!=null&&Gt.str)||Gt.str===Nt.str))M.XfaLayer.render({xfaHtml:Nt.html,intent:"richText",div:wt}),wt.lastChild.classList.add("richText","popupContent");else{const we=this._formatContents(Gt);wt.append(we)}let Yt=!!t(this,r),Ut=Yt?t(this,r):t(this,U);for(const we of t(this,v))if(!Ut||n.Util.intersect(we.data.rect,Ut)!==null){Ut=we.data.rect,Yt=!0;break}const xt=n.Util.normalizeRect([Ut[0],L[3]-Ut[1]+L[1],Ut[2],L[3]-Ut[3]+L[1]]),$t=Yt?Ut[2]-Ut[0]+5:0,Qt=xt[0]+$t,ue=xt[1],{style:ce}=t(this,a);ce.left=`${100*(Qt-it)/b}%`,ce.top=`${100*(ue-ct)/Y}%`,t(this,a).append(wt)}_formatContents({str:L,dir:b}){const Y=document.createElement("p");Y.classList.add("popupContent"),Y.dir=b;const it=L.split(/(?:\r\n?|\n)/);for(let ct=0,wt=it.length;ct<wt;++ct){const bt=it[ct];Y.append(document.createTextNode(bt)),ct<wt-1&&Y.append(document.createElement("br"))}return Y}forceHide(){T(this,ot,this.isVisible),t(this,ot)&&(t(this,a).hidden=!0)}maybeShow(){t(this,ot)&&(T(this,ot,!1),t(this,a).hidden=!1)}get isVisible(){return t(this,a).hidden===!1}}tt=new WeakMap,s=new WeakMap,i=new WeakMap,l=new WeakMap,d=new WeakMap,a=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,c=new WeakMap,r=new WeakMap,o=new WeakMap,E=new WeakMap,U=new WeakMap,G=new WeakMap,rt=new WeakMap,ot=new WeakMap,yt=new WeakSet,Nr=function(L){L.altKey||L.shiftKey||L.ctrlKey||L.metaKey||(L.key==="Enter"||L.key==="Escape"&&t(this,o))&&y(this,ut,qi).call(this)},ut=new WeakSet,qi=function(){T(this,o,!t(this,o)),t(this,o)?(y(this,S,wn).call(this),t(this,a).addEventListener("click",t(this,l)),t(this,a).addEventListener("keydown",t(this,tt))):(y(this,nt,En).call(this),t(this,a).removeEventListener("click",t(this,l)),t(this,a).removeEventListener("keydown",t(this,tt)))},S=new WeakSet,wn=function(){t(this,E)||this.render(),this.isVisible?t(this,o)&&t(this,a).classList.add("focused"):(t(this,a).hidden=!1,t(this,a).style.zIndex=parseInt(t(this,a).style.zIndex)+1e3)},nt=new WeakSet,En=function(){t(this,a).classList.remove("focused"),!(t(this,o)||!this.isVisible)&&(t(this,a).hidden=!0,t(this,a).style.zIndex=parseInt(t(this,a).style.zIndex)-1e3)};class Tt extends B{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0}),this.textContent=L.data.textContent,this.textPosition=L.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const L=document.createElement("div");L.classList.add("annotationTextContent"),L.setAttribute("role","comment");for(const b of this.textContent){const Y=document.createElement("span");Y.textContent=b,L.append(Y)}this.container.append(L)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Ot extends B{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0});h(this,u,null)}render(){this.container.classList.add("lineAnnotation");const b=this.data,{width:Y,height:it}=w(b.rect),ct=this.svgFactory.create(Y,it,!0),wt=T(this,u,this.svgFactory.createElement("svg:line"));return wt.setAttribute("x1",b.rect[2]-b.lineCoordinates[0]),wt.setAttribute("y1",b.rect[3]-b.lineCoordinates[1]),wt.setAttribute("x2",b.rect[2]-b.lineCoordinates[2]),wt.setAttribute("y2",b.rect[3]-b.lineCoordinates[3]),wt.setAttribute("stroke-width",b.borderStyle.width||1),wt.setAttribute("stroke","transparent"),wt.setAttribute("fill","transparent"),ct.append(wt),this.container.append(ct),!b.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,u)}addHighlightArea(){this.container.classList.add("highlightArea")}}u=new WeakMap;class _t extends B{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0});h(this,q,null)}render(){this.container.classList.add("squareAnnotation");const b=this.data,{width:Y,height:it}=w(b.rect),ct=this.svgFactory.create(Y,it,!0),wt=b.borderStyle.width,bt=T(this,q,this.svgFactory.createElement("svg:rect"));return bt.setAttribute("x",wt/2),bt.setAttribute("y",wt/2),bt.setAttribute("width",Y-wt),bt.setAttribute("height",it-wt),bt.setAttribute("stroke-width",wt||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),ct.append(bt),this.container.append(ct),!b.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,q)}addHighlightArea(){this.container.classList.add("highlightArea")}}q=new WeakMap;class Mt extends B{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0});h(this,z,null)}render(){this.container.classList.add("circleAnnotation");const b=this.data,{width:Y,height:it}=w(b.rect),ct=this.svgFactory.create(Y,it,!0),wt=b.borderStyle.width,bt=T(this,z,this.svgFactory.createElement("svg:ellipse"));return bt.setAttribute("cx",Y/2),bt.setAttribute("cy",it/2),bt.setAttribute("rx",Y/2-wt/2),bt.setAttribute("ry",it/2-wt/2),bt.setAttribute("stroke-width",wt||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),ct.append(bt),this.container.append(ct),!b.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,z)}addHighlightArea(){this.container.classList.add("highlightArea")}}z=new WeakMap;class Pt extends B{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0});h(this,lt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const b=this.data,{width:Y,height:it}=w(b.rect),ct=this.svgFactory.create(Y,it,!0);let wt=[];for(const zt of b.vertices){const Gt=zt.x-b.rect[0],Nt=b.rect[3]-zt.y;wt.push(Gt+","+Nt)}wt=wt.join(" ");const bt=T(this,lt,this.svgFactory.createElement(this.svgElementName));return bt.setAttribute("points",wt),bt.setAttribute("stroke-width",b.borderStyle.width||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),ct.append(bt),this.container.append(ct),!b.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}lt=new WeakMap;class Et extends Pt{constructor(L){super(L),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Q extends B{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class gt extends B{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0});h(this,ft,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const b=this.data,{width:Y,height:it}=w(b.rect),ct=this.svgFactory.create(Y,it,!0);for(const wt of b.inkLists){let bt=[];for(const Gt of wt){const Nt=Gt.x-b.rect[0],Yt=b.rect[3]-Gt.y;bt.push(`${Nt},${Yt}`)}bt=bt.join(" ");const zt=this.svgFactory.createElement(this.svgElementName);t(this,ft).push(zt),zt.setAttribute("points",bt),zt.setAttribute("stroke-width",b.borderStyle.width||1),zt.setAttribute("stroke","transparent"),zt.setAttribute("fill","transparent"),!b.popupRef&&this.hasPopupData&&this._createPopup(),ct.append(zt)}return this.container.append(ct),this.container}getElementsToTriggerPopup(){return t(this,ft)}addHighlightArea(){this.container.classList.add("highlightArea")}}ft=new WeakMap;class kt extends B{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Rt extends B{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class qt extends B{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Kt extends B{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ie extends B{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class xe extends B{constructor(b){var ct;super(b,{isRenderable:!0});h(this,Ft);h(this,Ct,null);const{filename:Y,content:it}=this.data.file;this.filename=(0,$.getFilenameFromUrl)(Y,!0),this.content=it,(ct=this.linkService.eventBus)==null||ct.dispatch("fileattachmentannotation",{source:this,filename:Y,content:it})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:b,data:Y}=this;let it;Y.hasAppearance||Y.fillAlpha===0?it=document.createElement("div"):(it=document.createElement("img"),it.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Y.name)?"paperclip":"pushpin"}.svg`,Y.fillAlpha&&Y.fillAlpha<1&&(it.style=`filter: opacity(${Math.round(Y.fillAlpha*100)}%);`)),it.addEventListener("dblclick",y(this,Ft,Sn).bind(this)),T(this,Ct,it);const{isMac:ct}=n.FeatureTest.platform;return b.addEventListener("keydown",wt=>{wt.key==="Enter"&&(ct?wt.metaKey:wt.ctrlKey)&&y(this,Ft,Sn).call(this)}),!Y.popupRef&&this.hasPopupData?this._createPopup():it.classList.add("popupTriggerArea"),b.append(it),b}getElementsToTriggerPopup(){return t(this,Ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ct=new WeakMap,Ft=new WeakSet,Sn=function(){var b;(b=this.downloadManager)==null||b.openOrDownloadData(this.content,this.filename)};class de{constructor({div:L,accessibilityManager:b,annotationCanvasMap:Y,page:it,viewport:ct}){h(this,_e);h(this,fe);h(this,re,null);h(this,he,null);h(this,Ce,new Map);this.div=L,T(this,re,b),T(this,he,Y),this.page=it,this.viewport=ct,this.zIndex=0}async render(L){const{annotations:b}=L,Y=this.div;(0,$.setLayerDimensions)(Y,this.viewport);const it=new Map,ct={data:null,layer:Y,linkService:L.linkService,downloadManager:L.downloadManager,imageResourcesPath:L.imageResourcesPath||"",renderForms:L.renderForms!==!1,svgFactory:new $.DOMSVGFactory,annotationStorage:L.annotationStorage||new A.AnnotationStorage,enableScripting:L.enableScripting===!0,hasJSActions:L.hasJSActions,fieldObjects:L.fieldObjects,parent:this,elements:null};for(const wt of b){if(wt.noHTML)continue;const bt=wt.annotationType===n.AnnotationType.POPUP;if(bt){const Nt=it.get(wt.id);if(!Nt)continue;ct.elements=Nt}else{const{width:Nt,height:Yt}=w(wt.rect);if(Nt<=0||Yt<=0)continue}ct.data=wt;const zt=N.create(ct);if(!zt.isRenderable)continue;if(!bt&&wt.popupRef){const Nt=it.get(wt.popupRef);Nt?Nt.push(zt):it.set(wt.popupRef,[zt])}zt.annotationEditorType>0&&t(this,Ce).set(zt.data.id,zt);const Gt=zt.render();wt.hidden&&(Gt.style.visibility="hidden"),y(this,_e,Or).call(this,Gt,wt.id)}y(this,fe,xn).call(this)}update({viewport:L}){const b=this.div;this.viewport=L,(0,$.setLayerDimensions)(b,{rotation:L.rotation}),y(this,fe,xn).call(this),b.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Ce).values())}getEditableAnnotation(L){return t(this,Ce).get(L)}}re=new WeakMap,he=new WeakMap,Ce=new WeakMap,_e=new WeakSet,Or=function(L,b){var it;const Y=L.firstChild||L;Y.id=`${n.AnnotationPrefix}${b}`,this.div.append(L),(it=t(this,re))==null||it.moveElementInDOM(this.div,L,Y,!1)},fe=new WeakSet,xn=function(){if(!t(this,he))return;const L=this.div;for(const[b,Y]of t(this,he)){const it=L.querySelector(`[data-annotation-id="${b}"]`);if(!it)continue;const{firstChild:ct}=it;ct?ct.nodeName==="CANVAS"?ct.replaceWith(Y):ct.before(Y):it.append(Y)}t(this,he).clear()}},792:(g,H,m)=>{var M,C,W,Hr,w;m.d(H,{AnnotationStorage:()=>st,PrintAnnotationStorage:()=>O,SerializableEmpty:()=>D});var n=m(292),$=m(310),A=m(651);const D=Object.freeze({map:null,hash:"",transfer:void 0});class st{constructor(){h(this,W);h(this,M,!1);h(this,C,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(B,K){const at=t(this,C).get(B);return at===void 0?K:Object.assign(K,at)}getRawValue(B){return t(this,C).get(B)}remove(B){if(t(this,C).delete(B),t(this,C).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const K of t(this,C).values())if(K instanceof $.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(B,K){const at=t(this,C).get(B);let J=!1;if(at!==void 0)for(const[x,V]of Object.entries(K))at[x]!==V&&(J=!0,at[x]=V);else J=!0,t(this,C).set(B,K);J&&y(this,W,Hr).call(this),K instanceof $.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(K.constructor._type)}has(B){return t(this,C).has(B)}getAll(){return t(this,C).size>0?(0,n.objectFromMap)(t(this,C)):null}setAll(B){for(const[K,at]of Object.entries(B))this.setValue(K,at)}get size(){return t(this,C).size}resetModified(){t(this,M)&&(T(this,M,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new O(this)}get serializable(){if(t(this,C).size===0)return D;const B=new Map,K=new A.MurmurHash3_64,at=[],J=Object.create(null);let x=!1;for(const[V,F]of t(this,C)){const P=F instanceof $.AnnotationEditor?F.serialize(!1,J):F;P&&(B.set(V,P),K.update(`${V}:${JSON.stringify(P)}`),x||(x=!!P.bitmap))}if(x)for(const V of B.values())V.bitmap&&at.push(V.bitmap);return B.size>0?{map:B,hash:K.hexdigest(),transfer:at}:D}get editorStats(){let B=null;const K=new Map;for(const at of t(this,C).values()){if(!(at instanceof $.AnnotationEditor))continue;const J=at.telemetryFinalData;if(!J)continue;const{type:x}=J;K.has(x)||K.set(x,Object.getPrototypeOf(at).constructor),B||(B=Object.create(null));const V=B[x]||(B[x]=new Map);for(const[F,P]of Object.entries(J)){if(F==="type")continue;let j=V.get(F);j||(j=new Map,V.set(F,j));const Z=j.get(P)??0;j.set(P,Z+1)}}for(const[at,J]of K)B[at]=J.computeTelemetryFinalData(B[at]);return B}}M=new WeakMap,C=new WeakMap,W=new WeakSet,Hr=function(){t(this,M)||(T(this,M,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class O extends st{constructor(K){super();h(this,w,void 0);const{map:at,hash:J,transfer:x}=K.serializable,V=structuredClone(at,x?{transfer:x}:null);T(this,w,{map:V,hash:J,transfer:x})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,w)}}w=new WeakMap},831:(g,H,m)=>{m.a(g,async(n,$)=>{var P,j,Z,vt,Ks,Tt,zi,_t,Mt,Pt,Et,Q,Xi,kt,Rt,qt,Kt,ie,vi,de,le,Tn,Vt,ae;try{let Te=function(I){if(typeof I=="string"||I instanceof URL?I={url:I}:(I instanceof ArrayBuffer||ArrayBuffer.isView(I))&&(I={data:I}),typeof I!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!I.url&&!I.data&&!I.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const u=new p,{docId:q}=u,z=I.url?ee(I.url):null,lt=I.data?Ee(I.data):null,ft=I.httpHeaders||null,Ct=I.withCredentials===!0,Ft=I.password??null,te=I.range instanceof v?I.range:null,re=Number.isInteger(I.rangeChunkSize)&&I.rangeChunkSize>0?I.rangeChunkSize:ne;let he=I.worker instanceof U?I.worker:null;const Ce=I.verbosity,_e=typeof I.docBaseUrl=="string"&&!(0,st.isDataScheme)(I.docBaseUrl)?I.docBaseUrl:null,De=typeof I.cMapUrl=="string"?I.cMapUrl:null,fe=I.cMapPacked!==!1,Pe=I.CMapReaderFactory||l,se=typeof I.standardFontDataUrl=="string"?I.standardFontDataUrl:null,L=I.StandardFontDataFactory||a,b=I.stopAtErrors!==!0,Y=Number.isInteger(I.maxImageSize)&&I.maxImageSize>-1?I.maxImageSize:-1,it=I.isEvalSupported!==!1,ct=typeof I.isOffscreenCanvasSupported=="boolean"?I.isOffscreenCanvasSupported:!A.isNodeJS,wt=Number.isInteger(I.canvasMaxAreaInBytes)?I.canvasMaxAreaInBytes:-1,bt=typeof I.disableFontFace=="boolean"?I.disableFontFace:A.isNodeJS,zt=I.fontExtraProperties===!0,Gt=I.enableXfa===!0,Nt=I.ownerDocument||globalThis.document,Yt=I.disableRange===!0,Ut=I.disableStream===!0,xt=I.disableAutoFetch===!0,$t=I.pdfBug===!0,Qt=te?te.length:I.length??NaN,ue=typeof I.useSystemFonts=="boolean"?I.useSystemFonts:!A.isNodeJS&&!bt,ce=typeof I.useWorkerFetch=="boolean"?I.useWorkerFetch:Pe===st.DOMCMapReaderFactory&&L===st.DOMStandardFontDataFactory&&De&&se&&(0,st.isValidFetchUrl)(De,document.baseURI)&&(0,st.isValidFetchUrl)(se,document.baseURI),we=I.canvasFactory||new i({ownerDocument:Nt}),Me=I.filterFactory||new d({docId:q,ownerDocument:Nt}),Qe=null;(0,A.setVerbosityLevel)(Ce);const Xe={canvasFactory:we,filterFactory:Me};if(ce||(Xe.cMapReaderFactory=new Pe({baseUrl:De,isCompressed:fe}),Xe.standardFontDataFactory=new L({baseUrl:se})),!he){const Ve={verbosity:Ce,port:R.GlobalWorkerOptions.workerPort};he=Ve.port?U.fromPort(Ve):new U(Ve),u._worker=he}const We={docId:q,apiVersion:"4.1.392",data:lt,password:Ft,disableAutoFetch:xt,rangeChunkSize:re,length:Qt,docBaseUrl:_e,enableXfa:Gt,evaluatorOptions:{maxImageSize:Y,disableFontFace:bt,ignoreErrors:b,isEvalSupported:it,isOffscreenCanvasSupported:ct,canvasMaxAreaInBytes:wt,fontExtraProperties:zt,useSystemFonts:ue,cMapUrl:ce?De:null,standardFontDataUrl:ce?se:null}},ss={ignoreErrors:b,isEvalSupported:it,disableFontFace:bt,fontExtraProperties:zt,enableXfa:Gt,ownerDocument:Nt,disableAutoFetch:xt,pdfBug:$t,styleElement:Qe};return he.promise.then(function(){if(u.destroyed)throw new Error("Loading aborted");const Ve=f(he,We),k=new Promise(function(dt){let Ht;te?Ht=new K.PDFDataTransportStream(te,{disableRange:Yt,disableStream:Ut}):lt||(Ht=(Bt=>A.isNodeJS?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&(0,st.isValidFetchUrl)(Bt.url)?new at.PDFFetchStream(Bt):new x.PDFNodeStream(Bt):(0,st.isValidFetchUrl)(Bt.url)?new at.PDFFetchStream(Bt):new J.PDFNetworkStream(Bt))({url:z,length:Qt,httpHeaders:ft,withCredentials:Ct,rangeChunkSize:re,disableRange:Yt,disableStream:Ut})),dt(Ht)});return Promise.all([Ve,k]).then(function([dt,Ht]){if(u.destroyed)throw new Error("Loading aborted");const Bt=new w.MessageHandler(q,dt,he.port),Jt=new G(Bt,u,Ht,ss,Xe);u._transport=Jt,Bt.send("Ready",null)})}).catch(u._capability.reject),u},ee=function(I){if(I instanceof URL)return I.href;try{return new URL(I,window.location).href}catch{if(A.isNodeJS&&typeof I=="string")return I}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},Ee=function(I){if(A.isNodeJS&&typeof Buffer<"u"&&I instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(I instanceof Uint8Array&&I.byteLength===I.buffer.byteLength)return I;if(typeof I=="string")return(0,A.stringToBytes)(I);if(I instanceof ArrayBuffer||ArrayBuffer.isView(I)||typeof I=="object"&&!isNaN(I==null?void 0:I.length))return new Uint8Array(I);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};m.d(H,{PDFDataRangeTransport:()=>v,PDFWorker:()=>U,build:()=>St,getDocument:()=>Te,version:()=>ut});var A=m(292),D=m(792),st=m(419),O=m(10),M=m(573),C=m(923),W=m(814),R=m(164),w=m(178),N=m(62),B=m(626),K=m(585),at=m(94),J=m(457),x=m(786),V=m(50),F=n([M,x]);[M,x]=F.then?(await F)():F;const ne=65536,tt=100,s=5e3,i=A.isNodeJS?M.NodeCanvasFactory:st.DOMCanvasFactory,l=A.isNodeJS?M.NodeCMapReaderFactory:st.DOMCMapReaderFactory,d=A.isNodeJS?M.NodeFilterFactory:st.DOMFilterFactory,a=A.isNodeJS?M.NodeStandardFontDataFactory:st.DOMStandardFontDataFactory;async function f(I,u){if(I.destroyed)throw new Error("Worker was destroyed");const q=await I.messageHandler.sendWithPromise("GetDocRequest",u,u.data?[u.data.buffer]:null);if(I.destroyed)throw new Error("Worker was destroyed");return q}const S=class S{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${fs(S,P)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var u,q,z;this.destroyed=!0;try{(u=this._worker)!=null&&u.port&&(this._worker._pendingDestroy=!0),await((q=this._transport)==null?void 0:q.destroy())}catch(lt){throw(z=this._worker)!=null&&z.port&&delete this._worker._pendingDestroy,lt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};P=new WeakMap,h(S,P,0);let p=S;class v{constructor(u,q,z=!1,lt=null){this.length=u,this.initialData=q,this.progressiveDone=z,this.contentDispositionFilename=lt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(u){this._rangeListeners.push(u)}addProgressListener(u){this._progressListeners.push(u)}addProgressiveReadListener(u){this._progressiveReadListeners.push(u)}addProgressiveDoneListener(u){this._progressiveDoneListeners.push(u)}onDataRange(u,q){for(const z of this._rangeListeners)z(u,q)}onDataProgress(u,q){this._readyCapability.promise.then(()=>{for(const z of this._progressListeners)z(u,q)})}onDataProgressiveRead(u){this._readyCapability.promise.then(()=>{for(const q of this._progressiveReadListeners)q(u)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const u of this._progressiveDoneListeners)u()})}transportReady(){this._readyCapability.resolve()}requestDataRange(u,q){(0,A.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class c{constructor(u,q){this._pdfInfo=u,this._transport=q}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(u){return this._transport.getPage(u)}getPageIndex(u){return this._transport.getPageIndex(u)}getDestinations(){return this._transport.getDestinations()}getDestination(u){return this._transport.getDestination(u)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:u="display"}={}){const{renderingIntent:q}=this._transport.getRenderingIntent(u);return this._transport.getOptionalContentConfig(q)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(u=!1){return this._transport.startCleanup(u||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class r{constructor(u,q,z,lt=!1){h(this,vt);h(this,Tt);h(this,j,null);h(this,Z,!1);this._pageIndex=u,this._pageInfo=q,this._transport=z,this._stats=lt?new st.StatTimer:null,this._pdfBug=lt,this.commonObjs=z.commonObjs,this.objs=new ot,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:u,rotation:q=this.rotate,offsetX:z=0,offsetY:lt=0,dontFlip:ft=!1}={}){return new st.PageViewport({viewBox:this.view,scale:u,rotation:q,offsetX:z,offsetY:lt,dontFlip:ft})}getAnnotations({intent:u="display"}={}){const{renderingIntent:q}=this._transport.getRenderingIntent(u);return this._transport.getAnnotations(this._pageIndex,q)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,A.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var u;return((u=this._transport._htmlForXfa)==null?void 0:u.children[this._pageIndex])||null}render({canvasContext:u,viewport:q,intent:z="display",annotationMode:lt=A.AnnotationMode.ENABLE,transform:ft=null,background:Ct=null,optionalContentConfigPromise:Ft=null,annotationCanvasMap:te=null,pageColors:re=null,printAnnotationStorage:he=null}){var Y,it;(Y=this._stats)==null||Y.time("Overall");const Ce=this._transport.getRenderingIntent(z,lt,he),{renderingIntent:_e,cacheKey:De}=Ce;T(this,Z,!1),y(this,Tt,zi).call(this),Ft||(Ft=this._transport.getOptionalContentConfig(_e));let fe=this._intentStates.get(De);fe||(fe=Object.create(null),this._intentStates.set(De,fe)),fe.streamReaderCancelTimeout&&(clearTimeout(fe.streamReaderCancelTimeout),fe.streamReaderCancelTimeout=null);const Pe=!!(_e&A.RenderingIntentFlag.PRINT);fe.displayReadyCapability||(fe.displayReadyCapability=Promise.withResolvers(),fe.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(it=this._stats)==null||it.time("Page Request"),this._pumpOperatorList(Ce));const se=ct=>{var wt,bt;fe.renderTasks.delete(L),(this._maybeCleanupAfterRender||Pe)&&T(this,Z,!0),y(this,vt,Ks).call(this,!Pe),ct?(L.capability.reject(ct),this._abortOperatorList({intentState:fe,reason:ct instanceof Error?ct:new Error(ct)})):L.capability.resolve(),(wt=this._stats)==null||wt.timeEnd("Rendering"),(bt=this._stats)==null||bt.timeEnd("Overall")},L=new At({callback:se,params:{canvasContext:u,viewport:q,transform:ft,background:Ct},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:te,operatorList:fe.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Pe,pdfBug:this._pdfBug,pageColors:re});(fe.renderTasks||(fe.renderTasks=new Set)).add(L);const b=L.task;return Promise.all([fe.displayReadyCapability.promise,Ft]).then(([ct,wt])=>{var bt;if(this.destroyed){se();return}if((bt=this._stats)==null||bt.time("Rendering"),!(wt.renderingIntent&_e))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:ct,optionalContentConfig:wt}),L.operatorListChanged()}).catch(se),b}getOperatorList({intent:u="display",annotationMode:q=A.AnnotationMode.ENABLE,printAnnotationStorage:z=null}={}){var te;function lt(){Ct.operatorList.lastChunk&&(Ct.opListReadCapability.resolve(Ct.operatorList),Ct.renderTasks.delete(Ft))}const ft=this._transport.getRenderingIntent(u,q,z,!0);let Ct=this._intentStates.get(ft.cacheKey);Ct||(Ct=Object.create(null),this._intentStates.set(ft.cacheKey,Ct));let Ft;return Ct.opListReadCapability||(Ft=Object.create(null),Ft.operatorListChanged=lt,Ct.opListReadCapability=Promise.withResolvers(),(Ct.renderTasks||(Ct.renderTasks=new Set)).add(Ft),Ct.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(te=this._stats)==null||te.time("Page Request"),this._pumpOperatorList(ft)),Ct.opListReadCapability.promise}streamTextContent({includeMarkedContent:u=!1,disableNormalization:q=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:u===!0,disableNormalization:q===!0},{highWaterMark:100,size(z){return z.items.length}})}getTextContent(u={}){if(this._transport._htmlForXfa)return this.getXfa().then(z=>V.XfaText.textContent(z));const q=this.streamTextContent(u);return new Promise(function(z,lt){function ft(){Ct.read().then(function({value:te,done:re}){if(re){z(Ft);return}Object.assign(Ft.styles,te.styles),Ft.items.push(...te.items),ft()},lt)}const Ct=q.getReader(),Ft={items:[],styles:Object.create(null)};ft()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const u=[];for(const q of this._intentStates.values())if(this._abortOperatorList({intentState:q,reason:new Error("Page was destroyed."),force:!0}),!q.opListReadCapability)for(const z of q.renderTasks)u.push(z.completed),z.cancel();return this.objs.clear(),T(this,Z,!1),y(this,Tt,zi).call(this),Promise.all(u)}cleanup(u=!1){T(this,Z,!0);const q=y(this,vt,Ks).call(this,!1);return u&&q&&this._stats&&(this._stats=new st.StatTimer),q}_startRenderPage(u,q){var lt,ft;const z=this._intentStates.get(q);z&&((lt=this._stats)==null||lt.timeEnd("Page Request"),(ft=z.displayReadyCapability)==null||ft.resolve(u))}_renderPageChunk(u,q){for(let z=0,lt=u.length;z<lt;z++)q.operatorList.fnArray.push(u.fnArray[z]),q.operatorList.argsArray.push(u.argsArray[z]);q.operatorList.lastChunk=u.lastChunk,q.operatorList.separateAnnots=u.separateAnnots;for(const z of q.renderTasks)z.operatorListChanged();u.lastChunk&&y(this,vt,Ks).call(this,!0)}_pumpOperatorList({renderingIntent:u,cacheKey:q,annotationStorageSerializable:z}){const{map:lt,transfer:ft}=z,Ct=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:u,cacheKey:q,annotationStorage:lt},ft).getReader(),Ft=this._intentStates.get(q);Ft.streamReader=Ct;const te=()=>{Ct.read().then(({value:re,done:he})=>{if(he){Ft.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(re,Ft),te())},re=>{if(Ft.streamReader=null,!this._transport.destroyed){if(Ft.operatorList){Ft.operatorList.lastChunk=!0;for(const he of Ft.renderTasks)he.operatorListChanged();y(this,vt,Ks).call(this,!0)}if(Ft.displayReadyCapability)Ft.displayReadyCapability.reject(re);else if(Ft.opListReadCapability)Ft.opListReadCapability.reject(re);else throw re}})};te()}_abortOperatorList({intentState:u,reason:q,force:z=!1}){if(u.streamReader){if(u.streamReaderCancelTimeout&&(clearTimeout(u.streamReaderCancelTimeout),u.streamReaderCancelTimeout=null),!z){if(u.renderTasks.size>0)return;if(q instanceof st.RenderingCancelledException){let lt=tt;q.extraDelay>0&&q.extraDelay<1e3&&(lt+=q.extraDelay),u.streamReaderCancelTimeout=setTimeout(()=>{u.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:u,reason:q,force:!0})},lt);return}}if(u.streamReader.cancel(new A.AbortException(q.message)).catch(()=>{}),u.streamReader=null,!this._transport.destroyed){for(const[lt,ft]of this._intentStates)if(ft===u){this._intentStates.delete(lt);break}this.cleanup()}}}get stats(){return this._stats}}j=new WeakMap,Z=new WeakMap,vt=new WeakSet,Ks=function(u=!1){if(y(this,Tt,zi).call(this),!t(this,Z)||this.destroyed)return!1;if(u)return T(this,j,setTimeout(()=>{T(this,j,null),y(this,vt,Ks).call(this,!1)},s)),!1;for(const{renderTasks:q,operatorList:z}of this._intentStates.values())if(q.size>0||!z.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Z,!1),!0},Tt=new WeakSet,zi=function(){t(this,j)&&(clearTimeout(t(this,j)),T(this,j,null))};class o{constructor(){h(this,_t,new Set);h(this,Mt,Promise.resolve())}postMessage(u,q){const z={data:structuredClone(u,q?{transfer:q}:null)};t(this,Mt).then(()=>{for(const lt of t(this,_t))lt.call(this,z)})}addEventListener(u,q){t(this,_t).add(q)}removeEventListener(u,q){t(this,_t).delete(q)}terminate(){t(this,_t).clear()}}_t=new WeakMap,Mt=new WeakMap;const E={isWorkerDisabled:!1,fakeWorkerId:0};A.isNodeJS&&(E.isWorkerDisabled=!0,(Pt=R.GlobalWorkerOptions).workerSrc||(Pt.workerSrc="./pdf.worker.mjs")),E.isSameOrigin=function(I,u){let q;try{if(q=new URL(I),!q.origin||q.origin==="null")return!1}catch{return!1}const z=new URL(u,q);return q.origin===z.origin},E.createCDNWrapper=function(I){const u=`await import("${I}");`;return URL.createObjectURL(new Blob([u],{type:"text/javascript"}))};const X=class X{constructor({name:u=null,port:q=null,verbosity:z=(0,A.getVerbosityLevel)()}={}){var lt;if(this.name=u,this.destroyed=!1,this.verbosity=z,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,q){if((lt=t(X,Et))!=null&&lt.has(q))throw new Error("Cannot use more than one PDFWorker per port.");(t(X,Et)||T(X,Et,new WeakMap)).set(q,this),this._initializeFromPort(q);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(u){this._port=u,this._messageHandler=new w.MessageHandler("main","worker",u),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!E.isWorkerDisabled&&!t(X,Q,Xi)){let{workerSrc:u}=X;try{E.isSameOrigin(window.location.href,u)||(u=E.createCDNWrapper(new URL(u,window.location).href));const q=new Worker(u,{type:"module"}),z=new w.MessageHandler("main","worker",q),lt=()=>{q.removeEventListener("error",ft),z.destroy(),q.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ft=()=>{this._webWorker||lt()};q.addEventListener("error",ft),z.on("test",Ft=>{if(q.removeEventListener("error",ft),this.destroyed){lt();return}Ft?(this._messageHandler=z,this._port=q,this._webWorker=q,this._readyCapability.resolve(),z.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),z.destroy(),q.terminate())}),z.on("ready",Ft=>{if(q.removeEventListener("error",ft),this.destroyed){lt();return}try{Ct()}catch{this._setupFakeWorker()}});const Ct=()=>{const Ft=new Uint8Array;z.send("test",Ft,[Ft.buffer])};Ct();return}catch{(0,A.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){E.isWorkerDisabled||((0,A.warn)("Setting up fake worker."),E.isWorkerDisabled=!0),X._setupFakeWorkerGlobal.then(u=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const q=new o;this._port=q;const z=`fake${E.fakeWorkerId++}`,lt=new w.MessageHandler(z+"_worker",z,q);u.setup(lt,q);const ft=new w.MessageHandler(z,z+"_worker",q);this._messageHandler=ft,this._readyCapability.resolve(),ft.send("configure",{verbosity:this.verbosity})}).catch(u=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${u.message}".`))})}destroy(){var u;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(u=t(X,Et))==null||u.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(u){var z;if(!(u!=null&&u.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const q=(z=t(this,Et))==null?void 0:z.get(u.port);if(q){if(q._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return q}return new X(u)}static get workerSrc(){if(R.GlobalWorkerOptions.workerSrc)return R.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){const u=async()=>t(this,Q,Xi)?t(this,Q,Xi):(await ms(()=>import(this.workerSrc).then(async q=>(await q.__tla,q)),[])).WorkerMessageHandler;return(0,A.shadow)(this,"_setupFakeWorkerGlobal",u())}};Et=new WeakMap,Q=new WeakSet,Xi=function(){var u;try{return((u=globalThis.pdfjsWorker)==null?void 0:u.WorkerMessageHandler)||null}catch{return null}},h(X,Q),h(X,Et,void 0);let U=X;class G{constructor(u,q,z,lt,ft){h(this,ie);h(this,kt,new Map);h(this,Rt,new Map);h(this,qt,new Map);h(this,Kt,null);this.messageHandler=u,this.loadingTask=q,this.commonObjs=new ot,this.fontLoader=new O.FontLoader({ownerDocument:lt.ownerDocument,styleElement:lt.styleElement}),this._params=lt,this.canvasFactory=ft.canvasFactory,this.filterFactory=ft.filterFactory,this.cMapReaderFactory=ft.cMapReaderFactory,this.standardFontDataFactory=ft.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=z,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return(0,A.shadow)(this,"annotationStorage",new D.AnnotationStorage)}getRenderingIntent(u,q=A.AnnotationMode.ENABLE,z=null,lt=!1){let ft=A.RenderingIntentFlag.DISPLAY,Ct=D.SerializableEmpty;switch(u){case"any":ft=A.RenderingIntentFlag.ANY;break;case"display":break;case"print":ft=A.RenderingIntentFlag.PRINT;break;default:(0,A.warn)(`getRenderingIntent - invalid intent: ${u}`)}switch(q){case A.AnnotationMode.DISABLE:ft+=A.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case A.AnnotationMode.ENABLE:break;case A.AnnotationMode.ENABLE_FORMS:ft+=A.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case A.AnnotationMode.ENABLE_STORAGE:ft+=A.RenderingIntentFlag.ANNOTATIONS_STORAGE,Ct=(ft&A.RenderingIntentFlag.PRINT&&z instanceof D.PrintAnnotationStorage?z:this.annotationStorage).serializable;break;default:(0,A.warn)(`getRenderingIntent - invalid annotationMode: ${q}`)}return lt&&(ft+=A.RenderingIntentFlag.OPLIST),{renderingIntent:ft,cacheKey:`${ft}_${Ct.hash}`,annotationStorageSerializable:Ct}}destroy(){var z;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(z=t(this,Kt))==null||z.reject(new Error("Worker was destroyed during onPassword callback"));const u=[];for(const lt of t(this,Rt).values())u.push(lt._destroy());t(this,Rt).clear(),t(this,qt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const q=this.messageHandler.sendWithPromise("Terminate",null);return u.push(q),Promise.all(u).then(()=>{var lt;this.commonObjs.clear(),this.fontLoader.clear(),t(this,kt).clear(),this.filterFactory.destroy(),(0,W.cleanupTextLayer)(),(lt=this._networkStream)==null||lt.cancelAllRequests(new A.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:u,loadingTask:q}=this;u.on("GetReader",(z,lt)=>{(0,A.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ft=>{this._lastProgress={loaded:ft.loaded,total:ft.total}},lt.onPull=()=>{this._fullReader.read().then(function({value:ft,done:Ct}){if(Ct){lt.close();return}(0,A.assert)(ft instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),lt.enqueue(new Uint8Array(ft),1,[ft])}).catch(ft=>{lt.error(ft)})},lt.onCancel=ft=>{this._fullReader.cancel(ft),lt.ready.catch(Ct=>{if(!this.destroyed)throw Ct})}}),u.on("ReaderHeadersReady",z=>{const lt=Promise.withResolvers(),ft=this._fullReader;return ft.headersReady.then(()=>{var Ct;(!ft.isStreamingSupported||!ft.isRangeSupported)&&(this._lastProgress&&((Ct=q.onProgress)==null||Ct.call(q,this._lastProgress)),ft.onProgress=Ft=>{var te;(te=q.onProgress)==null||te.call(q,{loaded:Ft.loaded,total:Ft.total})}),lt.resolve({isStreamingSupported:ft.isStreamingSupported,isRangeSupported:ft.isRangeSupported,contentLength:ft.contentLength})},lt.reject),lt.promise}),u.on("GetRangeReader",(z,lt)=>{(0,A.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ft=this._networkStream.getRangeReader(z.begin,z.end);if(!ft){lt.close();return}lt.onPull=()=>{ft.read().then(function({value:Ct,done:Ft}){if(Ft){lt.close();return}(0,A.assert)(Ct instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),lt.enqueue(new Uint8Array(Ct),1,[Ct])}).catch(Ct=>{lt.error(Ct)})},lt.onCancel=Ct=>{ft.cancel(Ct),lt.ready.catch(Ft=>{if(!this.destroyed)throw Ft})}}),u.on("GetDoc",({pdfInfo:z})=>{this._numPages=z.numPages,this._htmlForXfa=z.htmlForXfa,delete z.htmlForXfa,q._capability.resolve(new c(z,this))}),u.on("DocException",function(z){let lt;switch(z.name){case"PasswordException":lt=new A.PasswordException(z.message,z.code);break;case"InvalidPDFException":lt=new A.InvalidPDFException(z.message);break;case"MissingPDFException":lt=new A.MissingPDFException(z.message);break;case"UnexpectedResponseException":lt=new A.UnexpectedResponseException(z.message,z.status);break;case"UnknownErrorException":lt=new A.UnknownErrorException(z.message,z.details);break;default:(0,A.unreachable)("DocException - expected a valid Error.")}q._capability.reject(lt)}),u.on("PasswordRequest",z=>{if(T(this,Kt,Promise.withResolvers()),q.onPassword){const lt=ft=>{ft instanceof Error?t(this,Kt).reject(ft):t(this,Kt).resolve({password:ft})};try{q.onPassword(lt,z.code)}catch(ft){t(this,Kt).reject(ft)}}else t(this,Kt).reject(new A.PasswordException(z.message,z.code));return t(this,Kt).promise}),u.on("DataLoaded",z=>{var lt;(lt=q.onProgress)==null||lt.call(q,{loaded:z.length,total:z.length}),this.downloadInfoCapability.resolve(z)}),u.on("StartRenderPage",z=>{this.destroyed||t(this,Rt).get(z.pageIndex)._startRenderPage(z.transparency,z.cacheKey)}),u.on("commonobj",([z,lt,ft])=>{var Ct;if(this.destroyed||this.commonObjs.has(z))return null;switch(lt){case"Font":const Ft=this._params;if("error"in ft){const Ce=ft.error;(0,A.warn)(`Error during font loading: ${Ce}`),this.commonObjs.resolve(z,Ce);break}const te=Ft.pdfBug&&((Ct=globalThis.FontInspector)!=null&&Ct.enabled)?(Ce,_e)=>globalThis.FontInspector.fontAdded(Ce,_e):null,re=new O.FontFaceObject(ft,{isEvalSupported:Ft.isEvalSupported,disableFontFace:Ft.disableFontFace,ignoreErrors:Ft.ignoreErrors,inspectFont:te});this.fontLoader.bind(re).catch(()=>u.sendWithPromise("FontFallback",{id:z})).finally(()=>{!Ft.fontExtraProperties&&re.data&&(re.data=null),this.commonObjs.resolve(z,re)});break;case"CopyLocalImage":const{imageRef:he}=ft;(0,A.assert)(he,"The imageRef must be defined.");for(const Ce of t(this,Rt).values())for(const[,_e]of Ce.objs)if(_e.ref===he)return _e.dataLen?(this.commonObjs.resolve(z,structuredClone(_e)),_e.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(z,ft);break;default:throw new Error(`Got unknown common object type ${lt}`)}return null}),u.on("obj",([z,lt,ft,Ct])=>{var te;if(this.destroyed)return;const Ft=t(this,Rt).get(lt);if(!Ft.objs.has(z)){if(Ft._intentStates.size===0){(te=Ct==null?void 0:Ct.bitmap)==null||te.close();return}switch(ft){case"Image":Ft.objs.resolve(z,Ct),(Ct==null?void 0:Ct.dataLen)>A.MAX_IMAGE_SIZE_TO_CACHE&&(Ft._maybeCleanupAfterRender=!0);break;case"Pattern":Ft.objs.resolve(z,Ct);break;default:throw new Error(`Got unknown object type ${ft}`)}}}),u.on("DocProgress",z=>{var lt;this.destroyed||((lt=q.onProgress)==null||lt.call(q,{loaded:z.loaded,total:z.total}))}),u.on("FetchBuiltInCMap",z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(z):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),u.on("FetchStandardFontData",z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(z):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var z;this.annotationStorage.size<=0&&(0,A.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:u,transfer:q}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:u,filename:((z=this._fullReader)==null?void 0:z.filename)??null},q).finally(()=>{this.annotationStorage.resetModified()})}getPage(u){if(!Number.isInteger(u)||u<=0||u>this._numPages)return Promise.reject(new Error("Invalid page request."));const q=u-1,z=t(this,qt).get(q);if(z)return z;const lt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:q}).then(ft=>{if(this.destroyed)throw new Error("Transport destroyed");const Ct=new r(q,ft,this,this._params.pdfBug);return t(this,Rt).set(q,Ct),Ct});return t(this,qt).set(q,lt),lt}getPageIndex(u){return typeof u!="object"||u===null||!Number.isInteger(u.num)||u.num<0||!Number.isInteger(u.gen)||u.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:u.num,gen:u.gen})}getAnnotations(u,q){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:u,intent:q})}getFieldObjects(){return y(this,ie,vi).call(this,"GetFieldObjects")}hasJSActions(){return y(this,ie,vi).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(u){return typeof u!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:u})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return y(this,ie,vi).call(this,"GetDocJSActions")}getPageJSActions(u){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:u})}getStructTree(u){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:u})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(u){return y(this,ie,vi).call(this,"GetOptionalContentConfig").then(q=>new B.OptionalContentConfig(q,u))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const u="GetMetadata",q=t(this,kt).get(u);if(q)return q;const z=this.messageHandler.sendWithPromise(u,null).then(lt=>{var ft,Ct;return{info:lt[0],metadata:lt[1]?new N.Metadata(lt[1]):null,contentDispositionFilename:((ft=this._fullReader)==null?void 0:ft.filename)??null,contentLength:((Ct=this._fullReader)==null?void 0:Ct.contentLength)??null}});return t(this,kt).set(u,z),z}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(u=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const q of t(this,Rt).values())if(!q.cleanup())throw new Error(`startCleanup: Page ${q.pageNumber} is currently rendering.`);this.commonObjs.clear(),u||this.fontLoader.clear(),t(this,kt).clear(),this.filterFactory.destroy(!0),(0,W.cleanupTextLayer)()}}get loadingParams(){const{disableAutoFetch:u,enableXfa:q}=this._params;return(0,A.shadow)(this,"loadingParams",{disableAutoFetch:u,enableXfa:q})}}kt=new WeakMap,Rt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,ie=new WeakSet,vi=function(u,q=null){const z=t(this,kt).get(u);if(z)return z;const lt=this.messageHandler.sendWithPromise(u,q);return t(this,kt).set(u,lt),lt};const rt=Symbol("INITIAL_DATA");class ot{constructor(){h(this,le);h(this,de,Object.create(null))}get(u,q=null){if(q){const lt=y(this,le,Tn).call(this,u);return lt.promise.then(()=>q(lt.data)),null}const z=t(this,de)[u];if(!z||z.data===rt)throw new Error(`Requesting object that isn't resolved yet ${u}.`);return z.data}has(u){const q=t(this,de)[u];return!!q&&q.data!==rt}resolve(u,q=null){const z=y(this,le,Tn).call(this,u);z.data=q,z.resolve()}clear(){var u;for(const q in t(this,de)){const{data:z}=t(this,de)[q];(u=z==null?void 0:z.bitmap)==null||u.close()}T(this,de,Object.create(null))}*[Symbol.iterator](){for(const u in t(this,de)){const{data:q}=t(this,de)[u];q!==rt&&(yield[u,q])}}}de=new WeakMap,le=new WeakSet,Tn=function(u){var q;return(q=t(this,de))[u]||(q[u]={...Promise.withResolvers(),data:rt})};class yt{constructor(u){h(this,Vt,null);T(this,Vt,u),this.onContinue=null}get promise(){return t(this,Vt).capability.promise}cancel(u=0){t(this,Vt).cancel(null,u)}get separateAnnots(){const{separateAnnots:u}=t(this,Vt).operatorList;if(!u)return!1;const{annotationCanvasMap:q}=t(this,Vt);return u.form||u.canvas&&(q==null?void 0:q.size)>0}}Vt=new WeakMap;const nt=class nt{constructor({callback:u,params:q,objs:z,commonObjs:lt,annotationCanvasMap:ft,operatorList:Ct,pageIndex:Ft,canvasFactory:te,filterFactory:re,useRequestAnimationFrame:he=!1,pdfBug:Ce=!1,pageColors:_e=null}){this.callback=u,this.params=q,this.objs=z,this.commonObjs=lt,this.annotationCanvasMap=ft,this.operatorListIdx=null,this.operatorList=Ct,this._pageIndex=Ft,this.canvasFactory=te,this.filterFactory=re,this._pdfBug=Ce,this.pageColors=_e,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=he===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new yt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=q.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:u=!1,optionalContentConfig:q}){var Ft,te;if(this.cancelled)return;if(this._canvas){if(t(nt,ae).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(nt,ae).add(this._canvas)}this._pdfBug&&((Ft=globalThis.StepperManager)!=null&&Ft.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:z,viewport:lt,transform:ft,background:Ct}=this.params;this.gfx=new C.CanvasGraphics(z,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:q},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:ft,viewport:lt,transparency:u,background:Ct}),this.operatorListIdx=0,this.graphicsReady=!0,(te=this.graphicsReadyCallback)==null||te.call(this)}cancel(u=null,q=0){var z;this.running=!1,this.cancelled=!0,(z=this.gfx)==null||z.endDrawing(),t(nt,ae).delete(this._canvas),this.callback(u||new st.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,q))}operatorListChanged(){var u;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(u=this.stepper)==null||u.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(nt,ae).delete(this._canvas),this.callback())))}};ae=new WeakMap,h(nt,ae,new WeakSet);let At=nt;const ut="4.1.392",St="fcb76a78d";$()}catch(Te){$(Te)}})},583:(g,H,m)=>{m.d(H,{BaseCMapReaderFactory:()=>D,BaseCanvasFactory:()=>A,BaseFilterFactory:()=>$,BaseSVGFactory:()=>O,BaseStandardFontDataFactory:()=>st});var n=m(292);class ${constructor(){this.constructor===$&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(C){return"none"}addHCMFilter(C,W){return"none"}addHighlightHCMFilter(C,W,R,w,N){return"none"}destroy(C=!1){}}class A{constructor(){this.constructor===A&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(C,W){if(C<=0||W<=0)throw new Error("Invalid canvas size");const R=this._createCanvas(C,W);return{canvas:R,context:R.getContext("2d")}}reset(C,W,R){if(!C.canvas)throw new Error("Canvas is not specified");if(W<=0||R<=0)throw new Error("Invalid canvas size");C.canvas.width=W,C.canvas.height=R}destroy(C){if(!C.canvas)throw new Error("Canvas is not specified");C.canvas.width=0,C.canvas.height=0,C.canvas=null,C.context=null}_createCanvas(C,W){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}class D{constructor({baseUrl:C=null,isCompressed:W=!0}){this.constructor===D&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=C,this.isCompressed=W}async fetch({name:C}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!C)throw new Error("CMap name must be specified.");const W=this.baseUrl+C+(this.isCompressed?".bcmap":""),R=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(W,R).catch(w=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${W}`)})}_fetchData(C,W){(0,n.unreachable)("Abstract method `_fetchData` called.")}}class st{constructor({baseUrl:C=null}){this.constructor===st&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=C}async fetch({filename:C}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!C)throw new Error("Font filename must be specified.");const W=`${this.baseUrl}${C}`;return this._fetchData(W).catch(R=>{throw new Error(`Unable to load font data at: ${W}`)})}_fetchData(C){(0,n.unreachable)("Abstract method `_fetchData` called.")}}class O{constructor(){this.constructor===O&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(C,W,R=!1){if(C<=0||W<=0)throw new Error("Invalid SVG dimensions");const w=this._createSVG("svg:svg");return w.setAttribute("version","1.1"),R||(w.setAttribute("width",`${C}px`),w.setAttribute("height",`${W}px`)),w.setAttribute("preserveAspectRatio","none"),w.setAttribute("viewBox",`0 0 ${C} ${W}`),w}createElement(C){if(typeof C!="string")throw new Error("Invalid SVG element type");return this._createSVG(C)}_createSVG(C){(0,n.unreachable)("Abstract method `_createSVG` called.")}}},923:(g,H,m)=>{var ae,Cn,ee,Mn;m.d(H,{CanvasGraphics:()=>ve});var n=m(292),$=m(419);const A={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function D(tt,s){if(!s)return;const i=s[2]-s[0],l=s[3]-s[1],d=new Path2D;d.rect(s[0],s[1],i,l),tt.clip(d)}class st{constructor(){this.constructor===st&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class O extends st{constructor(s){super(),this._type=s[1],this._bbox=s[2],this._colorStops=s[3],this._p0=s[4],this._p1=s[5],this._r0=s[6],this._r1=s[7],this.matrix=null}_createGradient(s){let i;this._type==="axial"?i=s.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=s.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const l of this._colorStops)i.addColorStop(l[0],l[1]);return i}getPattern(s,i,l,d){let a;if(d===A.STROKE||d===A.FILL){const f=i.current.getClippedPathBoundingBox(d,(0,$.getCurrentTransform)(s))||[0,0,0,0],p=Math.ceil(f[2]-f[0])||1,v=Math.ceil(f[3]-f[1])||1,c=i.cachedCanvases.getCanvas("pattern",p,v,!0),r=c.context;r.clearRect(0,0,r.canvas.width,r.canvas.height),r.beginPath(),r.rect(0,0,r.canvas.width,r.canvas.height),r.translate(-f[0],-f[1]),l=n.Util.transform(l,[1,0,0,1,f[0],f[1]]),r.transform(...i.baseTransform),this.matrix&&r.transform(...this.matrix),D(r,this._bbox),r.fillStyle=this._createGradient(r),r.fill(),a=s.createPattern(c.canvas,"no-repeat");const o=new DOMMatrix(l);a.setTransform(o)}else D(s,this._bbox),a=this._createGradient(s);return a}}function M(tt,s,i,l,d,a,f,p){const v=s.coords,c=s.colors,r=tt.data,o=tt.width*4;let E;v[i+1]>v[l+1]&&(E=i,i=l,l=E,E=a,a=f,f=E),v[l+1]>v[d+1]&&(E=l,l=d,d=E,E=f,f=p,p=E),v[i+1]>v[l+1]&&(E=i,i=l,l=E,E=a,a=f,f=E);const U=(v[i]+s.offsetX)*s.scaleX,G=(v[i+1]+s.offsetY)*s.scaleY,rt=(v[l]+s.offsetX)*s.scaleX,ot=(v[l+1]+s.offsetY)*s.scaleY,yt=(v[d]+s.offsetX)*s.scaleX,At=(v[d+1]+s.offsetY)*s.scaleY;if(G>=At)return;const ut=c[a],St=c[a+1],S=c[a+2],X=c[f],nt=c[f+1],I=c[f+2],u=c[p],q=c[p+1],z=c[p+2],lt=Math.round(G),ft=Math.round(At);let Ct,Ft,te,re,he,Ce,_e,De;for(let fe=lt;fe<=ft;fe++){if(fe<ot){const Y=fe<G?0:(G-fe)/(G-ot);Ct=U-(U-rt)*Y,Ft=ut-(ut-X)*Y,te=St-(St-nt)*Y,re=S-(S-I)*Y}else{let Y;fe>At?Y=1:ot===At?Y=0:Y=(ot-fe)/(ot-At),Ct=rt-(rt-yt)*Y,Ft=X-(X-u)*Y,te=nt-(nt-q)*Y,re=I-(I-z)*Y}let Pe;fe<G?Pe=0:fe>At?Pe=1:Pe=(G-fe)/(G-At),he=U-(U-yt)*Pe,Ce=ut-(ut-u)*Pe,_e=St-(St-q)*Pe,De=S-(S-z)*Pe;const se=Math.round(Math.min(Ct,he)),L=Math.round(Math.max(Ct,he));let b=o*fe+se*4;for(let Y=se;Y<=L;Y++)Pe=(Ct-Y)/(Ct-he),Pe<0?Pe=0:Pe>1&&(Pe=1),r[b++]=Ft-(Ft-Ce)*Pe|0,r[b++]=te-(te-_e)*Pe|0,r[b++]=re-(re-De)*Pe|0,r[b++]=255}}function C(tt,s,i){const l=s.coords,d=s.colors;let a,f;switch(s.type){case"lattice":const p=s.verticesPerRow,v=Math.floor(l.length/p)-1,c=p-1;for(a=0;a<v;a++){let r=a*p;for(let o=0;o<c;o++,r++)M(tt,i,l[r],l[r+1],l[r+p],d[r],d[r+1],d[r+p]),M(tt,i,l[r+p+1],l[r+1],l[r+p],d[r+p+1],d[r+1],d[r+p])}break;case"triangles":for(a=0,f=l.length;a<f;a+=3)M(tt,i,l[a],l[a+1],l[a+2],d[a],d[a+1],d[a+2]);break;default:throw new Error("illegal figure")}}class W extends st{constructor(s){super(),this._coords=s[2],this._colors=s[3],this._figures=s[4],this._bounds=s[5],this._bbox=s[7],this._background=s[8],this.matrix=null}_createMeshCanvas(s,i,l){const d=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-d,p=Math.ceil(this._bounds[3])-a,v=Math.min(Math.ceil(Math.abs(f*s[0]*1.1)),3e3),c=Math.min(Math.ceil(Math.abs(p*s[1]*1.1)),3e3),r=f/v,o=p/c,E={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-a,scaleX:1/r,scaleY:1/o},U=v+2*2,G=c+2*2,rt=l.getCanvas("mesh",U,G,!1),ot=rt.context,yt=ot.createImageData(v,c);if(i){const At=yt.data;for(let ut=0,St=At.length;ut<St;ut+=4)At[ut]=i[0],At[ut+1]=i[1],At[ut+2]=i[2],At[ut+3]=255}for(const At of this._figures)C(yt,At,E);return ot.putImageData(yt,2,2),{canvas:rt.canvas,offsetX:d-2*r,offsetY:a-2*o,scaleX:r,scaleY:o}}getPattern(s,i,l,d){D(s,this._bbox);let a;if(d===A.SHADING)a=n.Util.singularValueDecompose2dScale((0,$.getCurrentTransform)(s));else if(a=n.Util.singularValueDecompose2dScale(i.baseTransform),this.matrix){const p=n.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*p[0],a[1]*p[1]]}const f=this._createMeshCanvas(a,d===A.SHADING?null:this._background,i.cachedCanvases);return d!==A.SHADING&&(s.setTransform(...i.baseTransform),this.matrix&&s.transform(...this.matrix)),s.translate(f.offsetX,f.offsetY),s.scale(f.scaleX,f.scaleY),s.createPattern(f.canvas,"no-repeat")}}class R extends st{getPattern(){return"hotpink"}}function w(tt){switch(tt[0]){case"RadialAxial":return new O(tt);case"Mesh":return new W(tt);case"Dummy":return new R}throw new Error(`Unknown IR type: ${tt[0]}`)}const N={COLORED:1,UNCOLORED:2},Vt=class Vt{constructor(s,i,l,d,a){this.operatorList=s[2],this.matrix=s[3]||[1,0,0,1,0,0],this.bbox=s[4],this.xstep=s[5],this.ystep=s[6],this.paintType=s[7],this.tilingType=s[8],this.color=i,this.ctx=l,this.canvasGraphicsFactory=d,this.baseTransform=a}createPatternCanvas(s){const i=this.operatorList,l=this.bbox,d=this.xstep,a=this.ystep,f=this.paintType,p=this.tilingType,v=this.color,c=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+p);const r=l[0],o=l[1],E=l[2],U=l[3],G=n.Util.singularValueDecompose2dScale(this.matrix),rt=n.Util.singularValueDecompose2dScale(this.baseTransform),ot=[G[0]*rt[0],G[1]*rt[1]],yt=this.getSizeAndScale(d,this.ctx.canvas.width,ot[0]),At=this.getSizeAndScale(a,this.ctx.canvas.height,ot[1]),ut=s.cachedCanvases.getCanvas("pattern",yt.size,At.size,!0),St=ut.context,S=c.createCanvasGraphics(St);S.groupLevel=s.groupLevel,this.setFillAndStrokeStyleToContext(S,f,v);let X=r,nt=o,I=E,u=U;return r<0&&(X=0,I+=Math.abs(r)),o<0&&(nt=0,u+=Math.abs(o)),St.translate(-(yt.scale*X),-(At.scale*nt)),S.transform(yt.scale,0,0,At.scale,0,0),St.save(),this.clipBbox(S,X,nt,I,u),S.baseTransform=(0,$.getCurrentTransform)(S.ctx),S.executeOperatorList(i),S.endDrawing(),{canvas:ut.canvas,scaleX:yt.scale,scaleY:At.scale,offsetX:X,offsetY:nt}}getSizeAndScale(s,i,l){s=Math.abs(s);const d=Math.max(Vt.MAX_PATTERN_SIZE,i);let a=Math.ceil(s*l);return a>=d?a=d:l=a/s,{scale:l,size:a}}clipBbox(s,i,l,d,a){const f=d-i,p=a-l;s.ctx.rect(i,l,f,p),s.current.updateRectMinMax((0,$.getCurrentTransform)(s.ctx),[i,l,d,a]),s.clip(),s.endPath()}setFillAndStrokeStyleToContext(s,i,l){const d=s.ctx,a=s.current;switch(i){case N.COLORED:const f=this.ctx;d.fillStyle=f.fillStyle,d.strokeStyle=f.strokeStyle,a.fillColor=f.fillStyle,a.strokeColor=f.strokeStyle;break;case N.UNCOLORED:const p=n.Util.makeHexColor(l[0],l[1],l[2]);d.fillStyle=p,d.strokeStyle=p,a.fillColor=p,a.strokeColor=p;break;default:throw new n.FormatError(`Unsupported paint type: ${i}`)}}getPattern(s,i,l,d){let a=l;d!==A.SHADING&&(a=n.Util.transform(a,i.baseTransform),this.matrix&&(a=n.Util.transform(a,this.matrix)));const f=this.createPatternCanvas(i);let p=new DOMMatrix(a);p=p.translate(f.offsetX,f.offsetY),p=p.scale(1/f.scaleX,1/f.scaleY);const v=s.createPattern(f.canvas,"repeat");return v.setTransform(p),v}};me(Vt,"MAX_PATTERN_SIZE",3e3);let B=Vt;function K({src:tt,srcPos:s=0,dest:i,width:l,height:d,nonBlackColor:a=4294967295,inverseDecode:f=!1}){const p=n.FeatureTest.isLittleEndian?4278190080:255,[v,c]=f?[a,p]:[p,a],r=l>>3,o=l&7,E=tt.length;i=new Uint32Array(i.buffer);let U=0;for(let G=0;G<d;G++){for(const ot=s+r;s<ot;s++){const yt=s<E?tt[s]:255;i[U++]=yt&128?c:v,i[U++]=yt&64?c:v,i[U++]=yt&32?c:v,i[U++]=yt&16?c:v,i[U++]=yt&8?c:v,i[U++]=yt&4?c:v,i[U++]=yt&2?c:v,i[U++]=yt&1?c:v}if(o===0)continue;const rt=s<E?tt[s++]:255;for(let ot=0;ot<o;ot++)i[U++]=rt&1<<7-ot?c:v}return{srcPos:s,destPos:U}}const at=16,J=100,x=4096,V=15,F=10,P=1e3,j=16;function Z(tt,s){if(tt._removeMirroring)throw new Error("Context is already forwarding operations.");tt.__originalSave=tt.save,tt.__originalRestore=tt.restore,tt.__originalRotate=tt.rotate,tt.__originalScale=tt.scale,tt.__originalTranslate=tt.translate,tt.__originalTransform=tt.transform,tt.__originalSetTransform=tt.setTransform,tt.__originalResetTransform=tt.resetTransform,tt.__originalClip=tt.clip,tt.__originalMoveTo=tt.moveTo,tt.__originalLineTo=tt.lineTo,tt.__originalBezierCurveTo=tt.bezierCurveTo,tt.__originalRect=tt.rect,tt.__originalClosePath=tt.closePath,tt.__originalBeginPath=tt.beginPath,tt._removeMirroring=()=>{tt.save=tt.__originalSave,tt.restore=tt.__originalRestore,tt.rotate=tt.__originalRotate,tt.scale=tt.__originalScale,tt.translate=tt.__originalTranslate,tt.transform=tt.__originalTransform,tt.setTransform=tt.__originalSetTransform,tt.resetTransform=tt.__originalResetTransform,tt.clip=tt.__originalClip,tt.moveTo=tt.__originalMoveTo,tt.lineTo=tt.__originalLineTo,tt.bezierCurveTo=tt.__originalBezierCurveTo,tt.rect=tt.__originalRect,tt.closePath=tt.__originalClosePath,tt.beginPath=tt.__originalBeginPath,delete tt._removeMirroring},tt.save=function(){s.save(),this.__originalSave()},tt.restore=function(){s.restore(),this.__originalRestore()},tt.translate=function(i,l){s.translate(i,l),this.__originalTranslate(i,l)},tt.scale=function(i,l){s.scale(i,l),this.__originalScale(i,l)},tt.transform=function(i,l,d,a,f,p){s.transform(i,l,d,a,f,p),this.__originalTransform(i,l,d,a,f,p)},tt.setTransform=function(i,l,d,a,f,p){s.setTransform(i,l,d,a,f,p),this.__originalSetTransform(i,l,d,a,f,p)},tt.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},tt.rotate=function(i){s.rotate(i),this.__originalRotate(i)},tt.clip=function(i){s.clip(i),this.__originalClip(i)},tt.moveTo=function(i,l){s.moveTo(i,l),this.__originalMoveTo(i,l)},tt.lineTo=function(i,l){s.lineTo(i,l),this.__originalLineTo(i,l)},tt.bezierCurveTo=function(i,l,d,a,f,p){s.bezierCurveTo(i,l,d,a,f,p),this.__originalBezierCurveTo(i,l,d,a,f,p)},tt.rect=function(i,l,d,a){s.rect(i,l,d,a),this.__originalRect(i,l,d,a)},tt.closePath=function(){s.closePath(),this.__originalClosePath()},tt.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class vt{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,i,l){let d;return this.cache[s]!==void 0?(d=this.cache[s],this.canvasFactory.reset(d,i,l)):(d=this.canvasFactory.create(i,l),this.cache[s]=d),d}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const i=this.cache[s];this.canvasFactory.destroy(i),delete this.cache[s]}}}function Dt(tt,s,i,l,d,a,f,p,v,c){const[r,o,E,U,G,rt]=(0,$.getCurrentTransform)(tt);if(o===0&&E===0){const At=f*r+G,ut=Math.round(At),St=p*U+rt,S=Math.round(St),X=(f+v)*r+G,nt=Math.abs(Math.round(X)-ut)||1,I=(p+c)*U+rt,u=Math.abs(Math.round(I)-S)||1;return tt.setTransform(Math.sign(r),0,0,Math.sign(U),ut,S),tt.drawImage(s,i,l,d,a,0,0,nt,u),tt.setTransform(r,o,E,U,G,rt),[nt,u]}if(r===0&&U===0){const At=p*E+G,ut=Math.round(At),St=f*o+rt,S=Math.round(St),X=(p+c)*E+G,nt=Math.abs(Math.round(X)-ut)||1,I=(f+v)*o+rt,u=Math.abs(Math.round(I)-S)||1;return tt.setTransform(0,Math.sign(o),Math.sign(E),0,ut,S),tt.drawImage(s,i,l,d,a,0,0,u,nt),tt.setTransform(r,o,E,U,G,rt),[u,nt]}tt.drawImage(s,i,l,d,a,f,p,v,c);const ot=Math.hypot(r,o),yt=Math.hypot(E,U);return[ot*v,yt*c]}function Tt(tt){const{width:s,height:i}=tt;if(s>P||i>P)return null;const l=1e3,d=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=s+1;let f=new Uint8Array(a*(i+1)),p,v,c;const r=s+7&-8;let o=new Uint8Array(r*i),E=0;for(const ot of tt.data){let yt=128;for(;yt>0;)o[E++]=ot&yt?0:255,yt>>=1}let U=0;for(E=0,o[E]!==0&&(f[0]=1,++U),v=1;v<s;v++)o[E]!==o[E+1]&&(f[v]=o[E]?2:1,++U),E++;for(o[E]!==0&&(f[v]=2,++U),p=1;p<i;p++){E=p*r,c=p*a,o[E-r]!==o[E]&&(f[c]=o[E]?1:8,++U);let ot=(o[E]?4:0)+(o[E-r]?8:0);for(v=1;v<s;v++)ot=(ot>>2)+(o[E+1]?4:0)+(o[E-r+1]?8:0),d[ot]&&(f[c+v]=d[ot],++U),E++;if(o[E-r]!==o[E]&&(f[c+v]=o[E]?2:4,++U),U>l)return null}for(E=r*(i-1),c=p*a,o[E]!==0&&(f[c]=8,++U),v=1;v<s;v++)o[E]!==o[E+1]&&(f[c+v]=o[E]?4:8,++U),E++;if(o[E]!==0&&(f[c+v]=4,++U),U>l)return null;const G=new Int32Array([0,a,-1,0,-a,0,0,0,1]),rt=new Path2D;for(p=0;U&&p<=i;p++){let ot=p*a;const yt=ot+s;for(;ot<yt&&!f[ot];)ot++;if(ot===yt)continue;rt.moveTo(ot%a,p);const At=ot;let ut=f[ot];do{const St=G[ut];do ot+=St;while(!f[ot]);const S=f[ot];S!==5&&S!==10?(ut=S,f[ot]=0):(ut=S&51*ut>>4,f[ot]&=ut>>2|ut<<2),rt.lineTo(ot%a,ot/a|0),f[ot]||--U}while(At!==ot);--p}return o=null,f=null,function(ot){ot.save(),ot.scale(1/s,-1/i),ot.translate(0,-i),ot.fill(rt),ot.beginPath(),ot.restore()}}class Ot{constructor(s,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,i])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,i){this.x=s,this.y=i}updatePathMinMax(s,i,l){[i,l]=n.Util.applyTransform([i,l],s),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,l),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,l)}updateRectMinMax(s,i){const l=n.Util.applyTransform(i,s),d=n.Util.applyTransform(i.slice(2),s),a=n.Util.applyTransform([i[0],i[3]],s),f=n.Util.applyTransform([i[2],i[1]],s);this.minX=Math.min(this.minX,l[0],d[0],a[0],f[0]),this.minY=Math.min(this.minY,l[1],d[1],a[1],f[1]),this.maxX=Math.max(this.maxX,l[0],d[0],a[0],f[0]),this.maxY=Math.max(this.maxY,l[1],d[1],a[1],f[1])}updateScalingPathMinMax(s,i){n.Util.scaleMinMax(s,i),this.minX=Math.min(this.minX,i[0]),this.minY=Math.min(this.minY,i[1]),this.maxX=Math.max(this.maxX,i[2]),this.maxY=Math.max(this.maxY,i[3])}updateCurvePathMinMax(s,i,l,d,a,f,p,v,c,r){const o=n.Util.bezierBoundingBox(i,l,d,a,f,p,v,c,r);r||this.updateRectMinMax(s,o)}getPathBoundingBox(s=A.FILL,i=null){const l=[this.minX,this.minY,this.maxX,this.maxY];if(s===A.STROKE){i||(0,n.unreachable)("Stroke bounding box must include transform.");const d=n.Util.singularValueDecompose2dScale(i),a=d[0]*this.lineWidth/2,f=d[1]*this.lineWidth/2;l[0]-=a,l[1]-=f,l[2]+=a,l[3]+=f}return l}updateClipFromPath(){const s=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=A.FILL,i=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(s,i))}}function _t(tt,s){if(typeof ImageData<"u"&&s instanceof ImageData){tt.putImageData(s,0,0);return}const i=s.height,l=s.width,d=i%j,a=(i-d)/j,f=d===0?a:a+1,p=tt.createImageData(l,j);let v=0,c;const r=s.data,o=p.data;let E,U,G,rt;if(s.kind===n.ImageKind.GRAYSCALE_1BPP){const ot=r.byteLength,yt=new Uint32Array(o.buffer,0,o.byteLength>>2),At=yt.length,ut=l+7>>3,St=4294967295,S=n.FeatureTest.isLittleEndian?4278190080:255;for(E=0;E<f;E++){for(G=E<a?j:d,c=0,U=0;U<G;U++){const X=ot-v;let nt=0;const I=X>ut?l:X*8-7,u=I&-8;let q=0,z=0;for(;nt<u;nt+=8)z=r[v++],yt[c++]=z&128?St:S,yt[c++]=z&64?St:S,yt[c++]=z&32?St:S,yt[c++]=z&16?St:S,yt[c++]=z&8?St:S,yt[c++]=z&4?St:S,yt[c++]=z&2?St:S,yt[c++]=z&1?St:S;for(;nt<I;nt++)q===0&&(z=r[v++],q=128),yt[c++]=z&q?St:S,q>>=1}for(;c<At;)yt[c++]=0;tt.putImageData(p,0,E*j)}}else if(s.kind===n.ImageKind.RGBA_32BPP){for(U=0,rt=l*j*4,E=0;E<a;E++)o.set(r.subarray(v,v+rt)),v+=rt,tt.putImageData(p,0,U),U+=j;E<f&&(rt=l*d*4,o.set(r.subarray(v,v+rt)),tt.putImageData(p,0,U))}else if(s.kind===n.ImageKind.RGB_24BPP)for(G=j,rt=l*G,E=0;E<f;E++){for(E>=a&&(G=d,rt=l*G),c=0,U=rt;U--;)o[c++]=r[v++],o[c++]=r[v++],o[c++]=r[v++],o[c++]=255;tt.putImageData(p,0,E*j)}else throw new Error(`bad image kind: ${s.kind}`)}function Mt(tt,s){if(s.bitmap){tt.drawImage(s.bitmap,0,0);return}const i=s.height,l=s.width,d=i%j,a=(i-d)/j,f=d===0?a:a+1,p=tt.createImageData(l,j);let v=0;const c=s.data,r=p.data;for(let o=0;o<f;o++){const E=o<a?j:d;({srcPos:v}=K({src:c,srcPos:v,dest:r,width:l,height:E,nonBlackColor:0})),tt.putImageData(p,0,o*j)}}function Pt(tt,s){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const l of i)tt[l]!==void 0&&(s[l]=tt[l]);tt.setLineDash!==void 0&&(s.setLineDash(tt.getLineDash()),s.lineDashOffset=tt.lineDashOffset)}function Et(tt){if(tt.strokeStyle=tt.fillStyle="#000000",tt.fillRule="nonzero",tt.globalAlpha=1,tt.lineWidth=1,tt.lineCap="butt",tt.lineJoin="miter",tt.miterLimit=10,tt.globalCompositeOperation="source-over",tt.font="10px sans-serif",tt.setLineDash!==void 0&&(tt.setLineDash([]),tt.lineDashOffset=0),!n.isNodeJS){const{filter:s}=tt;s!=="none"&&s!==""&&(tt.filter="none")}}function Q(tt,s,i,l){const d=tt.length;for(let a=3;a<d;a+=4){const f=tt[a];if(f===0)tt[a-3]=s,tt[a-2]=i,tt[a-1]=l;else if(f<255){const p=255-f;tt[a-3]=tt[a-3]*f+s*p>>8,tt[a-2]=tt[a-2]*f+i*p>>8,tt[a-1]=tt[a-1]*f+l*p>>8}}}function gt(tt,s,i){const l=tt.length,d=1/255;for(let a=3;a<l;a+=4){const f=i?i[tt[a]]:tt[a];s[a]=s[a]*f*d|0}}function kt(tt,s,i){const l=tt.length;for(let d=3;d<l;d+=4){const a=tt[d-3]*77+tt[d-2]*152+tt[d-1]*28;s[d]=i?s[d]*i[a>>8]>>8:s[d]*a>>16}}function Rt(tt,s,i,l,d,a,f,p,v,c,r){const o=!!a,E=o?a[0]:0,U=o?a[1]:0,G=o?a[2]:0,rt=d==="Luminosity"?kt:gt,ot=Math.min(l,Math.ceil(1048576/i));for(let yt=0;yt<l;yt+=ot){const At=Math.min(ot,l-yt),ut=tt.getImageData(p-c,yt+(v-r),i,At),St=s.getImageData(p,yt+v,i,At);o&&Q(ut.data,E,U,G),rt(ut.data,St.data,f),s.putImageData(St,p,yt+v)}}function qt(tt,s,i,l){const d=l[0],a=l[1],f=l[2]-d,p=l[3]-a;f===0||p===0||(Rt(s.context,i,f,p,s.subtype,s.backdrop,s.transferMap,d,a,s.offsetX,s.offsetY),tt.save(),tt.globalAlpha=1,tt.globalCompositeOperation="source-over",tt.setTransform(1,0,0,1,0,0),tt.drawImage(i.canvas,0,0),tt.restore())}function Kt(tt,s){const i=n.Util.singularValueDecompose2dScale(tt);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const l=Math.fround((globalThis.devicePixelRatio||1)*$.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:i[0]<=l||i[1]<=l}const ie=["butt","round","square"],xe=["miter","round","bevel"],de={},le={},ne=class ne{constructor(s,i,l,d,a,{optionalContentConfig:f,markedContentStack:p=null},v,c){h(this,ae);h(this,ee);this.ctx=s,this.current=new Ot(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=l,this.canvasFactory=d,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=p||[],this.optionalContentConfig=f,this.cachedCanvases=new vt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=v,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,i=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):i}beginDrawing({transform:s,viewport:i,transparency:l=!1,background:d=null}){const a=this.ctx.canvas.width,f=this.ctx.canvas.height,p=this.ctx.fillStyle;if(this.ctx.fillStyle=d||"#ffffff",this.ctx.fillRect(0,0,a,f),this.ctx.fillStyle=p,l){const v=this.cachedCanvases.getCanvas("transparent",a,f);this.compositeCtx=this.ctx,this.transparentCanvas=v.canvas,this.ctx=v.context,this.ctx.save(),this.ctx.transform(...(0,$.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Et(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=(0,$.getCurrentTransform)(this.ctx)}executeOperatorList(s,i,l,d){const a=s.argsArray,f=s.fnArray;let p=i||0;const v=a.length;if(v===p)return p;const c=v-p>F&&typeof l=="function",r=c?Date.now()+V:0;let o=0;const E=this.commonObjs,U=this.objs;let G;for(;;){if(d!==void 0&&p===d.nextBreakPoint)return d.breakIt(p,l),p;if(G=f[p],G!==n.OPS.dependency)this[G].apply(this,a[p]);else for(const rt of a[p]){const ot=rt.startsWith("g_")?E:U;if(!ot.has(rt))return ot.get(rt,l),p}if(p++,p===v)return p;if(c&&++o>F){if(Date.now()>r)return l(),p;o=0}}}endDrawing(){y(this,ae,Cn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const i of s.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);s.clear()}this._cachedBitmapsMap.clear(),y(this,ee,Mn).call(this)}_scaleImage(s,i){const l=s.width,d=s.height;let a=Math.max(Math.hypot(i[0],i[1]),1),f=Math.max(Math.hypot(i[2],i[3]),1),p=l,v=d,c="prescale1",r,o;for(;a>2&&p>1||f>2&&v>1;){let E=p,U=v;a>2&&p>1&&(E=p>=16384?Math.floor(p/2)-1||1:Math.ceil(p/2),a/=p/E),f>2&&v>1&&(U=v>=16384?Math.floor(v/2)-1||1:Math.ceil(v)/2,f/=v/U),r=this.cachedCanvases.getCanvas(c,E,U),o=r.context,o.clearRect(0,0,E,U),o.drawImage(s,0,0,p,v,0,0,E,U),s=r.canvas,p=E,v=U,c=c==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:p,paintHeight:v}}_createMaskCanvas(s){const i=this.ctx,{width:l,height:d}=s,a=this.current.fillColor,f=this.current.patternFill,p=(0,$.getCurrentTransform)(i);let v,c,r,o;if((s.bitmap||s.data)&&s.count>1){const I=s.bitmap||s.data.buffer;c=JSON.stringify(f?p:[p.slice(0,4),a]),v=this._cachedBitmapsMap.get(I),v||(v=new Map,this._cachedBitmapsMap.set(I,v));const u=v.get(c);if(u&&!f){const q=Math.round(Math.min(p[0],p[2])+p[4]),z=Math.round(Math.min(p[1],p[3])+p[5]);return{canvas:u,offsetX:q,offsetY:z}}r=u}r||(o=this.cachedCanvases.getCanvas("maskCanvas",l,d),Mt(o.context,s));let E=n.Util.transform(p,[1/l,0,0,-1/d,0,0]);E=n.Util.transform(E,[1,0,0,1,0,-d]);const[U,G,rt,ot]=n.Util.getAxialAlignedBoundingBox([0,0,l,d],E),yt=Math.round(rt-U)||1,At=Math.round(ot-G)||1,ut=this.cachedCanvases.getCanvas("fillCanvas",yt,At),St=ut.context,S=U,X=G;St.translate(-S,-X),St.transform(...E),r||(r=this._scaleImage(o.canvas,(0,$.getCurrentTransformInverse)(St)),r=r.img,v&&f&&v.set(c,r)),St.imageSmoothingEnabled=Kt((0,$.getCurrentTransform)(St),s.interpolate),Dt(St,r,0,0,r.width,r.height,0,0,l,d),St.globalCompositeOperation="source-in";const nt=n.Util.transform((0,$.getCurrentTransformInverse)(St),[1,0,0,1,-S,-X]);return St.fillStyle=f?a.getPattern(i,this,nt,A.FILL):a,St.fillRect(0,0,l,d),v&&!f&&(this.cachedCanvases.delete("fillCanvas"),v.set(c,ut.canvas)),{canvas:ut.canvas,offsetX:Math.round(S),offsetY:Math.round(X)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=ie[s]}setLineJoin(s){this.ctx.lineJoin=xe[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,i){const l=this.ctx;l.setLineDash!==void 0&&(l.setLineDash(s),l.lineDashOffset=i)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[i,l]of s)switch(i){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l[0],l[1]);break;case"CA":this.current.strokeAlpha=l;break;case"ca":this.current.fillAlpha=l,this.ctx.globalAlpha=l;break;case"BM":this.ctx.globalCompositeOperation=l;break;case"SMask":this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,i=this.ctx.canvas.height,l="smaskGroupAt"+this.groupLevel,d=this.cachedCanvases.getCanvas(l,s,i);this.suspendedCtx=this.ctx,this.ctx=d.context;const a=this.ctx;a.setTransform(...(0,$.getCurrentTransform)(this.suspendedCtx)),Pt(this.suspendedCtx,a),Z(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Pt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,l=this.suspendedCtx;qt(l,i,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Pt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Pt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,i,l,d,a,f){this.ctx.transform(s,i,l,d,a,f),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,i,l){const d=this.ctx,a=this.current;let f=a.x,p=a.y,v,c;const r=(0,$.getCurrentTransform)(d),o=r[0]===0&&r[3]===0||r[1]===0&&r[2]===0,E=o?l.slice(0):null;for(let U=0,G=0,rt=s.length;U<rt;U++)switch(s[U]|0){case n.OPS.rectangle:f=i[G++],p=i[G++];const ot=i[G++],yt=i[G++],At=f+ot,ut=p+yt;d.moveTo(f,p),ot===0||yt===0?d.lineTo(At,ut):(d.lineTo(At,p),d.lineTo(At,ut),d.lineTo(f,ut)),o||a.updateRectMinMax(r,[f,p,At,ut]),d.closePath();break;case n.OPS.moveTo:f=i[G++],p=i[G++],d.moveTo(f,p),o||a.updatePathMinMax(r,f,p);break;case n.OPS.lineTo:f=i[G++],p=i[G++],d.lineTo(f,p),o||a.updatePathMinMax(r,f,p);break;case n.OPS.curveTo:v=f,c=p,f=i[G+4],p=i[G+5],d.bezierCurveTo(i[G],i[G+1],i[G+2],i[G+3],f,p),a.updateCurvePathMinMax(r,v,c,i[G],i[G+1],i[G+2],i[G+3],f,p,E),G+=6;break;case n.OPS.curveTo2:v=f,c=p,d.bezierCurveTo(f,p,i[G],i[G+1],i[G+2],i[G+3]),a.updateCurvePathMinMax(r,v,c,f,p,i[G],i[G+1],i[G+2],i[G+3],E),f=i[G+2],p=i[G+3],G+=4;break;case n.OPS.curveTo3:v=f,c=p,f=i[G+2],p=i[G+3],d.bezierCurveTo(i[G],i[G+1],f,p,f,p),a.updateCurvePathMinMax(r,v,c,i[G],i[G+1],f,p,f,p,E),G+=4;break;case n.OPS.closePath:d.closePath();break}o&&a.updateScalingPathMinMax(r,E),a.setCurrentPoint(f,p)}closePath(){this.ctx.closePath()}stroke(s=!0){const i=this.ctx,l=this.current.strokeColor;i.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof l=="object"&&(l!=null&&l.getPattern)?(i.save(),i.strokeStyle=l.getPattern(i,this,(0,$.getCurrentTransformInverse)(i),A.STROKE),this.rescaleAndStroke(!1),i.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const i=this.ctx,l=this.current.fillColor,d=this.current.patternFill;let a=!1;d&&(i.save(),i.fillStyle=l.getPattern(i,this,(0,$.getCurrentTransformInverse)(i),A.FILL),a=!0);const f=this.current.getClippedPathBoundingBox();this.contentVisible&&f!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),a&&i.restore(),s&&this.consumePath(f)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=de}eoClip(){this.pendingClip=le}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,i=this.ctx;if(s===void 0){i.beginPath();return}i.save(),i.beginPath();for(const l of s)i.setTransform(...l.transform),i.translate(l.x,l.y),l.addToPath(i,l.fontSize);i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,i){var r;const l=this.commonObjs.get(s),d=this.current;if(!l)throw new Error(`Can't find font for ${s}`);if(d.fontMatrix=l.fontMatrix||n.FONT_IDENTITY_MATRIX,(d.fontMatrix[0]===0||d.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+s),i<0?(i=-i,d.fontDirection=-1):d.fontDirection=1,this.current.font=l,this.current.fontSize=i,l.isType3Font)return;const a=l.loadedName||"sans-serif",f=((r=l.systemFontInfo)==null?void 0:r.css)||`"${a}", ${l.fallbackName}`;let p="normal";l.black?p="900":l.bold&&(p="bold");const v=l.italic?"italic":"normal";let c=i;i<at?c=at:i>J&&(c=J),this.current.fontSizeScale=i/c,this.ctx.font=`${v} ${p} ${c}px ${f}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,i){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=i}setLeadingMoveText(s,i){this.setLeading(-i),this.moveText(s,i)}setTextMatrix(s,i,l,d,a,f){this.current.textMatrix=[s,i,l,d,a,f],this.current.textMatrixScale=Math.hypot(s,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,i,l,d){const a=this.ctx,f=this.current,p=f.font,v=f.textRenderingMode,c=f.fontSize/f.fontSizeScale,r=v&n.TextRenderingMode.FILL_STROKE_MASK,o=!!(v&n.TextRenderingMode.ADD_TO_PATH_FLAG),E=f.patternFill&&!p.missingFile;let U;(p.disableFontFace||o||E)&&(U=p.getPathGenerator(this.commonObjs,s)),p.disableFontFace||E?(a.save(),a.translate(i,l),a.beginPath(),U(a,c),d&&a.setTransform(...d),(r===n.TextRenderingMode.FILL||r===n.TextRenderingMode.FILL_STROKE)&&a.fill(),(r===n.TextRenderingMode.STROKE||r===n.TextRenderingMode.FILL_STROKE)&&a.stroke(),a.restore()):((r===n.TextRenderingMode.FILL||r===n.TextRenderingMode.FILL_STROKE)&&a.fillText(s,i,l),(r===n.TextRenderingMode.STROKE||r===n.TextRenderingMode.FILL_STROKE)&&a.strokeText(s,i,l)),o&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,$.getCurrentTransform)(a),x:i,y:l,fontSize:c,addToPath:U})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const i=s.getImageData(0,0,10,10).data;let l=!1;for(let d=3;d<i.length;d+=4)if(i[d]>0&&i[d]<255){l=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",l)}showText(s){const i=this.current,l=i.font;if(l.isType3Font)return this.showType3Text(s);const d=i.fontSize;if(d===0)return;const a=this.ctx,f=i.fontSizeScale,p=i.charSpacing,v=i.wordSpacing,c=i.fontDirection,r=i.textHScale*c,o=s.length,E=l.vertical,U=E?1:-1,G=l.defaultVMetrics,rt=d*i.fontMatrix[0],ot=i.textRenderingMode===n.TextRenderingMode.FILL&&!l.disableFontFace&&!i.patternFill;a.save(),a.transform(...i.textMatrix),a.translate(i.x,i.y+i.textRise),c>0?a.scale(r,-1):a.scale(r,1);let yt;if(i.patternFill){a.save();const X=i.fillColor.getPattern(a,this,(0,$.getCurrentTransformInverse)(a),A.FILL);yt=(0,$.getCurrentTransform)(a),a.restore(),a.fillStyle=X}let At=i.lineWidth;const ut=i.textMatrixScale;if(ut===0||At===0){const X=i.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(X===n.TextRenderingMode.STROKE||X===n.TextRenderingMode.FILL_STROKE)&&(At=this.getSinglePixelWidth())}else At/=ut;if(f!==1&&(a.scale(f,f),At/=f),a.lineWidth=At,l.isInvalidPDFjsFont){const X=[];let nt=0;for(const I of s)X.push(I.unicode),nt+=I.width;a.fillText(X.join(""),0,0),i.x+=nt*rt*r,a.restore(),this.compose();return}let St=0,S;for(S=0;S<o;++S){const X=s[S];if(typeof X=="number"){St+=U*X*d/1e3;continue}let nt=!1;const I=(X.isSpace?v:0)+p,u=X.fontChar,q=X.accent;let z,lt,ft=X.width;if(E){const Ft=X.vmetric||G,te=-(X.vmetric?Ft[1]:ft*.5)*rt,re=Ft[2]*rt;ft=Ft?-Ft[0]:ft,z=te/f,lt=(St+re)/f}else z=St/f,lt=0;if(l.remeasure&&ft>0){const Ft=a.measureText(u).width*1e3/d*f;if(ft<Ft&&this.isFontSubpixelAAEnabled){const te=ft/Ft;nt=!0,a.save(),a.scale(te,1),z/=te}else ft!==Ft&&(z+=(ft-Ft)/2e3*d/f)}if(this.contentVisible&&(X.isInFont||l.missingFile)){if(ot&&!q)a.fillText(u,z,lt);else if(this.paintChar(u,z,lt,yt),q){const Ft=z+d*q.offset.x/f,te=lt-d*q.offset.y/f;this.paintChar(q.fontChar,Ft,te,yt)}}const Ct=E?ft*rt-I*c:ft*rt+I*c;St+=Ct,nt&&a.restore()}E?i.y-=St:i.x+=St*r,a.restore(),this.compose()}showType3Text(s){const i=this.ctx,l=this.current,d=l.font,a=l.fontSize,f=l.fontDirection,p=d.vertical?1:-1,v=l.charSpacing,c=l.wordSpacing,r=l.textHScale*f,o=l.fontMatrix||n.FONT_IDENTITY_MATRIX,E=s.length,U=l.textRenderingMode===n.TextRenderingMode.INVISIBLE;let G,rt,ot,yt;if(!(U||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...l.textMatrix),i.translate(l.x,l.y),i.scale(r,f),G=0;G<E;++G){if(rt=s[G],typeof rt=="number"){yt=p*rt*a/1e3,this.ctx.translate(yt,0),l.x+=yt*r;continue}const At=(rt.isSpace?c:0)+v,ut=d.charProcOperatorList[rt.operatorListId];if(!ut){(0,n.warn)(`Type3 character "${rt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=rt,this.save(),i.scale(a,a),i.transform(...o),this.executeOperatorList(ut),this.restore()),ot=n.Util.applyTransform([rt.width,0],o)[0]*a+At,i.translate(ot,0),l.x+=ot*r}i.restore(),this.processingType3=null}}setCharWidth(s,i){}setCharWidthAndBounds(s,i,l,d,a,f){this.ctx.rect(l,d,a-l,f-d),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let i;if(s[0]==="TilingPattern"){const l=s[1],d=this.baseTransform||(0,$.getCurrentTransform)(this.ctx),a={createCanvasGraphics:f=>new ne(f,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new B(s,l,this.ctx,a,d)}else i=this._getPattern(s[1],s[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,i,l){const d=n.Util.makeHexColor(s,i,l);this.ctx.strokeStyle=d,this.current.strokeColor=d}setFillRGBColor(s,i,l){const d=n.Util.makeHexColor(s,i,l);this.ctx.fillStyle=d,this.current.fillColor=d,this.current.patternFill=!1}_getPattern(s,i=null){let l;return this.cachedPatterns.has(s)?l=this.cachedPatterns.get(s):(l=w(this.getObject(s)),this.cachedPatterns.set(s,l)),i&&(l.matrix=i),l}shadingFill(s){if(!this.contentVisible)return;const i=this.ctx;this.save();const l=this._getPattern(s);i.fillStyle=l.getPattern(i,this,(0,$.getCurrentTransformInverse)(i),A.SHADING);const d=(0,$.getCurrentTransformInverse)(i);if(d){const{width:a,height:f}=i.canvas,[p,v,c,r]=n.Util.getAxialAlignedBoundingBox([0,0,a,f],d);this.ctx.fillRect(p,v,c-p,r-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,$.getCurrentTransform)(this.ctx),i)){const l=i[2]-i[0],d=i[3]-i[1];this.ctx.rect(i[0],i[1],l,d),this.current.updateRectMinMax((0,$.getCurrentTransform)(this.ctx),i),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;s.isolated||(0,n.info)("TODO: Support non-isolated groups."),s.knockout&&(0,n.warn)("Knockout groups not supported.");const l=(0,$.getCurrentTransform)(i);if(s.matrix&&i.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let d=n.Util.getAxialAlignedBoundingBox(s.bbox,(0,$.getCurrentTransform)(i));const a=[0,0,i.canvas.width,i.canvas.height];d=n.Util.intersect(d,a)||[0,0,0,0];const f=Math.floor(d[0]),p=Math.floor(d[1]);let v=Math.max(Math.ceil(d[2])-f,1),c=Math.max(Math.ceil(d[3])-p,1),r=1,o=1;v>x&&(r=v/x,v=x),c>x&&(o=c/x,c=x),this.current.startNewPathAndClipBox([0,0,v,c]);let E="groupAt"+this.groupLevel;s.smask&&(E+="_smask_"+this.smaskCounter++%2);const U=this.cachedCanvases.getCanvas(E,v,c),G=U.context;G.scale(1/r,1/o),G.translate(-f,-p),G.transform(...l),s.smask?this.smaskStack.push({canvas:U.canvas,context:G,offsetX:f,offsetY:p,scaleX:r,scaleY:o,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(f,p),i.scale(r,o),i.save()),Pt(i,G),this.ctx=G,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,l=this.groupStack.pop();if(this.ctx=l,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const d=(0,$.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...d);const a=n.Util.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],d);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(s,i,l,d,a){if(y(this,ae,Cn).call(this),Et(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(i)&&i.length===4){const f=i[2]-i[0],p=i[3]-i[1];if(a&&this.annotationCanvasMap){l=l.slice(),l[4]-=i[0],l[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=f,i[3]=p;const[v,c]=n.Util.singularValueDecompose2dScale((0,$.getCurrentTransform)(this.ctx)),{viewportScale:r}=this,o=Math.ceil(f*this.outputScaleX*r),E=Math.ceil(p*this.outputScaleY*r);this.annotationCanvas=this.canvasFactory.create(o,E);const{canvas:U,context:G}=this.annotationCanvas;this.annotationCanvasMap.set(s,U),this.annotationCanvas.savedCtx=this.ctx,this.ctx=G,this.ctx.save(),this.ctx.setTransform(v,0,0,-c,0,p*c),Et(this.ctx)}else Et(this.ctx),this.ctx.rect(i[0],i[1],f,p),this.ctx.clip(),this.endPath()}this.current=new Ot(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...l),this.transform(...d)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),y(this,ee,Mn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const i=s.count;s=this.getObject(s.data,s),s.count=i;const l=this.ctx,d=this.processingType3;if(d&&(d.compiled===void 0&&(d.compiled=Tt(s)),d.compiled)){d.compiled(l);return}const a=this._createMaskCanvas(s),f=a.canvas;l.save(),l.setTransform(1,0,0,1,0,0),l.drawImage(f,a.offsetX,a.offsetY),l.restore(),this.compose()}paintImageMaskXObjectRepeat(s,i,l=0,d=0,a,f){if(!this.contentVisible)return;s=this.getObject(s.data,s);const p=this.ctx;p.save();const v=(0,$.getCurrentTransform)(p);p.transform(i,l,d,a,0,0);const c=this._createMaskCanvas(s);p.setTransform(1,0,0,1,c.offsetX-v[4],c.offsetY-v[5]);for(let r=0,o=f.length;r<o;r+=2){const E=n.Util.transform(v,[i,l,d,a,f[r],f[r+1]]),[U,G]=n.Util.applyTransform([0,0],E);p.drawImage(c.canvas,U,G)}p.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const i=this.ctx,l=this.current.fillColor,d=this.current.patternFill;for(const a of s){const{data:f,width:p,height:v,transform:c}=a,r=this.cachedCanvases.getCanvas("maskCanvas",p,v),o=r.context;o.save();const E=this.getObject(f,a);Mt(o,E),o.globalCompositeOperation="source-in",o.fillStyle=d?l.getPattern(o,this,(0,$.getCurrentTransformInverse)(i),A.FILL):l,o.fillRect(0,0,p,v),o.restore(),i.save(),i.transform(...c),i.scale(1,-1),Dt(i,r.canvas,0,0,p,v,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const i=this.getObject(s);if(!i){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(s,i,l,d){if(!this.contentVisible)return;const a=this.getObject(s);if(!a){(0,n.warn)("Dependent image isn't ready yet");return}const f=a.width,p=a.height,v=[];for(let c=0,r=d.length;c<r;c+=2)v.push({transform:[i,0,0,l,d[c],d[c+1]],x:0,y:0,w:f,h:p});this.paintInlineImageXObjectGroup(a,v)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:i,width:l,height:d}=s,a=this.cachedCanvases.getCanvas("inlineImage",l,d),f=a.context;return f.filter=this.current.transferMaps,f.drawImage(i,0,0),f.filter="none",a.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const i=s.width,l=s.height,d=this.ctx;if(this.save(),!n.isNodeJS){const{filter:p}=d;p!=="none"&&p!==""&&(d.filter="none")}d.scale(1/i,-1/l);let a;if(s.bitmap)a=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)a=s;else{const p=this.cachedCanvases.getCanvas("inlineImage",i,l).context;_t(p,s),a=this.applyTransferMapsToCanvas(p)}const f=this._scaleImage(a,(0,$.getCurrentTransformInverse)(d));d.imageSmoothingEnabled=Kt((0,$.getCurrentTransform)(d),s.interpolate),Dt(d,f.img,0,0,f.paintWidth,f.paintHeight,0,-l,i,l),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,i){if(!this.contentVisible)return;const l=this.ctx;let d;if(s.bitmap)d=s.bitmap;else{const a=s.width,f=s.height,p=this.cachedCanvases.getCanvas("inlineImage",a,f).context;_t(p,s),d=this.applyTransferMapsToCanvas(p)}for(const a of i)l.save(),l.transform(...a.transform),l.scale(1,-1),Dt(l,d,a.x,a.y,a.w,a.h,0,-1,1,1),l.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,i){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,i){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const l=this.ctx;this.pendingClip&&(i||(this.pendingClip===le?l.clip("evenodd"):l.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),l.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,$.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const i=Math.abs(s[0]*s[3]-s[2]*s[1]),l=Math.hypot(s[0],s[2]),d=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(l,d)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a:i,b:l,c:d,d:a}=this.ctx.getTransform();let f,p;if(l===0&&d===0){const v=Math.abs(i),c=Math.abs(a);if(v===c)if(s===0)f=p=1/v;else{const r=v*s;f=p=r<1?1/r:1}else if(s===0)f=1/v,p=1/c;else{const r=v*s,o=c*s;f=r<1?1/r:1,p=o<1?1/o:1}}else{const v=Math.abs(i*a-l*d),c=Math.hypot(i,l),r=Math.hypot(d,a);if(s===0)f=r/v,p=c/v;else{const o=s*v;f=r>o?r/o:1,p=c>o?c/o:1}}this._cachedScaleForStroking[0]=f,this._cachedScaleForStroking[1]=p}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:i}=this,{lineWidth:l}=this.current,[d,a]=this.getScaleForStroking();if(i.lineWidth=l||1,d===1&&a===1){i.stroke();return}const f=i.getLineDash();if(s&&i.save(),i.scale(d,a),f.length>0){const p=Math.max(d,a);i.setLineDash(f.map(v=>v/p)),i.lineDashOffset/=p}i.stroke(),s&&i.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};ae=new WeakSet,Cn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ee=new WeakSet,Mn=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const i=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}};let ve=ne;for(const tt in n.OPS)ve.prototype[tt]!==void 0&&(ve.prototype[n.OPS[tt]]=ve.prototype[tt])},419:(g,H,m)=>{var Pt,Et,Q,gt,kt,Rt,qt,Ys,ie,Js,de,Qs,ve,Ln,ae,Wi,ee,Ki,ne,bi,s,Ai;m.d(H,{DOMCMapReaderFactory:()=>C,DOMCanvasFactory:()=>O,DOMFilterFactory:()=>st,DOMSVGFactory:()=>R,DOMStandardFontDataFactory:()=>W,PDFDateString:()=>j,PageViewport:()=>w,PixelsPerInch:()=>D,RenderingCancelledException:()=>N,StatTimer:()=>x,fetchData:()=>M,getColorValues:()=>Dt,getCurrentTransform:()=>Tt,getCurrentTransformInverse:()=>Ot,getFilenameFromUrl:()=>at,getPdfFilenameFromUrl:()=>J,getRGB:()=>vt,getXfaPageViewport:()=>Z,isDataScheme:()=>B,isPdfFile:()=>K,isValidFetchUrl:()=>V,noContextMenu:()=>F,setLayerDimensions:()=>_t});var n=m(583),$=m(292);const A="http://www.w3.org/2000/svg",Mt=class Mt{};me(Mt,"CSS",96),me(Mt,"PDF",72),me(Mt,"PDF_TO_CSS_UNITS",Mt.CSS/Mt.PDF);let D=Mt;class st extends n.BaseFilterFactory{constructor({docId:a,ownerDocument:f=globalThis.document}={}){super();h(this,qt);h(this,ie);h(this,de);h(this,ve);h(this,ae);h(this,ee);h(this,ne);h(this,s);h(this,Pt,void 0);h(this,Et,void 0);h(this,Q,void 0);h(this,gt,void 0);h(this,kt,void 0);h(this,Rt,0);T(this,Q,a),T(this,gt,f)}addFilter(a){if(!a)return"none";let f=t(this,qt,Ys).get(a);if(f)return f;let p,v,c,r;if(a.length===1){const G=a[0],rt=new Array(256);for(let ot=0;ot<256;ot++)rt[ot]=G[ot]/255;r=p=v=c=rt.join(",")}else{const[G,rt,ot]=a,yt=new Array(256),At=new Array(256),ut=new Array(256);for(let St=0;St<256;St++)yt[St]=G[St]/255,At[St]=rt[St]/255,ut[St]=ot[St]/255;p=yt.join(","),v=At.join(","),c=ut.join(","),r=`${p}${v}${c}`}if(f=t(this,qt,Ys).get(r),f)return t(this,qt,Ys).set(a,f),f;const o=`g_${t(this,Q)}_transfer_map_${fs(this,Rt)._++}`,E=`url(#${o})`;t(this,qt,Ys).set(a,E),t(this,qt,Ys).set(r,E);const U=y(this,ae,Wi).call(this,o);return y(this,ne,bi).call(this,p,v,c,U),E}addHCMFilter(a,f){var yt;const p=`${a}-${f}`,v="base";let c=t(this,ie,Js).get(v);if((c==null?void 0:c.key)===p||(c?((yt=c.filter)==null||yt.remove(),c.key=p,c.url="none",c.filter=null):(c={key:p,url:"none",filter:null},t(this,ie,Js).set(v,c)),!a||!f))return c.url;const r=y(this,s,Ai).call(this,a);a=$.Util.makeHexColor(...r);const o=y(this,s,Ai).call(this,f);if(f=$.Util.makeHexColor(...o),t(this,de,Qs).style.color="",a==="#000000"&&f==="#ffffff"||a===f)return c.url;const E=new Array(256);for(let At=0;At<=255;At++){const ut=At/255;E[At]=ut<=.03928?ut/12.92:((ut+.055)/1.055)**2.4}const U=E.join(","),G=`g_${t(this,Q)}_hcm_filter`,rt=c.filter=y(this,ae,Wi).call(this,G);y(this,ne,bi).call(this,U,U,U,rt),y(this,ve,Ln).call(this,rt);const ot=(At,ut)=>{const St=r[At]/255,S=o[At]/255,X=new Array(ut+1);for(let nt=0;nt<=ut;nt++)X[nt]=St+nt/ut*(S-St);return X.join(",")};return y(this,ne,bi).call(this,ot(0,5),ot(1,5),ot(2,5),rt),c.url=`url(#${G})`,c.url}addHighlightHCMFilter(a,f,p,v,c){var S;const r=`${f}-${p}-${v}-${c}`;let o=t(this,ie,Js).get(a);if((o==null?void 0:o.key)===r||(o?((S=o.filter)==null||S.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},t(this,ie,Js).set(a,o)),!f||!p))return o.url;const[E,U]=[f,p].map(y(this,s,Ai).bind(this));let G=Math.round(.2126*E[0]+.7152*E[1]+.0722*E[2]),rt=Math.round(.2126*U[0]+.7152*U[1]+.0722*U[2]),[ot,yt]=[v,c].map(y(this,s,Ai).bind(this));rt<G&&([G,rt,ot,yt]=[rt,G,yt,ot]),t(this,de,Qs).style.color="";const At=(X,nt,I)=>{const u=new Array(256),q=(rt-G)/I,z=X/255,lt=(nt-X)/(255*I);let ft=0;for(let Ct=0;Ct<=I;Ct++){const Ft=Math.round(G+Ct*q),te=z+Ct*lt;for(let re=ft;re<=Ft;re++)u[re]=te;ft=Ft+1}for(let Ct=ft;Ct<256;Ct++)u[Ct]=u[ft-1];return u.join(",")},ut=`g_${t(this,Q)}_hcm_${a}_filter`,St=o.filter=y(this,ae,Wi).call(this,ut);return y(this,ve,Ln).call(this,St),y(this,ne,bi).call(this,At(ot[0],yt[0],5),At(ot[1],yt[1],5),At(ot[2],yt[2],5),St),o.url=`url(#${ut})`,o.url}destroy(a=!1){a&&t(this,ie,Js).size!==0||(t(this,Et)&&(t(this,Et).parentNode.parentNode.remove(),T(this,Et,null)),t(this,Pt)&&(t(this,Pt).clear(),T(this,Pt,null)),T(this,Rt,0))}}Pt=new WeakMap,Et=new WeakMap,Q=new WeakMap,gt=new WeakMap,kt=new WeakMap,Rt=new WeakMap,qt=new WeakSet,Ys=function(){return t(this,Pt)||T(this,Pt,new Map)},ie=new WeakSet,Js=function(){return t(this,kt)||T(this,kt,new Map)},de=new WeakSet,Qs=function(){if(!t(this,Et)){const a=t(this,gt).createElement("div"),{style:f}=a;f.visibility="hidden",f.contain="strict",f.width=f.height=0,f.position="absolute",f.top=f.left=0,f.zIndex=-1;const p=t(this,gt).createElementNS(A,"svg");p.setAttribute("width",0),p.setAttribute("height",0),T(this,Et,t(this,gt).createElementNS(A,"defs")),a.append(p),p.append(t(this,Et)),t(this,gt).body.append(a)}return t(this,Et)},ve=new WeakSet,Ln=function(a){const f=t(this,gt).createElementNS(A,"feColorMatrix");f.setAttribute("type","matrix"),f.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),a.append(f)},ae=new WeakSet,Wi=function(a){const f=t(this,gt).createElementNS(A,"filter");return f.setAttribute("color-interpolation-filters","sRGB"),f.setAttribute("id",a),t(this,de,Qs).append(f),f},ee=new WeakSet,Ki=function(a,f,p){const v=t(this,gt).createElementNS(A,f);v.setAttribute("type","discrete"),v.setAttribute("tableValues",p),a.append(v)},ne=new WeakSet,bi=function(a,f,p,v){const c=t(this,gt).createElementNS(A,"feComponentTransfer");v.append(c),y(this,ee,Ki).call(this,c,"feFuncR",a),y(this,ee,Ki).call(this,c,"feFuncG",f),y(this,ee,Ki).call(this,c,"feFuncB",p)},s=new WeakSet,Ai=function(a){return t(this,de,Qs).style.color=a,vt(getComputedStyle(t(this,de,Qs)).getPropertyValue("color"))};class O extends n.BaseCanvasFactory{constructor({ownerDocument:d=globalThis.document}={}){super(),this._document=d}_createCanvas(d,a){const f=this._document.createElement("canvas");return f.width=d,f.height=a,f}}async function M(l,d="text"){if(V(l,document.baseURI)){const a=await fetch(l);if(!a.ok)throw new Error(a.statusText);switch(d){case"arraybuffer":return a.arrayBuffer();case"blob":return a.blob();case"json":return a.json()}return a.text()}return new Promise((a,f)=>{const p=new XMLHttpRequest;p.open("GET",l,!0),p.responseType=d,p.onreadystatechange=()=>{if(p.readyState===XMLHttpRequest.DONE){if(p.status===200||p.status===0){switch(d){case"arraybuffer":case"blob":case"json":a(p.response);return}a(p.responseText);return}f(new Error(p.statusText))}},p.send(null)})}class C extends n.BaseCMapReaderFactory{_fetchData(d,a){return M(d,this.isCompressed?"arraybuffer":"text").then(f=>({cMapData:f instanceof ArrayBuffer?new Uint8Array(f):(0,$.stringToBytes)(f),compressionType:a}))}}class W extends n.BaseStandardFontDataFactory{_fetchData(d){return M(d,"arraybuffer").then(a=>new Uint8Array(a))}}class R extends n.BaseSVGFactory{_createSVG(d){return document.createElementNS(A,d)}}class w{constructor({viewBox:d,scale:a,rotation:f,offsetX:p=0,offsetY:v=0,dontFlip:c=!1}){this.viewBox=d,this.scale=a,this.rotation=f,this.offsetX=p,this.offsetY=v;const r=(d[2]+d[0])/2,o=(d[3]+d[1])/2;let E,U,G,rt;switch(f%=360,f<0&&(f+=360),f){case 180:E=-1,U=0,G=0,rt=1;break;case 90:E=0,U=1,G=1,rt=0;break;case 270:E=0,U=-1,G=-1,rt=0;break;case 0:E=1,U=0,G=0,rt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(G=-G,rt=-rt);let ot,yt,At,ut;E===0?(ot=Math.abs(o-d[1])*a+p,yt=Math.abs(r-d[0])*a+v,At=(d[3]-d[1])*a,ut=(d[2]-d[0])*a):(ot=Math.abs(r-d[0])*a+p,yt=Math.abs(o-d[1])*a+v,At=(d[2]-d[0])*a,ut=(d[3]-d[1])*a),this.transform=[E*a,U*a,G*a,rt*a,ot-E*a*r-G*a*o,yt-U*a*r-rt*a*o],this.width=At,this.height=ut}get rawDims(){const{viewBox:d}=this;return(0,$.shadow)(this,"rawDims",{pageWidth:d[2]-d[0],pageHeight:d[3]-d[1],pageX:d[0],pageY:d[1]})}clone({scale:d=this.scale,rotation:a=this.rotation,offsetX:f=this.offsetX,offsetY:p=this.offsetY,dontFlip:v=!1}={}){return new w({viewBox:this.viewBox.slice(),scale:d,rotation:a,offsetX:f,offsetY:p,dontFlip:v})}convertToViewportPoint(d,a){return $.Util.applyTransform([d,a],this.transform)}convertToViewportRectangle(d){const a=$.Util.applyTransform([d[0],d[1]],this.transform),f=$.Util.applyTransform([d[2],d[3]],this.transform);return[a[0],a[1],f[0],f[1]]}convertToPdfPoint(d,a){return $.Util.applyInverseTransform([d,a],this.transform)}}class N extends $.BaseException{constructor(d,a=0){super(d,"RenderingCancelledException"),this.extraDelay=a}}function B(l){const d=l.length;let a=0;for(;a<d&&l[a].trim()==="";)a++;return l.substring(a,a+5).toLowerCase()==="data:"}function K(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function at(l,d=!1){return d||([l]=l.split(/[#?]/,1)),l.substring(l.lastIndexOf("/")+1)}function J(l,d="document.pdf"){if(typeof l!="string")return d;if(B(l))return(0,$.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),d;const a=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,f=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,p=a.exec(l);let v=f.exec(p[1])||f.exec(p[2])||f.exec(p[3]);if(v&&(v=v[0],v.includes("%")))try{v=f.exec(decodeURIComponent(v))[0]}catch{}return v||d}class x{constructor(){me(this,"started",Object.create(null));me(this,"times",[])}time(d){d in this.started&&(0,$.warn)(`Timer is already running for ${d}`),this.started[d]=Date.now()}timeEnd(d){d in this.started||(0,$.warn)(`Timer has not been started for ${d}`),this.times.push({name:d,start:this.started[d],end:Date.now()}),delete this.started[d]}toString(){const d=[];let a=0;for(const{name:f}of this.times)a=Math.max(f.length,a);for(const{name:f,start:p,end:v}of this.times)d.push(`${f.padEnd(a)} ${v-p}ms
`);return d.join("")}}function V(l,d){try{const{protocol:a}=d?new URL(l,d):new URL(l);return a==="http:"||a==="https:"}catch{return!1}}function F(l){l.preventDefault()}let P;class j{static toDateObject(d){if(!d||typeof d!="string")return null;P||(P=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const a=P.exec(d);if(!a)return null;const f=parseInt(a[1],10);let p=parseInt(a[2],10);p=p>=1&&p<=12?p-1:0;let v=parseInt(a[3],10);v=v>=1&&v<=31?v:1;let c=parseInt(a[4],10);c=c>=0&&c<=23?c:0;let r=parseInt(a[5],10);r=r>=0&&r<=59?r:0;let o=parseInt(a[6],10);o=o>=0&&o<=59?o:0;const E=a[7]||"Z";let U=parseInt(a[8],10);U=U>=0&&U<=23?U:0;let G=parseInt(a[9],10)||0;return G=G>=0&&G<=59?G:0,E==="-"?(c+=U,r+=G):E==="+"&&(c-=U,r-=G),new Date(Date.UTC(f,p,v,c,r,o))}}function Z(l,{scale:d=1,rotation:a=0}){const{width:f,height:p}=l.attributes.style,v=[0,0,parseInt(f),parseInt(p)];return new w({viewBox:v,scale:d,rotation:a})}function vt(l){if(l.startsWith("#")){const d=parseInt(l.slice(1),16);return[(d&16711680)>>16,(d&65280)>>8,d&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(d=>parseInt(d)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(d=>parseInt(d)).slice(0,3):((0,$.warn)(`Not a valid color format: "${l}"`),[0,0,0])}function Dt(l){const d=document.createElement("span");d.style.visibility="hidden",document.body.append(d);for(const a of l.keys()){d.style.color=a;const f=window.getComputedStyle(d).color;l.set(a,vt(f))}d.remove()}function Tt(l){const{a:d,b:a,c:f,d:p,e:v,f:c}=l.getTransform();return[d,a,f,p,v,c]}function Ot(l){const{a:d,b:a,c:f,d:p,e:v,f:c}=l.getTransform().invertSelf();return[d,a,f,p,v,c]}function _t(l,d,a=!1,f=!0){if(d instanceof w){const{pageWidth:p,pageHeight:v}=d.rawDims,{style:c}=l,r=$.FeatureTest.isCSSRoundSupported,o=`var(--scale-factor) * ${p}px`,E=`var(--scale-factor) * ${v}px`,U=r?`round(${o}, 1px)`:`calc(${o})`,G=r?`round(${E}, 1px)`:`calc(${E})`;!a||d.rotation%180===0?(c.width=U,c.height=G):(c.width=G,c.height=U)}f&&l.setAttribute("data-main-rotation",d.rotation)}},47:(g,H,m)=>{var D,st,O,M,C,Pn,R,kn,N,$r;m.d(H,{DrawLayer:()=>A});var n=m(419),$=m(292);const K=class K{constructor({pageIndex:J}){h(this,R);h(this,N);h(this,D,null);h(this,st,0);h(this,O,new Map);h(this,M,new Map);this.pageIndex=J}setParent(J){if(!t(this,D)){T(this,D,J);return}if(t(this,D)!==J){if(t(this,O).size>0)for(const x of t(this,O).values())x.remove(),J.append(x);T(this,D,J)}}static get _svgFactory(){return(0,$.shadow)(this,"_svgFactory",new n.DOMSVGFactory)}highlight(J,x,V,F=!1){const P=fs(this,st)._++,j=y(this,R,kn).call(this,J.box);j.classList.add("highlight"),J.free&&j.classList.add("free");const Z=K._svgFactory.createElement("defs");j.append(Z);const vt=K._svgFactory.createElement("path");Z.append(vt);const Dt=`path_p${this.pageIndex}_${P}`;vt.setAttribute("id",Dt),vt.setAttribute("d",J.toSVGPath()),F&&t(this,M).set(P,vt);const Tt=y(this,N,$r).call(this,Z,Dt),Ot=K._svgFactory.createElement("use");return j.append(Ot),j.setAttribute("fill",x),j.setAttribute("fill-opacity",V),Ot.setAttribute("href",`#${Dt}`),t(this,O).set(P,j),{id:P,clipPathId:`url(#${Tt})`}}highlightOutline(J){const x=fs(this,st)._++,V=y(this,R,kn).call(this,J.box);V.classList.add("highlightOutline");const F=K._svgFactory.createElement("defs");V.append(F);const P=K._svgFactory.createElement("path");F.append(P);const j=`path_p${this.pageIndex}_${x}`;P.setAttribute("id",j),P.setAttribute("d",J.toSVGPath()),P.setAttribute("vector-effect","non-scaling-stroke");let Z;if(J.free){V.classList.add("free");const Tt=K._svgFactory.createElement("mask");F.append(Tt),Z=`mask_p${this.pageIndex}_${x}`,Tt.setAttribute("id",Z),Tt.setAttribute("maskUnits","objectBoundingBox");const Ot=K._svgFactory.createElement("rect");Tt.append(Ot),Ot.setAttribute("width","1"),Ot.setAttribute("height","1"),Ot.setAttribute("fill","white");const _t=K._svgFactory.createElement("use");Tt.append(_t),_t.setAttribute("href",`#${j}`),_t.setAttribute("stroke","none"),_t.setAttribute("fill","black"),_t.setAttribute("fill-rule","nonzero"),_t.classList.add("mask")}const vt=K._svgFactory.createElement("use");V.append(vt),vt.setAttribute("href",`#${j}`),Z&&vt.setAttribute("mask",`url(#${Z})`);const Dt=vt.cloneNode();return V.append(Dt),vt.classList.add("mainOutline"),Dt.classList.add("secondaryOutline"),t(this,O).set(x,V),x}finalizeLine(J,x){const V=t(this,M).get(J);t(this,M).delete(J),this.updateBox(J,x.box),V.setAttribute("d",x.toSVGPath())}updateLine(J,x){t(this,O).get(J).firstChild.firstChild.setAttribute("d",x.toSVGPath())}removeFreeHighlight(J){this.remove(J),t(this,M).delete(J)}updatePath(J,x){t(this,M).get(J).setAttribute("d",x.toSVGPath())}updateBox(J,x){var V;y(V=K,C,Pn).call(V,t(this,O).get(J),x)}show(J,x){t(this,O).get(J).classList.toggle("hidden",!x)}rotate(J,x){t(this,O).get(J).setAttribute("data-main-rotation",x)}changeColor(J,x){t(this,O).get(J).setAttribute("fill",x)}changeOpacity(J,x){t(this,O).get(J).setAttribute("fill-opacity",x)}addClass(J,x){t(this,O).get(J).classList.add(x)}removeClass(J,x){t(this,O).get(J).classList.remove(x)}remove(J){t(this,D)!==null&&(t(this,O).get(J).remove(),t(this,O).delete(J))}destroy(){T(this,D,null);for(const J of t(this,O).values())J.remove();t(this,O).clear()}};D=new WeakMap,st=new WeakMap,O=new WeakMap,M=new WeakMap,C=new WeakSet,Pn=function(J,{x=0,y:V=0,width:F=1,height:P=1}={}){const{style:j}=J;j.top=`${100*V}%`,j.left=`${100*x}%`,j.width=`${100*F}%`,j.height=`${100*P}%`},R=new WeakSet,kn=function(J){var V;const x=K._svgFactory.create(1,1,!0);return t(this,D).append(x),x.setAttribute("aria-hidden",!0),y(V=K,C,Pn).call(V,x,J),x},N=new WeakSet,$r=function(J,x){const V=K._svgFactory.createElement("clipPath");J.append(V);const F=`clip_${x}`;V.setAttribute("id",F),V.setAttribute("clipPathUnits","objectBoundingBox");const P=K._svgFactory.createElement("use");return V.append(P),P.setAttribute("href",`#${x}`),P.classList.add("clip"),F},h(K,C);let A=K},731:(g,H,m)=>{var K,at,J,x,V,F,P,j,Z,vt,Dt,Br,Ot,Ur,Mt,Vr,Et,Yi,gt,Ji,Rt,Qi,Kt,Gr,xe,Rn,le,jr,ae,Te,ee,Ee,ne,tt,s,i,l,d,a,f,p,v,c,r,o,E,U,G,In,ot,Dn,At,qr,St,zr,X,Xr,I,Fn,q,yi,lt,Zs,Ct,Wr,te,Zi,he,_i,_e,Kr,fe,Yr,se,Jr,b,Qr,ct,wt,bt,zt,Gt,Nt,Yt,Ut,xt,$t,Qt,ue,ce,we,Me,Qe,Zr,We,ta,Ve,ea,dt,sa,Bt,Nn,Zt,ia,be,On,He,na,qe,ra,Cs,aa,Ri,oa,Ii,ha,cs,Fs,ii,Hn,Hs,tn,$s,en,vs,ti,ni,$n,Bs,sn,Di,la,ri,Bn,Fi,ca,Ni,da,ai,Un,Us,nn,Ms,wi,Ge,je,bs,ds,As,Vs,as,Ls,os,is,oi,Ps,Ei,ks,Si,Gs,rn,hi,Vn,Oi,ua,Hi,pa,li,Gn,js,an,$i,ga,Rs,qs,hs,Is,us,ps,gs,Ze,ys,zs,Xs,Ye,pe,_s,Bi,fa,di,jn,ui,qn,pi,zn,Ws,on;m.d(H,{AnnotationEditorLayer:()=>B});var n=m(292),$=m(310),A=m(830),D=m(976);const st=/\r\n?|\n/g,Vt=class Vt extends $.AnnotationEditor{constructor(e){super({...e,name:"freeTextEditor"});h(this,Dt);h(this,Ot);h(this,Mt);h(this,Et);h(this,Rt);h(this,Kt);h(this,le);h(this,K,this.editorDivBlur.bind(this));h(this,at,this.editorDivFocus.bind(this));h(this,J,this.editorDivInput.bind(this));h(this,x,this.editorDivKeydown.bind(this));h(this,V,this.editorDivPaste.bind(this));h(this,F,void 0);h(this,P,"");h(this,j,`${this.id}-editor`);h(this,Z,void 0);h(this,vt,null);T(this,F,e.color||Vt._defaultColor||$.AnnotationEditor._defaultLineColor),T(this,Z,e.fontSize||Vt._defaultFontSize)}static get _keyboardManager(){const e=Vt.prototype,_=mt=>mt.isEmpty(),et=A.AnnotationEditorUIManager.TRANSLATE_SMALL,ht=A.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new A.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-et,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-ht,0],checker:_}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[et,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[ht,0],checker:_}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-et],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-ht],checker:_}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,et],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,ht],checker:_}]]))}static initialize(e,_){$.AnnotationEditor.initialize(e,_,{strings:["pdfjs-free-text-default-content"]});const et=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(et.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,_){switch(e){case n.AnnotationEditorParamsType.FREETEXT_SIZE:Vt._defaultFontSize=_;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:Vt._defaultColor=_;break}}updateParams(e,_){switch(e){case n.AnnotationEditorParamsType.FREETEXT_SIZE:y(this,Dt,Br).call(this,_);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:y(this,Ot,Ur).call(this,_);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,Vt._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,Vt._defaultColor||$.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,Z)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,F)]]}_translateEmpty(e,_){this._uiManager.translateSelectedEditors(e,_,!0)}getInitialTranslation(){const e=this.parentScale;return[-Vt._internalPadding*e,-(Vt._internalPadding+t(this,Z))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,x)),this.editorDiv.addEventListener("focus",t(this,at)),this.editorDiv.addEventListener("blur",t(this,K)),this.editorDiv.addEventListener("input",t(this,J)),this.editorDiv.addEventListener("paste",t(this,V)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,j)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,x)),this.editorDiv.removeEventListener("focus",t(this,at)),this.editorDiv.removeEventListener("blur",t(this,K)),this.editorDiv.removeEventListener("input",t(this,J)),this.editorDiv.removeEventListener("paste",t(this,V)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=t(this,P),_=T(this,P,y(this,Mt,Vr).call(this).trimEnd());if(e===_)return;const et=ht=>{if(T(this,P,ht),!ht){this.remove();return}y(this,Rt,Qi).call(this),this._uiManager.rebuild(this),y(this,Et,Yi).call(this)};this.addCommands({cmd:()=>{et(_)},undo:()=>{et(e)},mustExec:!1}),y(this,Et,Yi).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Vt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,_;this.width&&(e=this.x,_=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,j)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),$.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(ht=>{var mt;return(mt=this.editorDiv)==null?void 0:mt.setAttribute("default-content",ht)}),this.editorDiv.contentEditable=!0;const{style:et}=this.editorDiv;if(et.fontSize=`calc(${t(this,Z)}px * var(--scale-factor))`,et.color=t(this,F),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,A.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ht,mt]=this.parentDimensions;if(this.annotationElementId){const{position:It}=t(this,vt);let[jt,Lt]=this.getInitialTranslation();[jt,Lt]=this.pageTranslationToScreen(jt,Lt);const[Wt,Xt]=this.pageDimensions,[Ae,ye]=this.pageTranslation;let Se,Le;switch(this.rotation){case 0:Se=e+(It[0]-Ae)/Wt,Le=_+this.height-(It[1]-ye)/Xt;break;case 90:Se=e+(It[0]-Ae)/Wt,Le=_-(It[1]-ye)/Xt,[jt,Lt]=[Lt,-jt];break;case 180:Se=e-this.width+(It[0]-Ae)/Wt,Le=_-(It[1]-ye)/Xt,[jt,Lt]=[-jt,-Lt];break;case 270:Se=e+(It[0]-Ae-this.height*Xt)/Wt,Le=_+(It[1]-ye-this.width*Wt)/Xt,[jt,Lt]=[-Lt,jt];break}this.setAt(Se*ht,Le*mt,jt,Lt)}else this.setAt(e*ht,_*mt,this.width*ht,this.height*mt);y(this,Rt,Qi).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var Se,Le,Ue;const _=e.clipboardData||window.clipboardData,{types:et}=_;if(et.length===1&&et[0]==="text/plain")return;e.preventDefault();const ht=y(Se=Vt,xe,Rn).call(Se,_.getData("text")||"").replaceAll(st,`
`);if(!ht)return;const mt=window.getSelection();if(!mt.rangeCount)return;this.editorDiv.normalize(),mt.deleteFromDocument();const It=mt.getRangeAt(0);if(!ht.includes(`
`)){It.insertNode(document.createTextNode(ht)),this.editorDiv.normalize(),mt.collapseToStart();return}const{startContainer:jt,startOffset:Lt}=It,Wt=[],Xt=[];if(jt.nodeType===Node.TEXT_NODE){const Fe=jt.parentElement;if(Xt.push(jt.nodeValue.slice(Lt).replaceAll(st,"")),Fe!==this.editorDiv){let Be=Wt;for(const $e of this.editorDiv.childNodes){if($e===Fe){Be=Xt;continue}Be.push(y(Le=Vt,gt,Ji).call(Le,$e))}}Wt.push(jt.nodeValue.slice(0,Lt).replaceAll(st,""))}else if(jt===this.editorDiv){let Fe=Wt,Be=0;for(const $e of this.editorDiv.childNodes)Be++===Lt&&(Fe=Xt),Fe.push(y(Ue=Vt,gt,Ji).call(Ue,$e))}T(this,P,`${Wt.join(`
`)}${ht}${Xt.join(`
`)}`),y(this,Rt,Qi).call(this);const Ae=new Range;let ye=Wt.reduce((Fe,Be)=>Fe+Be.length,0);for(const{firstChild:Fe}of this.editorDiv.childNodes)if(Fe.nodeType===Node.TEXT_NODE){const Be=Fe.nodeValue.length;if(ye<=Be){Ae.setStart(Fe,ye),Ae.setEnd(Fe,ye);break}ye-=Be}mt.removeAllRanges(),mt.addRange(Ae)}get contentDiv(){return this.editorDiv}static deserialize(e,_,et){var It;let ht=null;if(e instanceof D.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:jt,fontColor:Lt},rect:Wt,rotation:Xt,id:Ae},textContent:ye,textPosition:Se,parent:{page:{pageNumber:Le}}}=e;if(!ye||ye.length===0)return null;ht=e={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(Lt),fontSize:jt,value:ye.join(`
`),position:Se,pageIndex:Le-1,rect:Wt,rotation:Xt,id:Ae,deleted:!1}}const mt=super.deserialize(e,_,et);return T(mt,Z,e.fontSize),T(mt,F,n.Util.makeHexColor(...e.color)),T(mt,P,y(It=Vt,xe,Rn).call(It,e.value)),mt.annotationElementId=e.id||null,T(mt,vt,ht),mt}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const _=Vt._internalPadding*this.parentScale,et=this.getRect(_,_),ht=$.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,F)),mt={annotationType:n.AnnotationEditorType.FREETEXT,color:ht,fontSize:t(this,Z),value:y(this,Kt,Gr).call(this),pageIndex:this.pageIndex,rect:et,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?mt:this.annotationElementId&&!y(this,le,jr).call(this,mt)?null:(mt.id=this.annotationElementId,mt)}};K=new WeakMap,at=new WeakMap,J=new WeakMap,x=new WeakMap,V=new WeakMap,F=new WeakMap,P=new WeakMap,j=new WeakMap,Z=new WeakMap,vt=new WeakMap,Dt=new WeakSet,Br=function(e){const _=ht=>{this.editorDiv.style.fontSize=`calc(${ht}px * var(--scale-factor))`,this.translate(0,-(ht-t(this,Z))*this.parentScale),T(this,Z,ht),y(this,Et,Yi).call(this)},et=t(this,Z);this.addCommands({cmd:_.bind(this,e),undo:_.bind(this,et),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Ot=new WeakSet,Ur=function(e){const _=ht=>{T(this,F,this.editorDiv.style.color=ht)},et=t(this,F);this.addCommands({cmd:_.bind(this,e),undo:_.bind(this,et),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Mt=new WeakSet,Vr=function(){var _;const e=[];this.editorDiv.normalize();for(const et of this.editorDiv.childNodes)e.push(y(_=Vt,gt,Ji).call(_,et));return e.join(`
`)},Et=new WeakSet,Yi=function(){const[e,_]=this.parentDimensions;let et;if(this.isAttachedToDOM)et=this.div.getBoundingClientRect();else{const{currentLayer:ht,div:mt}=this,It=mt.style.display;mt.style.display="hidden",ht.div.append(this.div),et=mt.getBoundingClientRect(),mt.remove(),mt.style.display=It}this.rotation%180===this.parentRotation%180?(this.width=et.width/e,this.height=et.height/_):(this.width=et.height/e,this.height=et.width/_),this.fixAndSetPosition()},gt=new WeakSet,Ji=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(st,"")},Rt=new WeakSet,Qi=function(){if(this.editorDiv.replaceChildren(),!!t(this,P))for(const e of t(this,P).split(`
`)){const _=document.createElement("div");_.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(_)}},Kt=new WeakSet,Gr=function(){return t(this,P).replaceAll("\xA0"," ")},xe=new WeakSet,Rn=function(e){return e.replaceAll(" ","\xA0")},le=new WeakSet,jr=function(e){const{value:_,fontSize:et,color:ht,pageIndex:mt}=t(this,vt);return this._hasBeenMoved||e.value!==_||e.fontSize!==et||e.color.some((It,jt)=>It!==ht[jt])||e.pageIndex!==mt},h(Vt,gt),h(Vt,xe),me(Vt,"_freeTextDefaultContent",""),me(Vt,"_internalPadding",0),me(Vt,"_defaultColor",null),me(Vt,"_defaultFontSize",10),me(Vt,"_type","freetext"),me(Vt,"_editorType",n.AnnotationEditorType.FREETEXT);let O=Vt;var M=m(61),C=m(259),W=m(419);const it=class it extends $.AnnotationEditor{constructor(e){super({...e,name:"highlightEditor"});h(this,G);h(this,ot);h(this,At);h(this,St);h(this,X);h(this,I);h(this,q);h(this,Ct);h(this,te);h(this,he);h(this,_e);h(this,fe);h(this,ae,null);h(this,Te,0);h(this,ee,void 0);h(this,Ee,null);h(this,ne,null);h(this,tt,null);h(this,s,null);h(this,i,0);h(this,l,null);h(this,d,null);h(this,a,null);h(this,f,!1);h(this,p,y(this,Ct,Wr).bind(this));h(this,v,null);h(this,c,void 0);h(this,r,null);h(this,o,"");h(this,E,void 0);h(this,U,"");this.color=e.color||it._defaultColor,T(this,E,e.thickness||it._defaultThickness),T(this,c,e.opacity||it._defaultOpacity),T(this,ee,e.boxes||null),T(this,U,e.methodOfCreation||""),T(this,o,e.text||""),this._isDraggable=!1,e.highlightId>-1?(T(this,f,!0),y(this,ot,Dn).call(this,e),y(this,q,yi).call(this)):(T(this,ae,e.anchorNode),T(this,Te,e.anchorOffset),T(this,s,e.focusNode),T(this,i,e.focusOffset),y(this,G,In).call(this),y(this,q,yi).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=it.prototype;return(0,n.shadow)(this,"_keyboardManager",new A.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:t(this,f)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:t(this,E),methodOfCreation:t(this,U)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,_){var et;$.AnnotationEditor.initialize(e,_),it._defaultColor||(it._defaultColor=((et=_.highlightColors)==null?void 0:et.values().next().value)||"#fff066")}static updateDefaultParams(e,_){switch(e){case n.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:it._defaultColor=_;break;case n.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:it._defaultThickness=_;break}}translateInPage(e,_){}get toolbarPosition(){return t(this,v)}updateParams(e,_){switch(e){case n.AnnotationEditorParamsType.HIGHLIGHT_COLOR:y(this,At,qr).call(this,_);break;case n.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:y(this,St,zr).call(this,_);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,it._defaultColor],[n.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,it._defaultThickness]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||it._defaultColor],[n.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,t(this,E)||it._defaultThickness],[n.AnnotationEditorParamsType.HIGHLIGHT_FREE,t(this,f)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(T(this,ne,new C.ColorPicker({editor:this})),e.addColorPicker(t(this,ne))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(y(this,he,_i).call(this))}getBaseTranslation(){return[0,0]}getRect(e,_){return super.getRect(e,_,y(this,he,_i).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){y(this,I,Fn).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(y(this,q,yi).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var et;let _=!1;this.parent&&!e?y(this,I,Fn).call(this):e&&(y(this,q,yi).call(this,e),_=!this.parent&&((et=this.div)==null?void 0:et.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),_&&this.select()}rotate(e){var ht,mt,It;const{drawLayer:_}=this.parent;let et;t(this,f)?(e=(e-this.rotation+360)%360,et=y(ht=it,lt,Zs).call(ht,t(this,d).box,e)):et=y(mt=it,lt,Zs).call(mt,this,e),_.rotate(t(this,a),e),_.rotate(t(this,r),e),_.updateBox(t(this,a),et),_.updateBox(t(this,r),y(It=it,lt,Zs).call(It,t(this,tt).box,e))}render(){if(this.div)return this.div;const e=super.render();t(this,o)&&(e.setAttribute("aria-label",t(this,o)),e.setAttribute("role","mark")),t(this,f)?e.classList.add("free"):this.div.addEventListener("keydown",t(this,p));const _=T(this,l,document.createElement("div"));e.append(_),_.setAttribute("aria-hidden","true"),_.className="internal",_.style.clipPath=t(this,Ee);const[et,ht]=this.parentDimensions;return this.setDims(this.width*et,this.height*ht),(0,A.bindEvents)(this,t(this,l),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(t(this,r),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(t(this,r),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:y(this,te,Zi).call(this,!0);break;case 1:case 3:y(this,te,Zi).call(this,!1);break}}select(){var e,_;super.select(),t(this,r)&&((e=this.parent)==null||e.drawLayer.removeClass(t(this,r),"hovered"),(_=this.parent)==null||_.drawLayer.addClass(t(this,r),"selected"))}unselect(){var e;super.unselect(),t(this,r)&&((e=this.parent)==null||e.drawLayer.removeClass(t(this,r),"selected"),t(this,f)||y(this,te,Zi).call(this,!1))}get _mustFixPosition(){return!t(this,f)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(t(this,a),e),this.parent.drawLayer.show(t(this,r),e))}static startHighlighting(e,_,{target:et,x:ht,y:mt}){const{x:It,y:jt,width:Lt,height:Wt}=et.getBoundingClientRect(),Xt=Le=>{y(this,se,Jr).call(this,e,Le)},Ae={capture:!0,passive:!1},ye=Le=>{Le.preventDefault(),Le.stopPropagation()},Se=Le=>{et.removeEventListener("pointermove",Xt),window.removeEventListener("blur",Se),window.removeEventListener("pointerup",Se),window.removeEventListener("pointerdown",ye,Ae),window.removeEventListener("contextmenu",W.noContextMenu),y(this,b,Qr).call(this,e,Le)};window.addEventListener("blur",Se),window.addEventListener("pointerup",Se),window.addEventListener("pointerdown",ye,Ae),window.addEventListener("contextmenu",W.noContextMenu),et.addEventListener("pointermove",Xt),this._freeHighlight=new M.FreeOutliner({x:ht,y:mt},[It,jt,Lt,Wt],e.scale,this._defaultThickness/2,_,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,_,et){var Le;const ht=super.deserialize(e,_,et),{rect:[mt,It,jt,Lt],color:Wt,quadPoints:Xt}=e;ht.color=n.Util.makeHexColor(...Wt),T(ht,c,e.opacity);const[Ae,ye]=ht.pageDimensions;ht.width=(jt-mt)/Ae,ht.height=(Lt-It)/ye;const Se=T(ht,ee,[]);for(let Ue=0;Ue<Xt.length;Ue+=8)Se.push({x:(Xt[4]-jt)/Ae,y:(Lt-(1-Xt[Ue+5]))/ye,width:(Xt[Ue+2]-Xt[Ue])/Ae,height:(Xt[Ue+5]-Xt[Ue+1])/ye});return y(Le=ht,G,In).call(Le),ht}serialize(e=!1){if(this.isEmpty()||e)return null;const _=this.getRect(0,0),et=$.AnnotationEditor._colorManager.convert(this.color);return{annotationType:n.AnnotationEditorType.HIGHLIGHT,color:et,opacity:t(this,c),thickness:t(this,E),quadPoints:y(this,_e,Kr).call(this),outlines:y(this,fe,Yr).call(this,_),pageIndex:this.pageIndex,rect:_,rotation:y(this,he,_i).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};ae=new WeakMap,Te=new WeakMap,ee=new WeakMap,Ee=new WeakMap,ne=new WeakMap,tt=new WeakMap,s=new WeakMap,i=new WeakMap,l=new WeakMap,d=new WeakMap,a=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,c=new WeakMap,r=new WeakMap,o=new WeakMap,E=new WeakMap,U=new WeakMap,G=new WeakSet,In=function(){const e=new M.Outliner(t(this,ee),.001);T(this,d,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=t(this,d).box;const _=new M.Outliner(t(this,ee),.0025,.001,this._uiManager.direction==="ltr");T(this,tt,_.getOutlines());const{lastPoint:et}=t(this,tt).box;T(this,v,[(et[0]-this.x)/this.width,(et[1]-this.y)/this.height])},ot=new WeakSet,Dn=function({highlightOutlines:e,highlightId:_,clipPathId:et}){var Xt,Ae;if(T(this,d,e),T(this,tt,e.getNewOutline(t(this,E)/2+1.5,.0025)),_>=0)T(this,a,_),T(this,Ee,et),this.parent.drawLayer.finalizeLine(_,e),T(this,r,this.parent.drawLayer.highlightOutline(t(this,tt)));else if(this.parent){const ye=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(t(this,a),e),this.parent.drawLayer.updateBox(t(this,a),y(Xt=it,lt,Zs).call(Xt,t(this,d).box,(ye-this.rotation+360)%360)),this.parent.drawLayer.updateLine(t(this,r),t(this,tt)),this.parent.drawLayer.updateBox(t(this,r),y(Ae=it,lt,Zs).call(Ae,t(this,tt).box,ye))}const{x:mt,y:It,width:jt,height:Lt}=e.box;switch(this.rotation){case 0:this.x=mt,this.y=It,this.width=jt,this.height=Lt;break;case 90:{const[ye,Se]=this.parentDimensions;this.x=It,this.y=1-mt,this.width=jt*Se/ye,this.height=Lt*ye/Se;break}case 180:this.x=1-mt,this.y=1-It,this.width=jt,this.height=Lt;break;case 270:{const[ye,Se]=this.parentDimensions;this.x=1-It,this.y=mt,this.width=jt*Se/ye,this.height=Lt*ye/Se;break}}const{lastPoint:Wt}=t(this,tt).box;T(this,v,[(Wt[0]-mt)/jt,(Wt[1]-It)/Lt])},At=new WeakSet,qr=function(e){const _=ht=>{var mt,It;this.color=ht,(mt=this.parent)==null||mt.drawLayer.changeColor(t(this,a),ht),(It=t(this,ne))==null||It.updateColor(ht)},et=this.color;this.addCommands({cmd:_.bind(this,e),undo:_.bind(this,et),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},St=new WeakSet,zr=function(e){const _=t(this,E),et=ht=>{T(this,E,ht),y(this,X,Xr).call(this,ht)};this.addCommands({cmd:et.bind(this,e),undo:et.bind(this,_),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},X=new WeakSet,Xr=function(e){if(!t(this,f))return;y(this,ot,Dn).call(this,{highlightOutlines:t(this,d).getNewOutline(e/2)}),this.fixAndSetPosition();const[_,et]=this.parentDimensions;this.setDims(this.width*_,this.height*et)},I=new WeakSet,Fn=function(){t(this,a)===null||!this.parent||(this.parent.drawLayer.remove(t(this,a)),T(this,a,null),this.parent.drawLayer.remove(t(this,r)),T(this,r,null))},q=new WeakSet,yi=function(e=this.parent){t(this,a)===null&&({id:fs(this,a)._,clipPathId:fs(this,Ee)._}=e.drawLayer.highlight(t(this,d),this.color,t(this,c)),T(this,r,e.drawLayer.highlightOutline(t(this,tt))),t(this,l)&&(t(this,l).style.clipPath=t(this,Ee)))},lt=new WeakSet,Zs=function({x:e,y:_,width:et,height:ht},mt){switch(mt){case 90:return{x:1-_-ht,y:e,width:ht,height:et};case 180:return{x:1-e-et,y:1-_-ht,width:et,height:ht};case 270:return{x:_,y:1-e-et,width:ht,height:et}}return{x:e,y:_,width:et,height:ht}},Ct=new WeakSet,Wr=function(e){it._keyboardManager.exec(this,e)},te=new WeakSet,Zi=function(e){if(!t(this,ae))return;const _=window.getSelection();e?_.setPosition(t(this,ae),t(this,Te)):_.setPosition(t(this,s),t(this,i))},he=new WeakSet,_i=function(){return t(this,f)?this.rotation:0},_e=new WeakSet,Kr=function(){if(t(this,f))return null;const[e,_]=this.pageDimensions,et=t(this,ee),ht=new Array(et.length*8);let mt=0;for(const{x:It,y:jt,width:Lt,height:Wt}of et){const Xt=It*e,Ae=(1-jt-Wt)*_;ht[mt]=ht[mt+4]=Xt,ht[mt+1]=ht[mt+3]=Ae,ht[mt+2]=ht[mt+6]=Xt+Lt*e,ht[mt+5]=ht[mt+7]=Ae+Wt*_,mt+=8}return ht},fe=new WeakSet,Yr=function(e){return t(this,d).serialize(e,y(this,he,_i).call(this))},se=new WeakSet,Jr=function(e,_){this._freeHighlight.add(_)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},b=new WeakSet,Qr=function(e,_){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(_,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},h(it,lt),h(it,se),h(it,b),me(it,"_defaultColor",null),me(it,"_defaultOpacity",1),me(it,"_defaultThickness",12),me(it,"_l10nPromise"),me(it,"_type","highlight"),me(it,"_editorType",n.AnnotationEditorType.HIGHLIGHT),me(it,"_freeHighlightId",-1),me(it,"_freeHighlight",null),me(it,"_freeHighlightClipId","");let R=it;const Ne=class Ne extends $.AnnotationEditor{constructor(e){super({...e,name:"inkEditor"});h(this,Qe);h(this,We);h(this,Ve);h(this,dt);h(this,Bt);h(this,Zt);h(this,be);h(this,He);h(this,qe);h(this,Cs);h(this,Ri);h(this,Ii);h(this,cs);h(this,ii);h(this,Hs);h(this,$s);h(this,vs);h(this,ni);h(this,Bs);h(this,Ni);h(this,ai);h(this,Us);h(this,Ms);h(this,ct,0);h(this,wt,0);h(this,bt,this.canvasPointermove.bind(this));h(this,zt,this.canvasPointerleave.bind(this));h(this,Gt,this.canvasPointerup.bind(this));h(this,Nt,this.canvasPointerdown.bind(this));h(this,Yt,null);h(this,Ut,new Path2D);h(this,xt,!1);h(this,$t,!1);h(this,Qt,!1);h(this,ue,null);h(this,ce,0);h(this,we,0);h(this,Me,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,_){$.AnnotationEditor.initialize(e,_)}static updateDefaultParams(e,_){switch(e){case n.AnnotationEditorParamsType.INK_THICKNESS:Ne._defaultThickness=_;break;case n.AnnotationEditorParamsType.INK_COLOR:Ne._defaultColor=_;break;case n.AnnotationEditorParamsType.INK_OPACITY:Ne._defaultOpacity=_/100;break}}updateParams(e,_){switch(e){case n.AnnotationEditorParamsType.INK_THICKNESS:y(this,Qe,Zr).call(this,_);break;case n.AnnotationEditorParamsType.INK_COLOR:y(this,We,ta).call(this,_);break;case n.AnnotationEditorParamsType.INK_OPACITY:y(this,Ve,ea).call(this,_);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Ne._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Ne._defaultColor||$.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ne._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ne._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Ne._defaultColor||$.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ne._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(y(this,Hs,tn).call(this),y(this,$s,en).call(this)),this.isAttachedToDOM||(this.parent.add(this),y(this,vs,ti).call(this)),y(this,Ms,wi).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,Yt)&&(clearTimeout(t(this,Yt)),T(this,Yt,null)),t(this,ue).disconnect(),T(this,ue,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,_]=this.parentDimensions,et=this.width*e,ht=this.height*_;this.setDimensions(et,ht)}enableEditMode(){t(this,xt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,Nt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,Nt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,xt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),T(this,xt,!0),this.div.classList.add("disabled"),y(this,Ms,wi).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||t(this,xt)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),y(this,Zt,ia).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),y(this,be,On).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),y(this,ii,Hn).call(this,e)}canvasPointerleave(e){y(this,ii,Hn).call(this,e)}get isResizable(){return!this.isEmpty()&&t(this,xt)}render(){if(this.div)return this.div;let e,_;this.width&&(e=this.x,_=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[et,ht,mt,It]=y(this,dt,sa).call(this);if(this.setAt(et,ht,0,0),this.setDims(mt,It),y(this,Hs,tn).call(this),this.width){const[jt,Lt]=this.parentDimensions;this.setAspectRatio(this.width*jt,this.height*Lt),this.setAt(e*jt,_*Lt,this.width*jt,this.height*Lt),T(this,Qt,!0),y(this,vs,ti).call(this),this.setDims(this.width*jt,this.height*Lt),y(this,cs,Fs).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return y(this,$s,en).call(this),this.div}setDimensions(e,_){const et=Math.round(e),ht=Math.round(_);if(t(this,ce)===et&&t(this,we)===ht)return;T(this,ce,et),T(this,we,ht),this.canvas.style.visibility="hidden";const[mt,It]=this.parentDimensions;this.width=e/mt,this.height=_/It,this.fixAndSetPosition(),t(this,xt)&&y(this,ni,$n).call(this,e,_),y(this,vs,ti).call(this),y(this,cs,Fs).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,_,et){var Ue,Fe,Be;if(e instanceof D.InkAnnotationElement)return null;const ht=super.deserialize(e,_,et);ht.thickness=e.thickness,ht.color=n.Util.makeHexColor(...e.color),ht.opacity=e.opacity;const[mt,It]=ht.pageDimensions,jt=ht.width*mt,Lt=ht.height*It,Wt=ht.parentScale,Xt=e.thickness/2;T(ht,xt,!0),T(ht,ce,Math.round(jt)),T(ht,we,Math.round(Lt));const{paths:Ae,rect:ye,rotation:Se}=e;for(let{bezier:$e}of Ae){$e=y(Ue=Ne,Fi,ca).call(Ue,$e,ye,Se);const ls=[];ht.paths.push(ls);let gi=Wt*($e[0]-Xt),fi=Wt*($e[1]-Xt);for(let rs=2,An=$e.length;rs<An;rs+=6){const yn=Wt*($e[rs]-Xt),Vi=Wt*($e[rs+1]-Xt),Gi=Wt*($e[rs+2]-Xt),ji=Wt*($e[rs+3]-Xt),mi=Wt*($e[rs+4]-Xt),Ir=Wt*($e[rs+5]-Xt);ls.push([[gi,fi],[yn,Vi],[Gi,ji],[mi,Ir]]),gi=mi,fi=Ir}const Ui=y(this,Di,la).call(this,ls);ht.bezierPath2D.push(Ui)}const Le=y(Fe=ht,ai,Un).call(Fe);return T(ht,wt,Math.max($.AnnotationEditor.MIN_SIZE,Le[2]-Le[0])),T(ht,ct,Math.max($.AnnotationEditor.MIN_SIZE,Le[3]-Le[1])),y(Be=ht,ni,$n).call(Be,jt,Lt),ht}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),_=$.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:_,thickness:this.thickness,opacity:this.opacity,paths:y(this,Ni,da).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ct=new WeakMap,wt=new WeakMap,bt=new WeakMap,zt=new WeakMap,Gt=new WeakMap,Nt=new WeakMap,Yt=new WeakMap,Ut=new WeakMap,xt=new WeakMap,$t=new WeakMap,Qt=new WeakMap,ue=new WeakMap,ce=new WeakMap,we=new WeakMap,Me=new WeakMap,Qe=new WeakSet,Zr=function(e){const _=ht=>{this.thickness=ht,y(this,Ms,wi).call(this)},et=this.thickness;this.addCommands({cmd:_.bind(this,e),undo:_.bind(this,et),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},We=new WeakSet,ta=function(e){const _=ht=>{this.color=ht,y(this,cs,Fs).call(this)},et=this.color;this.addCommands({cmd:_.bind(this,e),undo:_.bind(this,et),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ve=new WeakSet,ea=function(e){const _=ht=>{this.opacity=ht,y(this,cs,Fs).call(this)};e/=100;const et=this.opacity;this.addCommands({cmd:_.bind(this,e),undo:_.bind(this,et),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},dt=new WeakSet,sa=function(){const{parentRotation:e,parentDimensions:[_,et]}=this;switch(e){case 90:return[0,et,et,_];case 180:return[_,et,_,et];case 270:return[_,0,et,_];default:return[0,0,_,et]}},Bt=new WeakSet,Nn=function(){const{ctx:e,color:_,opacity:et,thickness:ht,parentScale:mt,scaleFactor:It}=this;e.lineWidth=ht*mt/It,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${_}${(0,A.opacityToHex)(et)}`},Zt=new WeakSet,ia=function(e,_){this.canvas.addEventListener("contextmenu",W.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,zt)),this.canvas.addEventListener("pointermove",t(this,bt)),this.canvas.addEventListener("pointerup",t(this,Gt)),this.canvas.removeEventListener("pointerdown",t(this,Nt)),this.isEditing=!0,t(this,Qt)||(T(this,Qt,!0),y(this,vs,ti).call(this),this.thickness||(this.thickness=Ne._defaultThickness),this.color||(this.color=Ne._defaultColor||$.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ne._defaultOpacity)),this.currentPath.push([e,_]),T(this,$t,!1),y(this,Bt,Nn).call(this),T(this,Me,()=>{y(this,Cs,aa).call(this),t(this,Me)&&window.requestAnimationFrame(t(this,Me))}),window.requestAnimationFrame(t(this,Me))},be=new WeakSet,On=function(e,_){const[et,ht]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===et&&_===ht)return;const mt=this.currentPath;let It=t(this,Ut);if(mt.push([e,_]),T(this,$t,!0),mt.length<=2){It.moveTo(...mt[0]),It.lineTo(e,_);return}mt.length===3&&(T(this,Ut,It=new Path2D),It.moveTo(...mt[0])),y(this,Ri,oa).call(this,It,...mt.at(-3),...mt.at(-2),e,_)},He=new WeakSet,na=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);t(this,Ut).lineTo(...e)},qe=new WeakSet,ra=function(e,_){T(this,Me,null),e=Math.min(Math.max(e,0),this.canvas.width),_=Math.min(Math.max(_,0),this.canvas.height),y(this,be,On).call(this,e,_),y(this,He,na).call(this);let et;if(this.currentPath.length!==1)et=y(this,Ii,ha).call(this);else{const Lt=[e,_];et=[[Lt,Lt.slice(),Lt.slice(),Lt]]}const ht=t(this,Ut),mt=this.currentPath;this.currentPath=[],T(this,Ut,new Path2D);const It=()=>{this.allRawPaths.push(mt),this.paths.push(et),this.bezierPath2D.push(ht),this._uiManager.rebuild(this)},jt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(y(this,Hs,tn).call(this),y(this,$s,en).call(this)),y(this,Ms,wi).call(this))};this.addCommands({cmd:It,undo:jt,mustExec:!0})},Cs=new WeakSet,aa=function(){if(!t(this,$t))return;T(this,$t,!1);const e=Math.ceil(this.thickness*this.parentScale),_=this.currentPath.slice(-3),et=_.map(It=>It[0]),ht=_.map(It=>It[1]);Math.min(...et)-e,Math.max(...et)+e,Math.min(...ht)-e,Math.max(...ht)+e;const{ctx:mt}=this;mt.save(),mt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const It of this.bezierPath2D)mt.stroke(It);mt.stroke(t(this,Ut)),mt.restore()},Ri=new WeakSet,oa=function(e,_,et,ht,mt,It,jt){const Lt=(_+ht)/2,Wt=(et+mt)/2,Xt=(ht+It)/2,Ae=(mt+jt)/2;e.bezierCurveTo(Lt+2*(ht-Lt)/3,Wt+2*(mt-Wt)/3,Xt+2*(ht-Xt)/3,Ae+2*(mt-Ae)/3,Xt,Ae)},Ii=new WeakSet,ha=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const _=[];let et,[ht,mt]=e[0];for(et=1;et<e.length-2;et++){const[ye,Se]=e[et],[Le,Ue]=e[et+1],Fe=(ye+Le)/2,Be=(Se+Ue)/2,$e=[ht+2*(ye-ht)/3,mt+2*(Se-mt)/3],ls=[Fe+2*(ye-Fe)/3,Be+2*(Se-Be)/3];_.push([[ht,mt],$e,ls,[Fe,Be]]),[ht,mt]=[Fe,Be]}const[It,jt]=e[et],[Lt,Wt]=e[et+1],Xt=[ht+2*(It-ht)/3,mt+2*(jt-mt)/3],Ae=[Lt+2*(It-Lt)/3,Wt+2*(jt-Wt)/3];return _.push([[ht,mt],Xt,Ae,[Lt,Wt]]),_},cs=new WeakSet,Fs=function(){if(this.isEmpty()){y(this,Bs,sn).call(this);return}y(this,Bt,Nn).call(this);const{canvas:e,ctx:_}=this;_.setTransform(1,0,0,1,0,0),_.clearRect(0,0,e.width,e.height),y(this,Bs,sn).call(this);for(const et of this.bezierPath2D)_.stroke(et)},ii=new WeakSet,Hn=function(e){this.canvas.removeEventListener("pointerleave",t(this,zt)),this.canvas.removeEventListener("pointermove",t(this,bt)),this.canvas.removeEventListener("pointerup",t(this,Gt)),this.canvas.addEventListener("pointerdown",t(this,Nt)),t(this,Yt)&&clearTimeout(t(this,Yt)),T(this,Yt,setTimeout(()=>{T(this,Yt,null),this.canvas.removeEventListener("contextmenu",W.noContextMenu)},10)),y(this,qe,ra).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Hs=new WeakSet,tn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},$s=new WeakSet,en=function(){T(this,ue,new ResizeObserver(e=>{const _=e[0].contentRect;_.width&&_.height&&this.setDimensions(_.width,_.height)})),t(this,ue).observe(this.div)},vs=new WeakSet,ti=function(){if(!t(this,Qt))return;const[e,_]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*_),y(this,Bs,sn).call(this)},ni=new WeakSet,$n=function(e,_){const et=y(this,Us,nn).call(this),ht=(e-et)/t(this,wt),mt=(_-et)/t(this,ct);this.scaleFactor=Math.min(ht,mt)},Bs=new WeakSet,sn=function(){const e=y(this,Us,nn).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Di=new WeakSet,la=function(e){const _=new Path2D;for(let et=0,ht=e.length;et<ht;et++){const[mt,It,jt,Lt]=e[et];et===0&&_.moveTo(...mt),_.bezierCurveTo(It[0],It[1],jt[0],jt[1],Lt[0],Lt[1])}return _},ri=new WeakSet,Bn=function(e,_,et){const[ht,mt,It,jt]=_;switch(et){case 0:for(let Lt=0,Wt=e.length;Lt<Wt;Lt+=2)e[Lt]+=ht,e[Lt+1]=jt-e[Lt+1];break;case 90:for(let Lt=0,Wt=e.length;Lt<Wt;Lt+=2){const Xt=e[Lt];e[Lt]=e[Lt+1]+ht,e[Lt+1]=Xt+mt}break;case 180:for(let Lt=0,Wt=e.length;Lt<Wt;Lt+=2)e[Lt]=It-e[Lt],e[Lt+1]+=mt;break;case 270:for(let Lt=0,Wt=e.length;Lt<Wt;Lt+=2){const Xt=e[Lt];e[Lt]=It-e[Lt+1],e[Lt+1]=jt-Xt}break;default:throw new Error("Invalid rotation")}return e},Fi=new WeakSet,ca=function(e,_,et){const[ht,mt,It,jt]=_;switch(et){case 0:for(let Lt=0,Wt=e.length;Lt<Wt;Lt+=2)e[Lt]-=ht,e[Lt+1]=jt-e[Lt+1];break;case 90:for(let Lt=0,Wt=e.length;Lt<Wt;Lt+=2){const Xt=e[Lt];e[Lt]=e[Lt+1]-mt,e[Lt+1]=Xt-ht}break;case 180:for(let Lt=0,Wt=e.length;Lt<Wt;Lt+=2)e[Lt]=It-e[Lt],e[Lt+1]-=mt;break;case 270:for(let Lt=0,Wt=e.length;Lt<Wt;Lt+=2){const Xt=e[Lt];e[Lt]=jt-e[Lt+1],e[Lt+1]=It-Xt}break;default:throw new Error("Invalid rotation")}return e},Ni=new WeakSet,da=function(e,_,et,ht){var Wt,Xt;const mt=[],It=this.thickness/2,jt=e*_+It,Lt=e*et+It;for(const Ae of this.paths){const ye=[],Se=[];for(let Le=0,Ue=Ae.length;Le<Ue;Le++){const[Fe,Be,$e,ls]=Ae[Le];if(Fe[0]===ls[0]&&Fe[1]===ls[1]&&Ue===1){const ji=e*Fe[0]+jt,mi=e*Fe[1]+Lt;ye.push(ji,mi),Se.push(ji,mi);break}const gi=e*Fe[0]+jt,fi=e*Fe[1]+Lt,Ui=e*Be[0]+jt,rs=e*Be[1]+Lt,An=e*$e[0]+jt,yn=e*$e[1]+Lt,Vi=e*ls[0]+jt,Gi=e*ls[1]+Lt;Le===0&&(ye.push(gi,fi),Se.push(gi,fi)),ye.push(Ui,rs,An,yn,Vi,Gi),Se.push(Ui,rs),Le===Ue-1&&Se.push(Vi,Gi)}mt.push({bezier:y(Wt=Ne,ri,Bn).call(Wt,ye,ht,this.rotation),points:y(Xt=Ne,ri,Bn).call(Xt,Se,ht,this.rotation)})}return mt},ai=new WeakSet,Un=function(){let e=1/0,_=-1/0,et=1/0,ht=-1/0;for(const mt of this.paths)for(const[It,jt,Lt,Wt]of mt){const Xt=n.Util.bezierBoundingBox(...It,...jt,...Lt,...Wt);e=Math.min(e,Xt[0]),et=Math.min(et,Xt[1]),_=Math.max(_,Xt[2]),ht=Math.max(ht,Xt[3])}return[e,et,_,ht]},Us=new WeakSet,nn=function(){return t(this,xt)?Math.ceil(this.thickness*this.parentScale):0},Ms=new WeakSet,wi=function(e=!1){if(this.isEmpty())return;if(!t(this,xt)){y(this,cs,Fs).call(this);return}const _=y(this,ai,Un).call(this),et=y(this,Us,nn).call(this);T(this,wt,Math.max($.AnnotationEditor.MIN_SIZE,_[2]-_[0])),T(this,ct,Math.max($.AnnotationEditor.MIN_SIZE,_[3]-_[1]));const ht=Math.ceil(et+t(this,wt)*this.scaleFactor),mt=Math.ceil(et+t(this,ct)*this.scaleFactor),[It,jt]=this.parentDimensions;this.width=ht/It,this.height=mt/jt,this.setAspectRatio(ht,mt);const Lt=this.translationX,Wt=this.translationY;this.translationX=-_[0],this.translationY=-_[1],y(this,vs,ti).call(this),y(this,cs,Fs).call(this),T(this,ce,ht),T(this,we,mt),this.setDims(ht,mt);const Xt=e?et/this.scaleFactor/2:0;this.translate(Lt-this.translationX-Xt,Wt-this.translationY-Xt)},h(Ne,Di),h(Ne,ri),h(Ne,Fi),me(Ne,"_defaultColor",null),me(Ne,"_defaultOpacity",1),me(Ne,"_defaultThickness",1),me(Ne,"_type","ink"),me(Ne,"_editorType",n.AnnotationEditorType.INK);let w=Ne;const ci=class ci extends $.AnnotationEditor{constructor(e){super({...e,name:"stampEditor"});h(this,Ps);h(this,ks);h(this,Gs);h(this,hi);h(this,Oi);h(this,Hi);h(this,li);h(this,js);h(this,$i);h(this,Ge,null);h(this,je,null);h(this,bs,null);h(this,ds,null);h(this,As,null);h(this,Vs,"");h(this,as,null);h(this,Ls,null);h(this,os,null);h(this,is,!1);h(this,oi,!1);T(this,ds,e.bitmapUrl),T(this,As,e.bitmapFile)}static initialize(e,_){$.AnnotationEditor.initialize(e,_)}static get supportedTypes(){const e=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",e.map(_=>`image/${_}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,_){_.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,_;t(this,je)&&(T(this,Ge,null),this._uiManager.imageManager.deleteId(t(this,je)),(e=t(this,as))==null||e.remove(),T(this,as,null),(_=t(this,Ls))==null||_.disconnect(),T(this,Ls,null),t(this,os)&&(clearTimeout(t(this,os)),T(this,os,null))),super.remove()}rebuild(){if(!this.parent){t(this,je)&&y(this,Gs,rn).call(this);return}super.rebuild(),this.div!==null&&(t(this,je)&&t(this,as)===null&&y(this,Gs,rn).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,bs)||t(this,Ge)||t(this,ds)||t(this,As)||t(this,je))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,_;if(this.width&&(e=this.x,_=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),t(this,Ge)?y(this,hi,Vn).call(this):y(this,Gs,rn).call(this),this.width){const[et,ht]=this.parentDimensions;this.setAt(e*et,_*ht,this.width*et,this.height*ht)}return this.div}getImageForAltText(){return t(this,as)}static deserialize(e,_,et){if(e instanceof D.StampAnnotationElement)return null;const ht=super.deserialize(e,_,et),{rect:mt,bitmapUrl:It,bitmapId:jt,isSvg:Lt,accessibilityData:Wt}=e;jt&&et.imageManager.isValidId(jt)?T(ht,je,jt):T(ht,ds,It),T(ht,is,Lt);const[Xt,Ae]=ht.pageDimensions;return ht.width=(mt[2]-mt[0])/Xt,ht.height=(mt[3]-mt[1])/Ae,Wt&&(ht.altTextData=Wt),ht}serialize(e=!1,_=null){if(this.isEmpty())return null;const et={annotationType:n.AnnotationEditorType.STAMP,bitmapId:t(this,je),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,is),structTreeParentId:this._structTreeParentId};if(e)return et.bitmapUrl=y(this,js,an).call(this,!0),et.accessibilityData=this.altTextData,et;const{decorative:ht,altText:mt}=this.altTextData;if(!ht&&mt&&(et.accessibilityData={type:"Figure",alt:mt}),_===null)return et;_.stamps||(_.stamps=new Map);const It=t(this,is)?(et.rect[2]-et.rect[0])*(et.rect[3]-et.rect[1]):null;if(!_.stamps.has(t(this,je)))_.stamps.set(t(this,je),{area:It,serialized:et}),et.bitmap=y(this,js,an).call(this,!1);else if(t(this,is)){const jt=_.stamps.get(t(this,je));It>jt.area&&(jt.area=It,jt.serialized.bitmap.close(),jt.serialized.bitmap=y(this,js,an).call(this,!1))}return et}};Ge=new WeakMap,je=new WeakMap,bs=new WeakMap,ds=new WeakMap,As=new WeakMap,Vs=new WeakMap,as=new WeakMap,Ls=new WeakMap,os=new WeakMap,is=new WeakMap,oi=new WeakMap,Ps=new WeakSet,Ei=function(e,_=!1){if(!e){this.remove();return}T(this,Ge,e.bitmap),_||(T(this,je,e.id),T(this,is,e.isSvg)),e.file&&T(this,Vs,e.file.name),y(this,hi,Vn).call(this)},ks=new WeakSet,Si=function(){T(this,bs,null),this._uiManager.enableWaiting(!1),t(this,as)&&this.div.focus()},Gs=new WeakSet,rn=function(){if(t(this,je)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,je)).then(_=>y(this,Ps,Ei).call(this,_,!0)).finally(()=>y(this,ks,Si).call(this));return}if(t(this,ds)){const _=t(this,ds);T(this,ds,null),this._uiManager.enableWaiting(!0),T(this,bs,this._uiManager.imageManager.getFromUrl(_).then(et=>y(this,Ps,Ei).call(this,et)).finally(()=>y(this,ks,Si).call(this)));return}if(t(this,As)){const _=t(this,As);T(this,As,null),this._uiManager.enableWaiting(!0),T(this,bs,this._uiManager.imageManager.getFromFile(_).then(et=>y(this,Ps,Ei).call(this,et)).finally(()=>y(this,ks,Si).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=ci.supportedTypesStr,T(this,bs,new Promise(_=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const et=await this._uiManager.imageManager.getFromFile(e.files[0]);y(this,Ps,Ei).call(this,et)}_()}),e.addEventListener("cancel",()=>{this.remove(),_()})}).finally(()=>y(this,ks,Si).call(this))),e.click()},hi=new WeakSet,Vn=function(){const{div:e}=this;let{width:_,height:et}=t(this,Ge);const[ht,mt]=this.pageDimensions,It=.75;if(this.width)_=this.width*ht,et=this.height*mt;else if(_>It*ht||et>It*mt){const Xt=Math.min(It*ht/_,It*mt/et);_*=Xt,et*=Xt}const[jt,Lt]=this.parentDimensions;this.setDims(_*jt/ht,et*Lt/mt),this._uiManager.enableWaiting(!1);const Wt=T(this,as,document.createElement("canvas"));e.append(Wt),e.hidden=!1,y(this,li,Gn).call(this,_,et),y(this,$i,ga).call(this),t(this,oi)||(this.parent.addUndoableEditor(this),T(this,oi,!0)),this._reportTelemetry({action:"inserted_image"}),t(this,Vs)&&Wt.setAttribute("aria-label",t(this,Vs))},Oi=new WeakSet,ua=function(e,_){var It;const[et,ht]=this.parentDimensions;this.width=e/et,this.height=_/ht,this.setDims(e,_),(It=this._initialOptions)!=null&&It.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,os)!==null&&clearTimeout(t(this,os)),T(this,os,setTimeout(()=>{T(this,os,null),y(this,li,Gn).call(this,e,_)},200))},Hi=new WeakSet,pa=function(e,_){const{width:et,height:ht}=t(this,Ge);let mt=et,It=ht,jt=t(this,Ge);for(;mt>2*e||It>2*_;){const Lt=mt,Wt=It;mt>2*e&&(mt=mt>=16384?Math.floor(mt/2)-1:Math.ceil(mt/2)),It>2*_&&(It=It>=16384?Math.floor(It/2)-1:Math.ceil(It/2));const Xt=new OffscreenCanvas(mt,It);Xt.getContext("2d").drawImage(jt,0,0,Lt,Wt,0,0,mt,It),jt=Xt.transferToImageBitmap()}return jt},li=new WeakSet,Gn=function(e,_){e=Math.ceil(e),_=Math.ceil(_);const et=t(this,as);if(!et||et.width===e&&et.height===_)return;et.width=e,et.height=_;const ht=t(this,is)?t(this,Ge):y(this,Hi,pa).call(this,e,_);if(this._uiManager.hasMLManager&&!this.hasAltText()){const It=new OffscreenCanvas(e,_);It.getContext("2d").drawImage(ht,0,0,ht.width,ht.height,0,0,e,_),It.convertToBlob().then(jt=>{const Lt=new FileReader;Lt.onload=()=>{const Wt=Lt.result;this._uiManager.mlGuess({service:"image-to-text",request:{imageData:Wt}}).then(Xt=>{const Ae=(Xt==null?void 0:Xt.output)||"";this.parent&&Ae&&!this.hasAltText()&&(this.altTextData={altText:Ae,decorative:!1})})},Lt.readAsDataURL(jt)})}const mt=et.getContext("2d");mt.filter=this._uiManager.hcmFilter,mt.drawImage(ht,0,0,ht.width,ht.height,0,0,e,_)},js=new WeakSet,an=function(e){if(e){if(t(this,is)){const et=this._uiManager.imageManager.getSvgUrl(t(this,je));if(et)return et}const _=document.createElement("canvas");return{width:_.width,height:_.height}=t(this,Ge),_.getContext("2d").drawImage(t(this,Ge),0,0),_.toDataURL()}if(t(this,is)){const[_,et]=this.pageDimensions,ht=Math.round(this.width*_*W.PixelsPerInch.PDF_TO_CSS_UNITS),mt=Math.round(this.height*et*W.PixelsPerInch.PDF_TO_CSS_UNITS),It=new OffscreenCanvas(ht,mt);return It.getContext("2d").drawImage(t(this,Ge),0,0,t(this,Ge).width,t(this,Ge).height,0,0,ht,mt),It.transferToImageBitmap()}return structuredClone(t(this,Ge))},$i=new WeakSet,ga=function(){T(this,Ls,new ResizeObserver(e=>{const _=e[0].contentRect;_.width&&_.height&&y(this,Oi,ua).call(this,_.width,_.height)})),t(this,Ls).observe(this.div)},me(ci,"_type","stamp"),me(ci,"_editorType",n.AnnotationEditorType.STAMP);let N=ci;const ns=class ns{constructor({uiManager:pt,pageIndex:e,div:_,accessibilityManager:et,annotationLayer:ht,drawLayer:mt,textLayer:It,viewport:jt,l10n:Lt}){h(this,Bi);h(this,di);h(this,ui);h(this,pi);h(this,Ws);h(this,Rs,void 0);h(this,qs,!1);h(this,hs,null);h(this,Is,null);h(this,us,null);h(this,ps,null);h(this,gs,null);h(this,Ze,new Map);h(this,ys,!1);h(this,zs,!1);h(this,Xs,!1);h(this,Ye,null);h(this,pe,void 0);const Wt=[...t(ns,_s).values()];if(!ns._initialized){ns._initialized=!0;for(const Xt of Wt)Xt.initialize(Lt,pt)}pt.registerEditorTypes(Wt),T(this,pe,pt),this.pageIndex=e,this.div=_,T(this,Rs,et),T(this,hs,ht),this.viewport=jt,T(this,Ye,It),this.drawLayer=mt,t(this,pe).addLayer(this)}get isEmpty(){return t(this,Ze).size===0}get isInvisible(){return this.isEmpty&&t(this,pe).getMode()===n.AnnotationEditorType.NONE}updateToolbar(pt){t(this,pe).updateToolbar(pt)}updateMode(pt=t(this,pe).getMode()){switch(y(this,Ws,on).call(this),pt){case n.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case n.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case n.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const _ of t(ns,_s).values())e.toggle(`${_._type}Editing`,pt===_._editorType);this.div.hidden=!1}hasTextLayer(pt){var e;return pt===((e=t(this,Ye))==null?void 0:e.div)}addInkEditorIfNeeded(pt){if(t(this,pe).getMode()===n.AnnotationEditorType.INK){if(!pt){for(const e of t(this,Ze).values())if(e.isEmpty()){e.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(pt){t(this,pe).setEditingState(pt)}addCommands(pt){t(this,pe).addCommands(pt)}togglePointerEvents(pt=!1){this.div.classList.toggle("disabled",!pt)}toggleAnnotationLayerPointerEvents(pt=!1){var e;(e=t(this,hs))==null||e.div.classList.toggle("disabled",!pt)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const pt=new Set;for(const _ of t(this,Ze).values())_.enableEditing(),_.annotationElementId&&pt.add(_.annotationElementId);if(!t(this,hs))return;const e=t(this,hs).getEditableAnnotations();for(const _ of e){if(_.hide(),t(this,pe).isDeletedAnnotationElement(_.data.id)||pt.has(_.data.id))continue;const et=this.deserialize(_);et&&(this.addOrRebuild(et),et.enableEditing())}}disable(){var _;T(this,Xs,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const pt=new Set;for(const et of t(this,Ze).values()){if(et.disableEditing(),!et.annotationElementId||et.serialize()!==null){pt.add(et.annotationElementId);continue}(_=this.getEditableAnnotation(et.annotationElementId))==null||_.show(),et.remove()}if(t(this,hs)){const et=t(this,hs).getEditableAnnotations();for(const ht of et){const{id:mt}=ht.data;pt.has(mt)||t(this,pe).isDeletedAnnotationElement(mt)||ht.show()}}y(this,Ws,on).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const et of t(ns,_s).values())e.remove(`${et._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),T(this,Xs,!1)}getEditableAnnotation(pt){var e;return((e=t(this,hs))==null?void 0:e.getEditableAnnotation(pt))||null}setActiveEditor(pt){t(this,pe).getActive()!==pt&&t(this,pe).setActiveEditor(pt)}enableTextSelection(){var pt;this.div.tabIndex=-1,(pt=t(this,Ye))!=null&&pt.div&&!t(this,ps)&&(T(this,ps,y(this,Bi,fa).bind(this)),t(this,Ye).div.addEventListener("pointerdown",t(this,ps)),t(this,Ye).div.classList.add("highlighting"))}disableTextSelection(){var pt;this.div.tabIndex=0,(pt=t(this,Ye))!=null&&pt.div&&t(this,ps)&&(t(this,Ye).div.removeEventListener("pointerdown",t(this,ps)),T(this,ps,null),t(this,Ye).div.classList.remove("highlighting"))}enableClick(){t(this,us)||(T(this,us,this.pointerdown.bind(this)),T(this,Is,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",t(this,us)),this.div.addEventListener("pointerup",t(this,Is)))}disableClick(){t(this,us)&&(this.div.removeEventListener("pointerdown",t(this,us)),this.div.removeEventListener("pointerup",t(this,Is)),T(this,us,null),T(this,Is,null))}attach(pt){t(this,Ze).set(pt.id,pt);const{annotationElementId:e}=pt;e&&t(this,pe).isDeletedAnnotationElement(e)&&t(this,pe).removeDeletedAnnotationElement(pt)}detach(pt){var e;t(this,Ze).delete(pt.id),(e=t(this,Rs))==null||e.removePointerInTextLayer(pt.contentDiv),!t(this,Xs)&&pt.annotationElementId&&t(this,pe).addDeletedAnnotationElement(pt)}remove(pt){this.detach(pt),t(this,pe).removeEditor(pt),pt.div.remove(),pt.isAttachedToDOM=!1,t(this,zs)||this.addInkEditorIfNeeded(!1)}changeParent(pt){var e;pt.parent!==this&&(pt.annotationElementId&&(t(this,pe).addDeletedAnnotationElement(pt.annotationElementId),$.AnnotationEditor.deleteAnnotationElement(pt),pt.annotationElementId=null),this.attach(pt),(e=pt.parent)==null||e.detach(pt),pt.setParent(this),pt.div&&pt.isAttachedToDOM&&(pt.div.remove(),this.div.append(pt.div)))}add(pt){if(!(pt.parent===this&&pt.isAttachedToDOM)){if(this.changeParent(pt),t(this,pe).addEditor(pt),this.attach(pt),!pt.isAttachedToDOM){const e=pt.render();this.div.append(e),pt.isAttachedToDOM=!0}pt.fixAndSetPosition(),pt.onceAdded(),t(this,pe).addToAnnotationStorage(pt),pt._reportTelemetry(pt.telemetryInitialData)}}moveEditorInDOM(pt){var _;if(!pt.isAttachedToDOM)return;const{activeElement:e}=document;pt.div.contains(e)&&!t(this,gs)&&(pt._focusEventsAllowed=!1,T(this,gs,setTimeout(()=>{T(this,gs,null),pt.div.contains(document.activeElement)?pt._focusEventsAllowed=!0:(pt.div.addEventListener("focusin",()=>{pt._focusEventsAllowed=!0},{once:!0}),e.focus())},0))),pt._structTreeParentId=(_=t(this,Rs))==null?void 0:_.moveElementInDOM(this.div,pt.div,pt.contentDiv,!0)}addOrRebuild(pt){pt.needsToBeRebuilt()?(pt.parent||(pt.parent=this),pt.rebuild(),pt.show()):this.add(pt)}addUndoableEditor(pt){const e=()=>pt._uiManager.rebuild(pt),_=()=>{pt.remove()};this.addCommands({cmd:e,undo:_,mustExec:!1})}getNextId(){return t(this,pe).getId()}canCreateNewEmptyEditor(){var pt;return(pt=t(this,di,jn))==null?void 0:pt.canCreateNewEmptyEditor()}pasteEditor(pt,e){t(this,pe).updateToolbar(pt),t(this,pe).updateMode(pt);const{offsetX:_,offsetY:et}=y(this,pi,zn).call(this),ht=this.getNextId(),mt=y(this,ui,qn).call(this,{parent:this,id:ht,x:_,y:et,uiManager:t(this,pe),isCentered:!0,...e});mt&&this.add(mt)}deserialize(pt){var e;return((e=t(ns,_s).get(pt.annotationType??pt.annotationEditorType))==null?void 0:e.deserialize(pt,this,t(this,pe)))||null}createAndAddNewEditor(pt,e,_={}){const et=this.getNextId(),ht=y(this,ui,qn).call(this,{parent:this,id:et,x:pt.offsetX,y:pt.offsetY,uiManager:t(this,pe),isCentered:e,..._});return ht&&this.add(ht),ht}addNewEditor(){this.createAndAddNewEditor(y(this,pi,zn).call(this),!0)}setSelected(pt){t(this,pe).setSelected(pt)}toggleSelected(pt){t(this,pe).toggleSelected(pt)}isSelected(pt){return t(this,pe).isSelected(pt)}unselect(pt){t(this,pe).unselect(pt)}pointerup(pt){const{isMac:e}=n.FeatureTest.platform;if(!(pt.button!==0||pt.ctrlKey&&e)&&pt.target===this.div&&t(this,ys)){if(T(this,ys,!1),!t(this,qs)){T(this,qs,!0);return}if(t(this,pe).getMode()===n.AnnotationEditorType.STAMP){t(this,pe).unselectAll();return}this.createAndAddNewEditor(pt,!1)}}pointerdown(pt){if(t(this,pe).getMode()===n.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),t(this,ys)){T(this,ys,!1);return}const{isMac:e}=n.FeatureTest.platform;if(pt.button!==0||pt.ctrlKey&&e||pt.target!==this.div)return;T(this,ys,!0);const _=t(this,pe).getActive();T(this,qs,!_||_.isEmpty())}findNewParent(pt,e,_){const et=t(this,pe).findParent(e,_);return et===null||et===this?!1:(et.changeParent(pt),!0)}destroy(){var pt,e;((pt=t(this,pe).getActive())==null?void 0:pt.parent)===this&&(t(this,pe).commitOrRemove(),t(this,pe).setActiveEditor(null)),t(this,gs)&&(clearTimeout(t(this,gs)),T(this,gs,null));for(const _ of t(this,Ze).values())(e=t(this,Rs))==null||e.removePointerInTextLayer(_.contentDiv),_.setParent(null),_.isAttachedToDOM=!1,_.div.remove();this.div=null,t(this,Ze).clear(),t(this,pe).removeLayer(this)}render({viewport:pt}){this.viewport=pt,(0,W.setLayerDimensions)(this.div,pt);for(const e of t(this,pe).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:pt}){t(this,pe).commitOrRemove(),y(this,Ws,on).call(this);const e=this.viewport.rotation,_=pt.rotation;if(this.viewport=pt,(0,W.setLayerDimensions)(this.div,{rotation:_}),e!==_)for(const et of t(this,Ze).values())et.rotate(_);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:pt,pageHeight:e}=this.viewport.rawDims;return[pt,e]}get scale(){return t(this,pe).viewParameters.realScale}};Rs=new WeakMap,qs=new WeakMap,hs=new WeakMap,Is=new WeakMap,us=new WeakMap,ps=new WeakMap,gs=new WeakMap,Ze=new WeakMap,ys=new WeakMap,zs=new WeakMap,Xs=new WeakMap,Ye=new WeakMap,pe=new WeakMap,_s=new WeakMap,Bi=new WeakSet,fa=function(pt){if(t(this,pe).unselectAll(),pt.target===t(this,Ye).div){const{isMac:e}=n.FeatureTest.platform;if(pt.button!==0||pt.ctrlKey&&e)return;t(this,pe).showAllEditors("highlight",!0,!0),t(this,Ye).div.classList.add("free"),R.startHighlighting(this,t(this,pe).direction==="ltr",pt),t(this,Ye).div.addEventListener("pointerup",()=>{t(this,Ye).div.classList.remove("free")},{once:!0}),pt.preventDefault()}},di=new WeakSet,jn=function(){return t(ns,_s).get(t(this,pe).getMode())},ui=new WeakSet,qn=function(pt){const e=t(this,di,jn);return e?new e.prototype.constructor(pt):null},pi=new WeakSet,zn=function(){const{x:pt,y:e,width:_,height:et}=this.div.getBoundingClientRect(),ht=Math.max(0,pt),mt=Math.max(0,e),It=Math.min(window.innerWidth,pt+_),jt=Math.min(window.innerHeight,e+et),Lt=(ht+It)/2-pt,Wt=(mt+jt)/2-e,[Xt,Ae]=this.viewport.rotation%180===0?[Lt,Wt]:[Wt,Lt];return{offsetX:Xt,offsetY:Ae}},Ws=new WeakSet,on=function(){T(this,zs,!0);for(const pt of t(this,Ze).values())pt.isEmpty()&&pt.remove();T(this,zs,!1)},me(ns,"_initialized",!1),h(ns,_s,new Map([O,w,N,R].map(pt=>[pt._editorType,pt])));let B=ns},259:(g,H,m)=>{var st,O,M,C,W,R,w,N,B,K,at,J,x,Xn,F,Wn,j,ma,vt,Ns,Tt,va,_t,ws;m.d(H,{ColorPicker:()=>D});var n=m(292),$=m(830),A=m(419);const Pt=class Pt{constructor({editor:Q=null,uiManager:gt=null}){h(this,x);h(this,F);h(this,j);h(this,vt);h(this,Tt);h(this,_t);h(this,st,y(this,j,ma).bind(this));h(this,O,y(this,Tt,va).bind(this));h(this,M,null);h(this,C,null);h(this,W,void 0);h(this,R,null);h(this,w,!1);h(this,N,!1);h(this,B,null);h(this,K,void 0);h(this,at,null);h(this,J,void 0);var kt;Q?(T(this,N,!1),T(this,J,n.AnnotationEditorParamsType.HIGHLIGHT_COLOR),T(this,B,Q)):(T(this,N,!0),T(this,J,n.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),T(this,at,(Q==null?void 0:Q._uiManager)||gt),T(this,K,t(this,at)._eventBus),T(this,W,(Q==null?void 0:Q.color)||((kt=t(this,at))==null?void 0:kt.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return(0,n.shadow)(this,"_keyboardManager",new $.KeyboardManager([[["Escape","mac+Escape"],Pt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Pt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Pt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Pt.prototype._moveToPrevious],[["Home","mac+Home"],Pt.prototype._moveToBeginning],[["End","mac+End"],Pt.prototype._moveToEnd]]))}renderButton(){const Q=T(this,M,document.createElement("button"));Q.className="colorPicker",Q.tabIndex="0",Q.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),Q.setAttribute("aria-haspopup",!0),Q.addEventListener("click",y(this,vt,Ns).bind(this)),Q.addEventListener("keydown",t(this,st));const gt=T(this,C,document.createElement("span"));return gt.className="swatch",gt.setAttribute("aria-hidden",!0),gt.style.backgroundColor=t(this,W),Q.append(gt),Q}renderMainDropdown(){const Q=T(this,R,y(this,x,Xn).call(this));return Q.setAttribute("aria-orientation","horizontal"),Q.setAttribute("aria-labelledby","highlightColorPickerLabel"),Q}_colorSelectFromKeyboard(Q){if(Q.target===t(this,M)){y(this,vt,Ns).call(this,Q);return}const gt=Q.target.getAttribute("data-color");gt&&y(this,F,Wn).call(this,gt,Q)}_moveToNext(Q){var gt,kt;if(!t(this,_t,ws)){y(this,vt,Ns).call(this,Q);return}if(Q.target===t(this,M)){(gt=t(this,R).firstChild)==null||gt.focus();return}(kt=Q.target.nextSibling)==null||kt.focus()}_moveToPrevious(Q){var gt,kt;if(Q.target===((gt=t(this,R))==null?void 0:gt.firstChild)||Q.target===t(this,M)){t(this,_t,ws)&&this._hideDropdownFromKeyboard();return}t(this,_t,ws)||y(this,vt,Ns).call(this,Q),(kt=Q.target.previousSibling)==null||kt.focus()}_moveToBeginning(Q){var gt;if(!t(this,_t,ws)){y(this,vt,Ns).call(this,Q);return}(gt=t(this,R).firstChild)==null||gt.focus()}_moveToEnd(Q){var gt;if(!t(this,_t,ws)){y(this,vt,Ns).call(this,Q);return}(gt=t(this,R).lastChild)==null||gt.focus()}hideDropdown(){var Q;(Q=t(this,R))==null||Q.classList.add("hidden"),window.removeEventListener("pointerdown",t(this,O))}_hideDropdownFromKeyboard(){var Q;if(!t(this,N)){if(!t(this,_t,ws)){(Q=t(this,B))==null||Q.unselect();return}this.hideDropdown(),t(this,M).focus({preventScroll:!0,focusVisible:t(this,w)})}}updateColor(Q){if(t(this,C)&&(t(this,C).style.backgroundColor=Q),!t(this,R))return;const gt=t(this,at).highlightColors.values();for(const kt of t(this,R).children)kt.setAttribute("aria-selected",gt.next().value===Q)}destroy(){var Q,gt;(Q=t(this,M))==null||Q.remove(),T(this,M,null),T(this,C,null),(gt=t(this,R))==null||gt.remove(),T(this,R,null)}};st=new WeakMap,O=new WeakMap,M=new WeakMap,C=new WeakMap,W=new WeakMap,R=new WeakMap,w=new WeakMap,N=new WeakMap,B=new WeakMap,K=new WeakMap,at=new WeakMap,J=new WeakMap,x=new WeakSet,Xn=function(){const Q=document.createElement("div");Q.addEventListener("contextmenu",A.noContextMenu),Q.className="dropdown",Q.role="listbox",Q.setAttribute("aria-multiselectable",!1),Q.setAttribute("aria-orientation","vertical"),Q.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[gt,kt]of t(this,at).highlightColors){const Rt=document.createElement("button");Rt.tabIndex="0",Rt.role="option",Rt.setAttribute("data-color",kt),Rt.title=gt,Rt.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${gt}`);const qt=document.createElement("span");Rt.append(qt),qt.className="swatch",qt.style.backgroundColor=kt,Rt.setAttribute("aria-selected",kt===t(this,W)),Rt.addEventListener("click",y(this,F,Wn).bind(this,kt)),Q.append(Rt)}return Q.addEventListener("keydown",t(this,st)),Q},F=new WeakSet,Wn=function(Q,gt){gt.stopPropagation(),t(this,K).dispatch("switchannotationeditorparams",{source:this,type:t(this,J),value:Q})},j=new WeakSet,ma=function(Q){Pt._keyboardManager.exec(this,Q)},vt=new WeakSet,Ns=function(Q){if(t(this,_t,ws)){this.hideDropdown();return}if(T(this,w,Q.detail===0),window.addEventListener("pointerdown",t(this,O)),t(this,R)){t(this,R).classList.remove("hidden");return}const gt=T(this,R,y(this,x,Xn).call(this));t(this,M).append(gt)},Tt=new WeakSet,va=function(Q){var gt;(gt=t(this,R))!=null&&gt.contains(Q.target)||this.hideDropdown()},_t=new WeakSet,ws=function(){return t(this,R)&&!t(this,R).classList.contains("hidden")};let D=Pt},310:(g,H,m)=>{var C,W,R,w,N,B,K,at,Kn,V,F,P,j,Z,vt,Dt,Tt,Ot,_t,Mt,Pt,Et,Q,gt,kt,Rt,qt,Kt,ie,xe,de,Yn,ve,Jn,ae,Qn,ee,ba,ne,Aa,s,Zn,l,tr,a,er,p,ya,c,_a,o,wa,U,Ea,rt,sr,yt,xi;m.d(H,{AnnotationEditor:()=>O});var n=m(830),$=m(292),A=m(419);const x=class x{constructor(S){h(this,at);h(this,C,"");h(this,W,!1);h(this,R,null);h(this,w,null);h(this,N,null);h(this,B,!1);h(this,K,null);T(this,K,S)}static initialize(S){x._l10nPromise||(x._l10nPromise=S)}async render(){const S=T(this,R,document.createElement("button"));S.className="altText";const X=await x._l10nPromise.get("pdfjs-editor-alt-text-button-label");S.textContent=X,S.setAttribute("aria-label",X),S.tabIndex="0",S.addEventListener("contextmenu",A.noContextMenu),S.addEventListener("pointerdown",I=>I.stopPropagation());const nt=I=>{I.preventDefault(),t(this,K)._uiManager.editAltText(t(this,K))};return S.addEventListener("click",nt,{capture:!0}),S.addEventListener("keydown",I=>{I.target===S&&I.key==="Enter"&&(T(this,B,!0),nt(I))}),await y(this,at,Kn).call(this),S}finish(){t(this,R)&&(t(this,R).focus({focusVisible:t(this,B)}),T(this,B,!1))}isEmpty(){return!t(this,C)&&!t(this,W)}get data(){return{altText:t(this,C),decorative:t(this,W)}}set data({altText:S,decorative:X}){t(this,C)===S&&t(this,W)===X||(T(this,C,S),T(this,W,X),y(this,at,Kn).call(this))}toggle(S=!1){t(this,R)&&(!S&&t(this,N)&&(clearTimeout(t(this,N)),T(this,N,null)),t(this,R).disabled=!S)}destroy(){var S;(S=t(this,R))==null||S.remove(),T(this,R,null),T(this,w,null)}};C=new WeakMap,W=new WeakMap,R=new WeakMap,w=new WeakMap,N=new WeakMap,B=new WeakMap,K=new WeakMap,at=new WeakSet,Kn=async function(){var nt,I;const S=t(this,R);if(!S)return;if(!t(this,C)&&!t(this,W)){S.classList.remove("done"),(nt=t(this,w))==null||nt.remove();return}S.classList.add("done"),x._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(u=>{S.setAttribute("aria-label",u)});let X=t(this,w);if(!X){T(this,w,X=document.createElement("span")),X.className="tooltip",X.setAttribute("role","tooltip");const u=X.id=`alt-text-tooltip-${t(this,K).id}`;S.setAttribute("aria-describedby",u);const q=100;S.addEventListener("mouseenter",()=>{T(this,N,setTimeout(()=>{T(this,N,null),t(this,w).classList.add("show"),t(this,K)._reportTelemetry({action:"alt_text_tooltip"})},q))}),S.addEventListener("mouseleave",()=>{var z;t(this,N)&&(clearTimeout(t(this,N)),T(this,N,null)),(z=t(this,w))==null||z.classList.remove("show")})}X.innerText=t(this,W)?await x._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):t(this,C),X.parentNode||S.append(X),(I=t(this,K).getImageForAltText())==null||I.setAttribute("aria-describedby",X.id)},me(x,"_l10nPromise",null);let D=x;var st=m(362);const ut=class ut{constructor(S){h(this,de);h(this,ae);h(this,ee);h(this,ne);h(this,s);h(this,l);h(this,a);h(this,p);h(this,c);h(this,o);h(this,U);h(this,rt);h(this,yt);h(this,V,null);h(this,F,null);h(this,P,!1);h(this,j,!1);h(this,Z,null);h(this,vt,null);h(this,Dt,this.focusin.bind(this));h(this,Tt,this.focusout.bind(this));h(this,Ot,null);h(this,_t,"");h(this,Mt,!1);h(this,Pt,null);h(this,Et,!1);h(this,Q,!1);h(this,gt,!1);h(this,kt,null);h(this,Rt,0);h(this,qt,0);h(this,Kt,null);me(this,"_initialOptions",Object.create(null));me(this,"_isVisible",!0);me(this,"_uiManager",null);me(this,"_focusEventsAllowed",!0);me(this,"_l10nPromise",null);h(this,ie,!1);h(this,xe,ut._zIndex++);this.constructor===ut&&(0,$.unreachable)("Cannot initialize AnnotationEditor."),this.parent=S.parent,this.id=S.id,this.width=this.height=null,this.pageIndex=S.parent.pageIndex,this.name=S.name,this.div=null,this._uiManager=S.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=S.isCentered,this._structTreeParentId=null;const{rotation:X,rawDims:{pageWidth:nt,pageHeight:I,pageX:u,pageY:q}}=this.parent.viewport;this.rotation=X,this.pageRotation=(360+X-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[nt,I],this.pageTranslation=[u,q];const[z,lt]=this.parentDimensions;this.x=S.x/z,this.y=S.y/lt,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const S=ut.prototype._resizeWithKeyboard,X=n.AnnotationEditorUIManager.TRANSLATE_SMALL,nt=n.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,$.shadow)(this,"_resizerKeyboardManager",new n.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],S,{args:[-X,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],S,{args:[-nt,0]}],[["ArrowRight","mac+ArrowRight"],S,{args:[X,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],S,{args:[nt,0]}],[["ArrowUp","mac+ArrowUp"],S,{args:[0,-X]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],S,{args:[0,-nt]}],[["ArrowDown","mac+ArrowDown"],S,{args:[0,X]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],S,{args:[0,nt]}],[["Escape","mac+Escape"],ut.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,$.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(S){const X=new M({id:S.parent.getNextId(),parent:S.parent,uiManager:S._uiManager});X.annotationElementId=S.annotationElementId,X.deleted=!0,X._uiManager.addToAnnotationStorage(X)}static initialize(S,X,nt){if(ut._l10nPromise||(ut._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(u=>[u,S.get(u.replaceAll(/([A-Z])/g,q=>`-${q.toLowerCase()}`))]))),nt==null?void 0:nt.strings)for(const u of nt.strings)ut._l10nPromise.set(u,S.get(u));if(ut._borderLineWidth!==-1)return;const I=getComputedStyle(document.documentElement);ut._borderLineWidth=parseFloat(I.getPropertyValue("--outline-width"))||0}static updateDefaultParams(S,X){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(S){return!1}static paste(S,X){(0,$.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,ie)}set _isDraggable(S){var X;T(this,ie,S),(X=this.div)==null||X.classList.toggle("draggable",S)}get isEnterHandled(){return!0}center(){const[S,X]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*X/(S*2),this.y+=this.width*S/(X*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*X/(S*2),this.y-=this.width*S/(X*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(S){this._uiManager.addCommands(S)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,xe)}setParent(S){S!==null?(this.pageIndex=S.pageIndex,this.pageDimensions=S.pageDimensions):y(this,yt,xi).call(this),this.parent=S}focusin(S){this._focusEventsAllowed&&(t(this,Mt)?T(this,Mt,!1):this.parent.setSelected(this))}focusout(S){var X,nt;!this._focusEventsAllowed||!this.isAttachedToDOM||(X=S.relatedTarget)!=null&&X.closest(`#${this.id}`)||(S.preventDefault(),(nt=this.parent)!=null&&nt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(S,X,nt,I){const[u,q]=this.parentDimensions;[nt,I]=this.screenToPageTranslation(nt,I),this.x=(S+nt)/u,this.y=(X+I)/q,this.fixAndSetPosition()}translate(S,X){y(this,de,Yn).call(this,this.parentDimensions,S,X)}translateInPage(S,X){t(this,Pt)||T(this,Pt,[this.x,this.y]),y(this,de,Yn).call(this,this.pageDimensions,S,X),this.div.scrollIntoView({block:"nearest"})}drag(S,X){t(this,Pt)||T(this,Pt,[this.x,this.y]);const[nt,I]=this.parentDimensions;if(this.x+=S/nt,this.y+=X/I,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ft,y:Ct}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ft,Ct)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:q}=this;const[z,lt]=this.getBaseTranslation();u+=z,q+=lt,this.div.style.left=`${(100*u).toFixed(2)}%`,this.div.style.top=`${(100*q).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!t(this,Pt)&&(t(this,Pt)[0]!==this.x||t(this,Pt)[1]!==this.y)}getBaseTranslation(){const[S,X]=this.parentDimensions,{_borderLineWidth:nt}=ut,I=nt/S,u=nt/X;switch(this.rotation){case 90:return[-I,u];case 180:return[I,u];case 270:return[I,-u];default:return[-I,-u]}}get _mustFixPosition(){return!0}fixAndSetPosition(S=this.rotation){const[X,nt]=this.pageDimensions;let{x:I,y:u,width:q,height:z}=this;if(q*=X,z*=nt,I*=X,u*=nt,this._mustFixPosition)switch(S){case 0:I=Math.max(0,Math.min(X-q,I)),u=Math.max(0,Math.min(nt-z,u));break;case 90:I=Math.max(0,Math.min(X-z,I)),u=Math.min(nt,Math.max(q,u));break;case 180:I=Math.min(X,Math.max(q,I)),u=Math.min(nt,Math.max(z,u));break;case 270:I=Math.min(X,Math.max(z,I)),u=Math.max(0,Math.min(nt-q,u));break}this.x=I/=X,this.y=u/=nt;const[lt,ft]=this.getBaseTranslation();I+=lt,u+=ft;const{style:Ct}=this.div;Ct.left=`${(100*I).toFixed(2)}%`,Ct.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(S,X){var nt;return y(nt=ut,ve,Jn).call(nt,S,X,this.parentRotation)}pageTranslationToScreen(S,X){var nt;return y(nt=ut,ve,Jn).call(nt,S,X,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:S,pageDimensions:[X,nt]}=this,I=X*S,u=nt*S;return $.FeatureTest.isCSSRoundSupported?[Math.round(I),Math.round(u)]:[I,u]}setDims(S,X){const[nt,I]=this.parentDimensions;this.div.style.width=`${(100*S/nt).toFixed(2)}%`,t(this,j)||(this.div.style.height=`${(100*X/I).toFixed(2)}%`)}fixDims(){const{style:S}=this.div,{height:X,width:nt}=S,I=nt.endsWith("%"),u=!t(this,j)&&X.endsWith("%");if(I&&u)return;const[q,z]=this.parentDimensions;I||(S.width=`${(100*parseFloat(nt)/q).toFixed(2)}%`),!t(this,j)&&!u&&(S.height=`${(100*parseFloat(X)/z).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var S;(S=t(this,F))==null||S.finish()}async addEditToolbar(){return t(this,Ot)||t(this,Q)?t(this,Ot):(T(this,Ot,new st.EditorToolbar(this)),this.div.append(t(this,Ot).render()),t(this,F)&&t(this,Ot).addAltTextButton(await t(this,F).render()),t(this,Ot))}removeEditToolbar(){var S;t(this,Ot)&&(t(this,Ot).remove(),T(this,Ot,null),(S=t(this,F))==null||S.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){t(this,F)||(D.initialize(ut._l10nPromise),T(this,F,new D(this)),await this.addEditToolbar())}get altTextData(){var S;return(S=t(this,F))==null?void 0:S.data}set altTextData(S){t(this,F)&&(t(this,F).data=S)}hasAltText(){var S;return!((S=t(this,F))!=null&&S.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=t(this,P)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",t(this,Dt)),this.div.addEventListener("focusout",t(this,Tt));const[S,X]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*X/S).toFixed(2)}%`,this.div.style.maxHeight=`${(100*S/X).toFixed(2)}%`);const[nt,I]=this.getInitialTranslation();return this.translate(nt,I),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(S){const{isMac:X}=$.FeatureTest.platform;if(S.button!==0||S.ctrlKey&&X){S.preventDefault();return}if(T(this,Mt,!0),this._isDraggable){y(this,p,ya).call(this,S);return}y(this,a,er).call(this,S)}moveInDOM(){t(this,kt)&&clearTimeout(t(this,kt)),T(this,kt,setTimeout(()=>{var S;T(this,kt,null),(S=this.parent)==null||S.moveEditorInDOM(this)},0))}_setParentAndPosition(S,X,nt){S.changeParent(this),this.x=X,this.y=nt,this.fixAndSetPosition()}getRect(S,X,nt=this.rotation){const I=this.parentScale,[u,q]=this.pageDimensions,[z,lt]=this.pageTranslation,ft=S/I,Ct=X/I,Ft=this.x*u,te=this.y*q,re=this.width*u,he=this.height*q;switch(nt){case 0:return[Ft+ft+z,q-te-Ct-he+lt,Ft+ft+re+z,q-te-Ct+lt];case 90:return[Ft+Ct+z,q-te+ft+lt,Ft+Ct+he+z,q-te+ft+re+lt];case 180:return[Ft-ft-re+z,q-te+Ct+lt,Ft-ft+z,q-te+Ct+he+lt];case 270:return[Ft-Ct-he+z,q-te-ft-re+lt,Ft-Ct+z,q-te-ft+lt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(S,X){const[nt,I,u,q]=S,z=u-nt,lt=q-I;switch(this.rotation){case 0:return[nt,X-q,z,lt];case 90:return[nt,X-I,lt,z];case 180:return[u,X-I,z,lt];case 270:return[u,X-q,lt,z];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){T(this,Q,!0)}disableEditMode(){T(this,Q,!1)}isInEditMode(){return t(this,Q)}shouldGetKeyboardEvents(){return t(this,gt)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var S,X;(S=this.div)==null||S.addEventListener("focusin",t(this,Dt)),(X=this.div)==null||X.addEventListener("focusout",t(this,Tt))}rotate(S){}serialize(S=!1,X=null){(0,$.unreachable)("An editor must be serializable")}static deserialize(S,X,nt){const I=new this.prototype.constructor({parent:X,id:X.getNextId(),uiManager:nt});I.rotation=S.rotation;const[u,q]=I.pageDimensions,[z,lt,ft,Ct]=I.getRectInCurrentCoords(S.rect,q);return I.x=z/u,I.y=lt/q,I.width=ft/u,I.height=Ct/q,I}remove(){if(this.div.removeEventListener("focusin",t(this,Dt)),this.div.removeEventListener("focusout",t(this,Tt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),t(this,kt)&&(clearTimeout(t(this,kt)),T(this,kt,null)),y(this,yt,xi).call(this),this.removeEditToolbar(),t(this,Kt)){for(const S of t(this,Kt).values())clearTimeout(S);T(this,Kt,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(y(this,ee,ba).call(this),t(this,Z).classList.remove("hidden"),(0,n.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(S){if(!this.isResizable||S.target!==this.div||S.key!=="Enter")return;this._uiManager.setSelected(this),T(this,vt,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const X=t(this,Z).children;if(!t(this,V)){T(this,V,Array.from(X));const q=y(this,c,_a).bind(this),z=y(this,o,wa).bind(this);for(const lt of t(this,V)){const ft=lt.getAttribute("data-resizer-name");lt.setAttribute("role","spinbutton"),lt.addEventListener("keydown",q),lt.addEventListener("blur",z),lt.addEventListener("focus",y(this,U,Ea).bind(this,ft)),ut._l10nPromise.get(`pdfjs-editor-resizer-label-${ft}`).then(Ct=>lt.setAttribute("aria-label",Ct))}}const nt=t(this,V)[0];let I=0;for(const q of X){if(q===nt)break;I++}const u=(360-this.rotation+this.parentRotation)%360/90*(t(this,V).length/4);if(u!==I){if(u<I)for(let z=0;z<I-u;z++)t(this,Z).append(t(this,Z).firstChild);else if(u>I)for(let z=0;z<u-I;z++)t(this,Z).firstChild.before(t(this,Z).lastChild);let q=0;for(const z of X){const lt=t(this,V)[q++].getAttribute("data-resizer-name");ut._l10nPromise.get(`pdfjs-editor-resizer-label-${lt}`).then(ft=>z.setAttribute("aria-label",ft))}}y(this,rt,sr).call(this,0),T(this,gt,!0),t(this,Z).firstChild.focus({focusVisible:!0}),S.preventDefault(),S.stopImmediatePropagation()}_resizeWithKeyboard(S,X){t(this,gt)&&y(this,l,tr).call(this,t(this,_t),{movementX:S,movementY:X})}_stopResizingWithKeyboard(){y(this,yt,xi).call(this),this.div.focus()}select(){var S,X;if(this.makeResizable(),(S=this.div)==null||S.classList.add("selectedEditor"),!t(this,Ot)){this.addEditToolbar().then(()=>{var nt,I;(nt=this.div)!=null&&nt.classList.contains("selectedEditor")&&((I=t(this,Ot))==null||I.show())});return}(X=t(this,Ot))==null||X.show()}unselect(){var S,X,nt,I;(S=t(this,Z))==null||S.classList.add("hidden"),(X=this.div)==null||X.classList.remove("selectedEditor"),(nt=this.div)!=null&&nt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(I=t(this,Ot))==null||I.hide()}updateParams(S,X){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return t(this,Et)}set isEditing(S){T(this,Et,S),this.parent&&(S?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(S,X){T(this,j,!0);const nt=S/X,{style:I}=this.div;I.aspectRatio=nt,I.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(S,X=!1){if(X){t(this,Kt)||T(this,Kt,new Map);const{action:nt}=S;let I=t(this,Kt).get(nt);I&&clearTimeout(I),I=setTimeout(()=>{this._reportTelemetry(S),t(this,Kt).delete(nt),t(this,Kt).size===0&&T(this,Kt,null)},ut._telemetryTimeout),t(this,Kt).set(nt,I);return}S.type||(S.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:S}})}show(S=this._isVisible){this.div.classList.toggle("hidden",!S),this._isVisible=S}enable(){this.div&&(this.div.tabIndex=0),T(this,P,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,P,!0)}};V=new WeakMap,F=new WeakMap,P=new WeakMap,j=new WeakMap,Z=new WeakMap,vt=new WeakMap,Dt=new WeakMap,Tt=new WeakMap,Ot=new WeakMap,_t=new WeakMap,Mt=new WeakMap,Pt=new WeakMap,Et=new WeakMap,Q=new WeakMap,gt=new WeakMap,kt=new WeakMap,Rt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,ie=new WeakMap,xe=new WeakMap,de=new WeakSet,Yn=function([S,X],nt,I){[nt,I]=this.screenToPageTranslation(nt,I),this.x+=nt/S,this.y+=I/X,this.fixAndSetPosition()},ve=new WeakSet,Jn=function(S,X,nt){switch(nt){case 90:return[X,-S];case 180:return[-S,-X];case 270:return[-X,S];default:return[S,X]}},ae=new WeakSet,Qn=function(S){switch(S){case 90:{const[X,nt]=this.pageDimensions;return[0,-X/nt,nt/X,0]}case 180:return[-1,0,0,-1];case 270:{const[X,nt]=this.pageDimensions;return[0,X/nt,-nt/X,0]}default:return[1,0,0,1]}},ee=new WeakSet,ba=function(){if(t(this,Z))return;T(this,Z,document.createElement("div")),t(this,Z).classList.add("resizers");const S=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const X of S){const nt=document.createElement("div");t(this,Z).append(nt),nt.classList.add("resizer",X),nt.setAttribute("data-resizer-name",X),nt.addEventListener("pointerdown",y(this,ne,Aa).bind(this,X)),nt.addEventListener("contextmenu",A.noContextMenu),nt.tabIndex=-1}this.div.prepend(t(this,Z))},ne=new WeakSet,Aa=function(S,X){var he;X.preventDefault();const{isMac:nt}=$.FeatureTest.platform;if(X.button!==0||X.ctrlKey&&nt)return;(he=t(this,F))==null||he.toggle(!1);const I=y(this,l,tr).bind(this,S),u=this._isDraggable;this._isDraggable=!1;const q={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",I,q);const z=this.x,lt=this.y,ft=this.width,Ct=this.height,Ft=this.parent.div.style.cursor,te=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(X.target).cursor;const re=()=>{var Ce;this.parent.togglePointerEvents(!0),(Ce=t(this,F))==null||Ce.toggle(!0),this._isDraggable=u,window.removeEventListener("pointerup",re),window.removeEventListener("blur",re),window.removeEventListener("pointermove",I,q),this.parent.div.style.cursor=Ft,this.div.style.cursor=te,y(this,s,Zn).call(this,z,lt,ft,Ct)};window.addEventListener("pointerup",re),window.addEventListener("blur",re)},s=new WeakSet,Zn=function(S,X,nt,I){const u=this.x,q=this.y,z=this.width,lt=this.height;u===S&&q===X&&z===nt&&lt===I||this.addCommands({cmd:()=>{this.width=z,this.height=lt,this.x=u,this.y=q;const[ft,Ct]=this.parentDimensions;this.setDims(ft*z,Ct*lt),this.fixAndSetPosition()},undo:()=>{this.width=nt,this.height=I,this.x=S,this.y=X;const[ft,Ct]=this.parentDimensions;this.setDims(ft*nt,Ct*I),this.fixAndSetPosition()},mustExec:!0})},l=new WeakSet,tr=function(S,X){const[nt,I]=this.parentDimensions,u=this.x,q=this.y,z=this.width,lt=this.height,ft=ut.MIN_SIZE/nt,Ct=ut.MIN_SIZE/I,Ft=xt=>Math.round(xt*1e4)/1e4,te=y(this,ae,Qn).call(this,this.rotation),re=(xt,$t)=>[te[0]*xt+te[2]*$t,te[1]*xt+te[3]*$t],he=y(this,ae,Qn).call(this,360-this.rotation),Ce=(xt,$t)=>[he[0]*xt+he[2]*$t,he[1]*xt+he[3]*$t];let _e,De,fe=!1,Pe=!1;switch(S){case"topLeft":fe=!0,_e=(xt,$t)=>[0,0],De=(xt,$t)=>[xt,$t];break;case"topMiddle":_e=(xt,$t)=>[xt/2,0],De=(xt,$t)=>[xt/2,$t];break;case"topRight":fe=!0,_e=(xt,$t)=>[xt,0],De=(xt,$t)=>[0,$t];break;case"middleRight":Pe=!0,_e=(xt,$t)=>[xt,$t/2],De=(xt,$t)=>[0,$t/2];break;case"bottomRight":fe=!0,_e=(xt,$t)=>[xt,$t],De=(xt,$t)=>[0,0];break;case"bottomMiddle":_e=(xt,$t)=>[xt/2,$t],De=(xt,$t)=>[xt/2,0];break;case"bottomLeft":fe=!0,_e=(xt,$t)=>[0,$t],De=(xt,$t)=>[xt,0];break;case"middleLeft":Pe=!0,_e=(xt,$t)=>[0,$t/2],De=(xt,$t)=>[xt,$t/2];break}const se=_e(z,lt),L=De(z,lt);let b=re(...L);const Y=Ft(u+b[0]),it=Ft(q+b[1]);let ct=1,wt=1,[bt,zt]=this.screenToPageTranslation(X.movementX,X.movementY);if([bt,zt]=Ce(bt/nt,zt/I),fe){const xt=Math.hypot(z,lt);ct=wt=Math.max(Math.min(Math.hypot(L[0]-se[0]-bt,L[1]-se[1]-zt)/xt,1/z,1/lt),ft/z,Ct/lt)}else Pe?ct=Math.max(ft,Math.min(1,Math.abs(L[0]-se[0]-bt)))/z:wt=Math.max(Ct,Math.min(1,Math.abs(L[1]-se[1]-zt)))/lt;const Gt=Ft(z*ct),Nt=Ft(lt*wt);b=re(...De(Gt,Nt));const Yt=Y-b[0],Ut=it-b[1];this.width=Gt,this.height=Nt,this.x=Yt,this.y=Ut,this.setDims(nt*Gt,I*Nt),this.fixAndSetPosition()},a=new WeakSet,er=function(S){const{isMac:X}=$.FeatureTest.platform;S.ctrlKey&&!X||S.shiftKey||S.metaKey&&X?this.parent.toggleSelected(this):this.parent.setSelected(this)},p=new WeakSet,ya=function(S){const X=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let nt,I;X&&(this.div.classList.add("moving"),nt={passive:!0,capture:!0},T(this,Rt,S.clientX),T(this,qt,S.clientY),I=q=>{const{clientX:z,clientY:lt}=q,[ft,Ct]=this.screenToPageTranslation(z-t(this,Rt),lt-t(this,qt));T(this,Rt,z),T(this,qt,lt),this._uiManager.dragSelectedEditors(ft,Ct)},window.addEventListener("pointermove",I,nt));const u=()=>{window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),X&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",I,nt)),T(this,Mt,!1),this._uiManager.endDragSession()||y(this,a,er).call(this,S)};window.addEventListener("pointerup",u),window.addEventListener("blur",u)},c=new WeakSet,_a=function(S){ut._resizerKeyboardManager.exec(this,S)},o=new WeakSet,wa=function(S){var X;t(this,gt)&&((X=S.relatedTarget)==null?void 0:X.parentNode)!==t(this,Z)&&y(this,yt,xi).call(this)},U=new WeakSet,Ea=function(S){T(this,_t,t(this,gt)?S:"")},rt=new WeakSet,sr=function(S){if(t(this,V))for(const X of t(this,V))X.tabIndex=S},yt=new WeakSet,xi=function(){if(T(this,gt,!1),y(this,rt,sr).call(this,-1),t(this,vt)){const{savedX:S,savedY:X,savedWidth:nt,savedHeight:I}=t(this,vt);y(this,s,Zn).call(this,S,X,nt,I),T(this,vt,null)}},h(ut,ve),me(ut,"_borderLineWidth",-1),me(ut,"_colorManager",new n.ColorManager),me(ut,"_zIndex",1),me(ut,"_telemetryTimeout",1e3);let O=ut;class M extends O{constructor(S){super(S),this.annotationElementId=S.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},61:(g,H,m)=>{var M,C,W,R,Sa,N,hn,K,xa,J,Ta,V,ir,P,j,Z,vt,Dt,Tt,Ot,_t,Mt,Pt,Et,Q,gt,kt,Rt,qt,Kt,ie,xe,nr,ve,Vt,ae,Te,ee,Ee,ne,tt,Ti,i,Ci,d,Ca;m.d(H,{FreeOutliner:()=>st,Outliner:()=>$});var n=m(292);class ${constructor(p,v=0,c=0,r=!0){h(this,R);h(this,N);h(this,K);h(this,J);h(this,V);h(this,M,void 0);h(this,C,[]);h(this,W,[]);let o=1/0,E=-1/0,U=1/0,G=-1/0;const rt=10**-4;for(const{x:X,y:nt,width:I,height:u}of p){const q=Math.floor((X-v)/rt)*rt,z=Math.ceil((X+I+v)/rt)*rt,lt=Math.floor((nt-v)/rt)*rt,ft=Math.ceil((nt+u+v)/rt)*rt,Ct=[q,lt,ft,!0],Ft=[z,lt,ft,!1];t(this,C).push(Ct,Ft),o=Math.min(o,q),E=Math.max(E,z),U=Math.min(U,lt),G=Math.max(G,ft)}const ot=E-o+2*c,yt=G-U+2*c,At=o-c,ut=U-c,St=t(this,C).at(r?-1:-2),S=[St[0],St[2]];for(const X of t(this,C)){const[nt,I,u]=X;X[0]=(nt-At)/ot,X[1]=(I-ut)/yt,X[2]=(u-ut)/yt}T(this,M,{x:At,y:ut,width:ot,height:yt,lastPoint:S})}getOutlines(){t(this,C).sort((v,c)=>v[0]-c[0]||v[1]-c[1]||v[2]-c[2]);const p=[];for(const v of t(this,C))v[3]?(p.push(...y(this,V,ir).call(this,v)),y(this,K,xa).call(this,v)):(y(this,J,Ta).call(this,v),p.push(...y(this,V,ir).call(this,v)));return y(this,R,Sa).call(this,p)}}M=new WeakMap,C=new WeakMap,W=new WeakMap,R=new WeakSet,Sa=function(p){const v=[],c=new Set;for(const E of p){const[U,G,rt]=E;v.push([U,G,E],[U,rt,E])}v.sort((E,U)=>E[1]-U[1]||E[0]-U[0]);for(let E=0,U=v.length;E<U;E+=2){const G=v[E][2],rt=v[E+1][2];G.push(rt),rt.push(G),c.add(G),c.add(rt)}const r=[];let o;for(;c.size>0;){const E=c.values().next().value;let[U,G,rt,ot,yt]=E;c.delete(E);let At=U,ut=G;for(o=[U,rt],r.push(o);;){let St;if(c.has(ot))St=ot;else if(c.has(yt))St=yt;else break;c.delete(St),[U,G,rt,ot,yt]=St,At!==U&&(o.push(At,ut,U,ut===G?G:rt),At=U),ut=ut===G?rt:G}o.push(At,ut)}return new D(r,t(this,M))},N=new WeakSet,hn=function(p){const v=t(this,W);let c=0,r=v.length-1;for(;c<=r;){const o=c+r>>1,E=v[o][0];if(E===p)return o;E<p?c=o+1:r=o-1}return r+1},K=new WeakSet,xa=function([,p,v]){const c=y(this,N,hn).call(this,p);t(this,W).splice(c,0,[p,v])},J=new WeakSet,Ta=function([,p,v]){const c=y(this,N,hn).call(this,p);for(let r=c;r<t(this,W).length;r++){const[o,E]=t(this,W)[r];if(o!==p)break;if(o===p&&E===v){t(this,W).splice(r,1);return}}for(let r=c-1;r>=0;r--){const[o,E]=t(this,W)[r];if(o!==p)break;if(o===p&&E===v){t(this,W).splice(r,1);return}}},V=new WeakSet,ir=function(p){const[v,c,r]=p,o=[[v,c,r]],E=y(this,N,hn).call(this,r);for(let U=0;U<E;U++){const[G,rt]=t(this,W)[U];for(let ot=0,yt=o.length;ot<yt;ot++){const[,At,ut]=o[ot];if(!(rt<=At||ut<=G)){if(At>=G){if(ut>rt)o[ot][1]=rt;else{if(yt===1)return[];o.splice(ot,1),ot--,yt--}continue}o[ot][2]=G,ut>rt&&o.push([v,rt,ut])}}}return o};class A{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(p,v){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof O}}class D extends A{constructor(v,c){super();h(this,P,void 0);h(this,j,void 0);T(this,j,v),T(this,P,c)}toSVGPath(){const v=[];for(const c of t(this,j)){let[r,o]=c;v.push(`M${r} ${o}`);for(let E=2;E<c.length;E+=2){const U=c[E],G=c[E+1];U===r?(v.push(`V${G}`),o=G):G===o&&(v.push(`H${U}`),r=U)}v.push("Z")}return v.join(" ")}serialize([v,c,r,o],E){const U=[],G=r-v,rt=o-c;for(const ot of t(this,j)){const yt=new Array(ot.length);for(let At=0;At<ot.length;At+=2)yt[At]=v+ot[At]*G,yt[At+1]=o-ot[At+1]*rt;U.push(yt)}return U}get box(){return t(this,P)}}P=new WeakMap,j=new WeakMap;const le=class le{constructor({x:p,y:v},c,r,o,E,U=0){h(this,xe);h(this,Z,void 0);h(this,vt,[]);h(this,Dt,void 0);h(this,Tt,void 0);h(this,Ot,[]);h(this,_t,new Float64Array(18));h(this,Mt,void 0);h(this,Pt,void 0);h(this,Et,void 0);h(this,Q,void 0);h(this,gt,void 0);h(this,kt,void 0);h(this,Rt,[]);T(this,Z,c),T(this,kt,o*r),T(this,Tt,E),t(this,_t).set([NaN,NaN,NaN,NaN,p,v],6),T(this,Dt,U),T(this,Q,t(le,qt)*r),T(this,Et,t(le,ie)*r),T(this,gt,r),t(this,Rt).push(p,v)}get free(){return!0}isEmpty(){return isNaN(t(this,_t)[8])}add({x:p,y:v}){var Ct;T(this,Mt,p),T(this,Pt,v);const[c,r,o,E]=t(this,Z);let[U,G,rt,ot]=t(this,_t).subarray(8,12);const yt=p-rt,At=v-ot,ut=Math.hypot(yt,At);if(ut<t(this,Et))return!1;const St=ut-t(this,Q),S=St/ut,X=S*yt,nt=S*At;let I=U,u=G;U=rt,G=ot,rt+=X,ot+=nt,(Ct=t(this,Rt))==null||Ct.push(p,v);const q=-nt/St,z=X/St,lt=q*t(this,kt),ft=z*t(this,kt);return t(this,_t).set(t(this,_t).subarray(2,8),0),t(this,_t).set([rt+lt,ot+ft],4),t(this,_t).set(t(this,_t).subarray(14,18),12),t(this,_t).set([rt-lt,ot-ft],16),isNaN(t(this,_t)[6])?(t(this,Ot).length===0&&(t(this,_t).set([U+lt,G+ft],2),t(this,Ot).push(NaN,NaN,NaN,NaN,(U+lt-c)/o,(G+ft-r)/E),t(this,_t).set([U-lt,G-ft],14),t(this,vt).push(NaN,NaN,NaN,NaN,(U-lt-c)/o,(G-ft-r)/E)),t(this,_t).set([I,u,U,G,rt,ot],6),!this.isEmpty()):(t(this,_t).set([I,u,U,G,rt,ot],6),Math.abs(Math.atan2(u-G,I-U)-Math.atan2(nt,X))<Math.PI/2?([U,G,rt,ot]=t(this,_t).subarray(2,6),t(this,Ot).push(NaN,NaN,NaN,NaN,((U+rt)/2-c)/o,((G+ot)/2-r)/E),[U,G,I,u]=t(this,_t).subarray(14,18),t(this,vt).push(NaN,NaN,NaN,NaN,((I+U)/2-c)/o,((u+G)/2-r)/E),!0):([I,u,U,G,rt,ot]=t(this,_t).subarray(0,6),t(this,Ot).push(((I+5*U)/6-c)/o,((u+5*G)/6-r)/E,((5*U+rt)/6-c)/o,((5*G+ot)/6-r)/E,((U+rt)/2-c)/o,((G+ot)/2-r)/E),[rt,ot,U,G,I,u]=t(this,_t).subarray(12,18),t(this,vt).push(((I+5*U)/6-c)/o,((u+5*G)/6-r)/E,((5*U+rt)/6-c)/o,((5*G+ot)/6-r)/E,((U+rt)/2-c)/o,((G+ot)/2-r)/E),!0))}toSVGPath(){if(this.isEmpty())return"";const p=t(this,Ot),v=t(this,vt),c=t(this,_t).subarray(4,6),r=t(this,_t).subarray(16,18),[o,E,U,G]=t(this,Z),[rt,ot,yt,At]=y(this,xe,nr).call(this);if(isNaN(t(this,_t)[6])&&!this.isEmpty())return`M${(t(this,_t)[2]-o)/U} ${(t(this,_t)[3]-E)/G} L${(t(this,_t)[4]-o)/U} ${(t(this,_t)[5]-E)/G} L${rt} ${ot} L${yt} ${At} L${(t(this,_t)[16]-o)/U} ${(t(this,_t)[17]-E)/G} L${(t(this,_t)[14]-o)/U} ${(t(this,_t)[15]-E)/G} Z`;const ut=[];ut.push(`M${p[4]} ${p[5]}`);for(let St=6;St<p.length;St+=6)isNaN(p[St])?ut.push(`L${p[St+4]} ${p[St+5]}`):ut.push(`C${p[St]} ${p[St+1]} ${p[St+2]} ${p[St+3]} ${p[St+4]} ${p[St+5]}`);ut.push(`L${(c[0]-o)/U} ${(c[1]-E)/G} L${rt} ${ot} L${yt} ${At} L${(r[0]-o)/U} ${(r[1]-E)/G}`);for(let St=v.length-6;St>=6;St-=6)isNaN(v[St])?ut.push(`L${v[St+4]} ${v[St+5]}`):ut.push(`C${v[St]} ${v[St+1]} ${v[St+2]} ${v[St+3]} ${v[St+4]} ${v[St+5]}`);return ut.push(`L${v[4]} ${v[5]} Z`),ut.join(" ")}getOutlines(){var nt;const p=t(this,Ot),v=t(this,vt),c=t(this,_t),r=c.subarray(4,6),o=c.subarray(16,18),[E,U,G,rt]=t(this,Z),ot=new Float64Array((((nt=t(this,Rt))==null?void 0:nt.length)??0)+2);for(let I=0,u=ot.length-2;I<u;I+=2)ot[I]=(t(this,Rt)[I]-E)/G,ot[I+1]=(t(this,Rt)[I+1]-U)/rt;ot[ot.length-2]=(t(this,Mt)-E)/G,ot[ot.length-1]=(t(this,Pt)-U)/rt;const[yt,At,ut,St]=y(this,xe,nr).call(this);if(isNaN(c[6])&&!this.isEmpty()){const I=new Float64Array(36);return I.set([NaN,NaN,NaN,NaN,(c[2]-E)/G,(c[3]-U)/rt,NaN,NaN,NaN,NaN,(c[4]-E)/G,(c[5]-U)/rt,NaN,NaN,NaN,NaN,yt,At,NaN,NaN,NaN,NaN,ut,St,NaN,NaN,NaN,NaN,(c[16]-E)/G,(c[17]-U)/rt,NaN,NaN,NaN,NaN,(c[14]-E)/G,(c[15]-U)/rt],0),new O(I,ot,t(this,Z),t(this,gt),t(this,Dt),t(this,Tt))}const S=new Float64Array(t(this,Ot).length+24+t(this,vt).length);let X=p.length;for(let I=0;I<X;I+=2){if(isNaN(p[I])){S[I]=S[I+1]=NaN;continue}S[I]=p[I],S[I+1]=p[I+1]}S.set([NaN,NaN,NaN,NaN,(r[0]-E)/G,(r[1]-U)/rt,NaN,NaN,NaN,NaN,yt,At,NaN,NaN,NaN,NaN,ut,St,NaN,NaN,NaN,NaN,(o[0]-E)/G,(o[1]-U)/rt],X),X+=24;for(let I=v.length-6;I>=6;I-=6)for(let u=0;u<6;u+=2){if(isNaN(v[I+u])){S[X]=S[X+1]=NaN,X+=2;continue}S[X]=v[I+u],S[X+1]=v[I+u+1],X+=2}return S.set([NaN,NaN,NaN,NaN,v[4],v[5]],X),new O(S,ot,t(this,Z),t(this,gt),t(this,Dt),t(this,Tt))}};Z=new WeakMap,vt=new WeakMap,Dt=new WeakMap,Tt=new WeakMap,Ot=new WeakMap,_t=new WeakMap,Mt=new WeakMap,Pt=new WeakMap,Et=new WeakMap,Q=new WeakMap,gt=new WeakMap,kt=new WeakMap,Rt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,ie=new WeakMap,xe=new WeakSet,nr=function(){const p=t(this,_t).subarray(4,6),v=t(this,_t).subarray(16,18),[c,r,o,E]=t(this,Z);return[(t(this,Mt)+(p[0]-v[0])/2-c)/o,(t(this,Pt)+(p[1]-v[1])/2-r)/E,(t(this,Mt)+(v[0]-p[0])/2-c)/o,(t(this,Pt)+(v[1]-p[1])/2-r)/E]},h(le,qt,8),h(le,Kt,2),h(le,ie,t(le,qt)+t(le,Kt));let st=le;class O extends A{constructor(v,c,r,o,E,U){super();h(this,tt);h(this,i);h(this,d);h(this,ve,void 0);h(this,Vt,null);h(this,ae,void 0);h(this,Te,void 0);h(this,ee,void 0);h(this,Ee,void 0);h(this,ne,void 0);T(this,ne,v),T(this,ee,c),T(this,ve,r),T(this,Ee,o),T(this,ae,E),T(this,Te,U),y(this,d,Ca).call(this,U);const{x:G,y:rt,width:ot,height:yt}=t(this,Vt);for(let At=0,ut=v.length;At<ut;At+=2)v[At]=(v[At]-G)/ot,v[At+1]=(v[At+1]-rt)/yt;for(let At=0,ut=c.length;At<ut;At+=2)c[At]=(c[At]-G)/ot,c[At+1]=(c[At+1]-rt)/yt}toSVGPath(){const v=[`M${t(this,ne)[4]} ${t(this,ne)[5]}`];for(let c=6,r=t(this,ne).length;c<r;c+=6){if(isNaN(t(this,ne)[c])){v.push(`L${t(this,ne)[c+4]} ${t(this,ne)[c+5]}`);continue}v.push(`C${t(this,ne)[c]} ${t(this,ne)[c+1]} ${t(this,ne)[c+2]} ${t(this,ne)[c+3]} ${t(this,ne)[c+4]} ${t(this,ne)[c+5]}`)}return v.push("Z"),v.join(" ")}serialize([v,c,r,o],E){const U=r-v,G=o-c;let rt,ot;switch(E){case 0:rt=y(this,tt,Ti).call(this,t(this,ne),v,o,U,-G),ot=y(this,tt,Ti).call(this,t(this,ee),v,o,U,-G);break;case 90:rt=y(this,i,Ci).call(this,t(this,ne),v,c,U,G),ot=y(this,i,Ci).call(this,t(this,ee),v,c,U,G);break;case 180:rt=y(this,tt,Ti).call(this,t(this,ne),r,c,-U,G),ot=y(this,tt,Ti).call(this,t(this,ee),r,c,-U,G);break;case 270:rt=y(this,i,Ci).call(this,t(this,ne),r,o,-U,-G),ot=y(this,i,Ci).call(this,t(this,ee),r,o,-U,-G);break}return{outline:Array.from(rt),points:[Array.from(ot)]}}get box(){return t(this,Vt)}getNewOutline(v,c){const{x:r,y:o,width:E,height:U}=t(this,Vt),[G,rt,ot,yt]=t(this,ve),At=E*ot,ut=U*yt,St=r*ot+G,S=o*yt+rt,X=new st({x:t(this,ee)[0]*At+St,y:t(this,ee)[1]*ut+S},t(this,ve),t(this,Ee),v,t(this,Te),c??t(this,ae));for(let nt=2;nt<t(this,ee).length;nt+=2)X.add({x:t(this,ee)[nt]*At+St,y:t(this,ee)[nt+1]*ut+S});return X.getOutlines()}}ve=new WeakMap,Vt=new WeakMap,ae=new WeakMap,Te=new WeakMap,ee=new WeakMap,Ee=new WeakMap,ne=new WeakMap,tt=new WeakSet,Ti=function(v,c,r,o,E){const U=new Float64Array(v.length);for(let G=0,rt=v.length;G<rt;G+=2)U[G]=c+v[G]*o,U[G+1]=r+v[G+1]*E;return U},i=new WeakSet,Ci=function(v,c,r,o,E){const U=new Float64Array(v.length);for(let G=0,rt=v.length;G<rt;G+=2)U[G]=c+v[G+1]*o,U[G+1]=r+v[G]*E;return U},d=new WeakSet,Ca=function(v){const c=t(this,ne);let r=c[4],o=c[5],E=r,U=o,G=r,rt=o,ot=r,yt=o;const At=v?Math.max:Math.min;for(let nt=6,I=c.length;nt<I;nt+=6){if(isNaN(c[nt]))E=Math.min(E,c[nt+4]),U=Math.min(U,c[nt+5]),G=Math.max(G,c[nt+4]),rt=Math.max(rt,c[nt+5]),yt<c[nt+5]?(ot=c[nt+4],yt=c[nt+5]):yt===c[nt+5]&&(ot=At(ot,c[nt+4]));else{const u=n.Util.bezierBoundingBox(r,o,...c.slice(nt,nt+6));E=Math.min(E,u[0]),U=Math.min(U,u[1]),G=Math.max(G,u[2]),rt=Math.max(rt,u[3]),yt<u[3]?(ot=u[2],yt=u[3]):yt===u[3]&&(ot=At(ot,u[2]))}r=c[nt+4],o=c[nt+5]}const ut=E-t(this,ae),St=U-t(this,ae),S=G-E+2*t(this,ae),X=rt-U+2*t(this,ae);T(this,Vt,{x:ut,y:St,width:S,height:X,lastPoint:[ot,yt]})}},362:(g,H,m)=>{var D,st,O,M,C,Ma,R,La,N,Pa,K,ln,J,ka,V,rr,j,Z,vt,Dt,Ra,Ot,Ia,Mt,Da;m.d(H,{EditorToolbar:()=>$,HighlightToolbar:()=>A});var n=m(419);const P=class P{constructor(Q){h(this,R);h(this,N);h(this,K);h(this,J);h(this,V);h(this,D,null);h(this,st,null);h(this,O,void 0);h(this,M,null);T(this,O,Q)}render(){const Q=T(this,D,document.createElement("div"));Q.className="editToolbar",Q.setAttribute("role","toolbar"),Q.addEventListener("contextmenu",n.noContextMenu),Q.addEventListener("pointerdown",y(P,C,Ma));const gt=T(this,M,document.createElement("div"));gt.className="buttons",Q.append(gt);const kt=t(this,O).toolbarPosition;if(kt){const{style:Rt}=Q,qt=t(this,O)._uiManager.direction==="ltr"?1-kt[0]:kt[0];Rt.insetInlineEnd=`${100*qt}%`,Rt.top=`calc(${100*kt[1]}% + var(--editor-toolbar-vert-offset))`}return y(this,J,ka).call(this),Q}hide(){var Q;t(this,D).classList.add("hidden"),(Q=t(this,st))==null||Q.hideDropdown()}show(){t(this,D).classList.remove("hidden")}addAltTextButton(Q){y(this,K,ln).call(this,Q),t(this,M).prepend(Q,t(this,V,rr))}addColorPicker(Q){T(this,st,Q);const gt=Q.renderButton();y(this,K,ln).call(this,gt),t(this,M).prepend(gt,t(this,V,rr))}remove(){var Q;t(this,D).remove(),(Q=t(this,st))==null||Q.destroy(),T(this,st,null)}};D=new WeakMap,st=new WeakMap,O=new WeakMap,M=new WeakMap,C=new WeakSet,Ma=function(Q){Q.stopPropagation()},R=new WeakSet,La=function(Q){t(this,O)._focusEventsAllowed=!1,Q.preventDefault(),Q.stopPropagation()},N=new WeakSet,Pa=function(Q){t(this,O)._focusEventsAllowed=!0,Q.preventDefault(),Q.stopPropagation()},K=new WeakSet,ln=function(Q){Q.addEventListener("focusin",y(this,R,La).bind(this),{capture:!0}),Q.addEventListener("focusout",y(this,N,Pa).bind(this),{capture:!0}),Q.addEventListener("contextmenu",n.noContextMenu)},J=new WeakSet,ka=function(){const Q=document.createElement("button");Q.className="delete",Q.tabIndex=0,Q.setAttribute("data-l10n-id",`pdfjs-editor-remove-${t(this,O).editorType}-button`),y(this,K,ln).call(this,Q),Q.addEventListener("click",gt=>{t(this,O)._uiManager.delete()}),t(this,M).append(Q)},V=new WeakSet,rr=function(){const Q=document.createElement("div");return Q.className="divider",Q},h(P,C);let $=P;class A{constructor(Q){h(this,Dt);h(this,Ot);h(this,Mt);h(this,j,null);h(this,Z,null);h(this,vt,void 0);T(this,vt,Q)}show(Q,gt,kt){const[Rt,qt]=y(this,Ot,Ia).call(this,gt,kt),{style:Kt}=t(this,Z)||T(this,Z,y(this,Dt,Ra).call(this));Q.append(t(this,Z)),Kt.insetInlineEnd=`${100*Rt}%`,Kt.top=`calc(${100*qt}% + var(--editor-toolbar-vert-offset))`}hide(){t(this,Z).remove()}}j=new WeakMap,Z=new WeakMap,vt=new WeakMap,Dt=new WeakSet,Ra=function(){const Q=T(this,Z,document.createElement("div"));Q.className="editToolbar",Q.setAttribute("role","toolbar"),Q.addEventListener("contextmenu",n.noContextMenu);const gt=T(this,j,document.createElement("div"));return gt.className="buttons",Q.append(gt),y(this,Mt,Da).call(this),Q},Ot=new WeakSet,Ia=function(Q,gt){let kt=0,Rt=0;for(const qt of Q){const Kt=qt.y+qt.height;if(Kt<kt)continue;const ie=qt.x+(gt?qt.width:0);if(Kt>kt){Rt=ie,kt=Kt;continue}gt?ie>Rt&&(Rt=ie):ie<Rt&&(Rt=ie)}return[gt?1-Rt:Rt,kt]},Mt=new WeakSet,Da=function(){const Q=document.createElement("button");Q.className="highlightButton",Q.tabIndex=0,Q.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const gt=document.createElement("span");Q.append(gt),gt.className="visuallyHidden",gt.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),Q.addEventListener("contextmenu",n.noContextMenu),Q.addEventListener("click",()=>{t(this,vt).highlightSelection("floating_button")}),t(this,j).append(Q)}},830:(g,H,m)=>{var N,B,K,at,J,ar,F,P,j,Z,vt,Fa,Ot,_t,Mt,Pt,Et,Q,gt,kt,Rt,qt,Kt,ie,xe,de,le,ve,Vt,ae,Te,ee,Ee,ne,tt,s,i,l,d,a,f,p,v,c,r,o,E,U,G,rt,ot,yt,At,ut,St,S,X,nt,cn,u,Na,z,Oa,ft,dn,Ft,Ha,re,$a,Ce,Ba,De,or,Pe,hr,L,lr,Y,cr,ct,dr,bt,Je,Gt,Es,Yt,Ua,xt,Va,Qt,ur,ce,Ga,Me,Mi,Xe,pr;m.d(H,{AnnotationEditorUIManager:()=>w,ColorManager:()=>R,KeyboardManager:()=>W,bindEvents:()=>D,opacityToHex:()=>st});var n=m(292),$=m(419),A=m(362);function D(Ve,k,dt){for(const Ht of dt)k.addEventListener(Ht,Ve[Ht].bind(Ve))}function st(Ve){return Math.round(Math.min(255,Math.max(1,255*Ve))).toString(16).padStart(2,"0")}class O{constructor(){h(this,N,0)}get id(){return`${n.AnnotationEditorPrefix}${fs(this,N)._++}`}}N=new WeakMap;const V=class V{constructor(){h(this,J);h(this,B,(0,n.getUuid)());h(this,K,0);h(this,at,null)}static get _isSVGFittingCanvas(){const k='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',dt=new OffscreenCanvas(1,3).getContext("2d"),Ht=new Image;Ht.src=k;const Bt=Ht.decode().then(()=>(dt.drawImage(Ht,0,0,1,1,0,0,1,3),new Uint32Array(dt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",Bt)}async getFromFile(k){const{lastModified:dt,name:Ht,size:Bt,type:Jt}=k;return y(this,J,ar).call(this,`${dt}_${Ht}_${Bt}_${Jt}`,k)}async getFromUrl(k){return y(this,J,ar).call(this,k,k)}async getFromId(k){t(this,at)||T(this,at,new Map);const dt=t(this,at).get(k);return dt?dt.bitmap?(dt.refCounter+=1,dt):dt.file?this.getFromFile(dt.file):this.getFromUrl(dt.url):null}getSvgUrl(k){const dt=t(this,at).get(k);return dt!=null&&dt.isSvg?dt.svgUrl:null}deleteId(k){t(this,at)||T(this,at,new Map);const dt=t(this,at).get(k);dt&&(dt.refCounter-=1,dt.refCounter===0&&(dt.bitmap=null))}isValidId(k){return k.startsWith(`image_${t(this,B)}_`)}};B=new WeakMap,K=new WeakMap,at=new WeakMap,J=new WeakSet,ar=async function(k,dt){t(this,at)||T(this,at,new Map);let Ht=t(this,at).get(k);if(Ht===null)return null;if(Ht!=null&&Ht.bitmap)return Ht.refCounter+=1,Ht;try{Ht||(Ht={bitmap:null,id:`image_${t(this,B)}_${fs(this,K)._++}`,refCounter:0,isSvg:!1});let Bt;if(typeof dt=="string"?(Ht.url=dt,Bt=await(0,$.fetchData)(dt,"blob")):Bt=Ht.file=dt,Bt.type==="image/svg+xml"){const Jt=V._isSVGFittingCanvas,Zt=new FileReader,oe=new Image,be=new Promise((ke,He)=>{oe.onload=()=>{Ht.bitmap=oe,Ht.isSvg=!0,ke()},Zt.onload=async()=>{const Ke=Ht.svgUrl=Zt.result;oe.src=await Jt?`${Ke}#svgView(preserveAspectRatio(none))`:Ke},oe.onerror=Zt.onerror=He});Zt.readAsDataURL(Bt),await be}else Ht.bitmap=await createImageBitmap(Bt);Ht.refCounter=1}catch(Bt){console.error(Bt),Ht=null}return t(this,at).set(k,Ht),Ht&&t(this,at).set(Ht.id,Ht),Ht};let M=V;class C{constructor(k=128){h(this,F,[]);h(this,P,!1);h(this,j,void 0);h(this,Z,-1);T(this,j,k)}add({cmd:k,undo:dt,post:Ht,mustExec:Bt,type:Jt=NaN,overwriteIfSameType:Zt=!1,keepUndo:oe=!1}){if(Bt&&k(),t(this,P))return;const be={cmd:k,undo:dt,post:Ht,type:Jt};if(t(this,Z)===-1){t(this,F).length>0&&(t(this,F).length=0),T(this,Z,0),t(this,F).push(be);return}if(Zt&&t(this,F)[t(this,Z)].type===Jt){oe&&(be.undo=t(this,F)[t(this,Z)].undo),t(this,F)[t(this,Z)]=be;return}const ke=t(this,Z)+1;ke===t(this,j)?t(this,F).splice(0,1):(T(this,Z,ke),ke<t(this,F).length&&t(this,F).splice(ke)),t(this,F).push(be)}undo(){if(t(this,Z)===-1)return;T(this,P,!0);const{undo:k,post:dt}=t(this,F)[t(this,Z)];k(),dt==null||dt(),T(this,P,!1),T(this,Z,t(this,Z)-1)}redo(){if(t(this,Z)<t(this,F).length-1){T(this,Z,t(this,Z)+1),T(this,P,!0);const{cmd:k,post:dt}=t(this,F)[t(this,Z)];k(),dt==null||dt(),T(this,P,!1)}}hasSomethingToUndo(){return t(this,Z)!==-1}hasSomethingToRedo(){return t(this,Z)<t(this,F).length-1}destroy(){T(this,F,null)}}F=new WeakMap,P=new WeakMap,j=new WeakMap,Z=new WeakMap;class W{constructor(k){h(this,vt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:dt}=n.FeatureTest.platform;for(const[Ht,Bt,Jt={}]of k)for(const Zt of Ht){const oe=Zt.startsWith("mac+");dt&&oe?(this.callbacks.set(Zt.slice(4),{callback:Bt,options:Jt}),this.allKeys.add(Zt.split("+").at(-1))):!dt&&!oe&&(this.callbacks.set(Zt,{callback:Bt,options:Jt}),this.allKeys.add(Zt.split("+").at(-1)))}}exec(k,dt){if(!this.allKeys.has(dt.key))return;const Ht=this.callbacks.get(y(this,vt,Fa).call(this,dt));if(!Ht)return;const{callback:Bt,options:{bubbles:Jt=!1,args:Zt=[],checker:oe=null}}=Ht;oe&&!oe(k,dt)||(Bt.bind(k,...Zt,dt)(),Jt||(dt.stopPropagation(),dt.preventDefault()))}}vt=new WeakSet,Fa=function(k){k.altKey&&this.buffer.push("alt"),k.ctrlKey&&this.buffer.push("ctrl"),k.metaKey&&this.buffer.push("meta"),k.shiftKey&&this.buffer.push("shift"),this.buffer.push(k.key);const dt=this.buffer.join("+");return this.buffer.length=0,dt};const Tt=class Tt{get _colors(){const k=new Map([["CanvasText",null],["Canvas",null]]);return(0,$.getColorValues)(k),(0,n.shadow)(this,"_colors",k)}convert(k){const dt=(0,$.getRGB)(k);if(!window.matchMedia("(forced-colors: active)").matches)return dt;for(const[Ht,Bt]of this._colors)if(Bt.every((Jt,Zt)=>Jt===dt[Zt]))return Tt._colorsMapping.get(Ht);return dt}getHexCode(k){const dt=this._colors.get(k);return dt?n.Util.makeHexColor(...dt):k}};me(Tt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let R=Tt;const ss=class ss{constructor(k,dt,Ht,Bt,Jt,Zt,oe,be,ke){h(this,nt);h(this,u);h(this,z);h(this,ft);h(this,Ft);h(this,re);h(this,Ce);h(this,De);h(this,Pe);h(this,L);h(this,Y);h(this,ct);h(this,bt);h(this,Gt);h(this,Yt);h(this,xt);h(this,Qt);h(this,ce);h(this,Me);h(this,Xe);h(this,Ot,null);h(this,_t,new Map);h(this,Mt,new Map);h(this,Pt,null);h(this,Et,null);h(this,Q,new C);h(this,gt,0);h(this,kt,new Set);h(this,Rt,null);h(this,qt,null);h(this,Kt,new Set);h(this,ie,!1);h(this,xe,null);h(this,de,null);h(this,le,null);h(this,ve,!1);h(this,Vt,null);h(this,ae,new O);h(this,Te,!1);h(this,ee,!1);h(this,Ee,null);h(this,ne,null);h(this,tt,null);h(this,s,n.AnnotationEditorType.NONE);h(this,i,new Set);h(this,l,null);h(this,d,null);h(this,a,null);h(this,f,this.blur.bind(this));h(this,p,this.focus.bind(this));h(this,v,this.copy.bind(this));h(this,c,this.cut.bind(this));h(this,r,this.paste.bind(this));h(this,o,this.keydown.bind(this));h(this,E,this.keyup.bind(this));h(this,U,this.onEditingAction.bind(this));h(this,G,this.onPageChanging.bind(this));h(this,rt,this.onScaleChanging.bind(this));h(this,ot,y(this,z,Oa).bind(this));h(this,yt,this.onRotationChanging.bind(this));h(this,At,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});h(this,ut,[0,0]);h(this,St,null);h(this,S,null);h(this,X,null);T(this,S,k),T(this,X,dt),T(this,Pt,Ht),this._eventBus=Bt,this._eventBus._on("editingaction",t(this,U)),this._eventBus._on("pagechanging",t(this,G)),this._eventBus._on("scalechanging",t(this,rt)),this._eventBus._on("rotationchanging",t(this,yt)),y(this,Ft,Ha).call(this),y(this,Pe,hr).call(this),T(this,Et,Jt.annotationStorage),T(this,xe,Jt.filterFactory),T(this,d,Zt),T(this,le,oe||null),T(this,ie,be),T(this,tt,ke||null),this.viewParameters={realScale:$.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const k=ss.prototype,dt=Zt=>t(Zt,S).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&Zt.hasSomethingToControl(),Ht=(Zt,{target:oe})=>{if(oe instanceof HTMLInputElement){const{type:be}=oe;return be!=="text"&&be!=="number"}return!0},Bt=this.TRANSLATE_SMALL,Jt=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new W([[["ctrl+a","mac+meta+a"],k.selectAll,{checker:Ht}],[["ctrl+z","mac+meta+z"],k.undo,{checker:Ht}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],k.redo,{checker:Ht}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],k.delete,{checker:Ht}],[["Enter","mac+Enter"],k.addNewEditorFromKeyboard,{checker:(Zt,{target:oe})=>!(oe instanceof HTMLButtonElement)&&t(Zt,S).contains(oe)&&!Zt.isEnterHandled}],[[" ","mac+ "],k.addNewEditorFromKeyboard,{checker:(Zt,{target:oe})=>!(oe instanceof HTMLButtonElement)&&t(Zt,S).contains(document.activeElement)}],[["Escape","mac+Escape"],k.unselectAll],[["ArrowLeft","mac+ArrowLeft"],k.translateSelectedEditors,{args:[-Bt,0],checker:dt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],k.translateSelectedEditors,{args:[-Jt,0],checker:dt}],[["ArrowRight","mac+ArrowRight"],k.translateSelectedEditors,{args:[Bt,0],checker:dt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],k.translateSelectedEditors,{args:[Jt,0],checker:dt}],[["ArrowUp","mac+ArrowUp"],k.translateSelectedEditors,{args:[0,-Bt],checker:dt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],k.translateSelectedEditors,{args:[0,-Jt],checker:dt}],[["ArrowDown","mac+ArrowDown"],k.translateSelectedEditors,{args:[0,Bt],checker:dt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],k.translateSelectedEditors,{args:[0,Jt],checker:dt}]]))}destroy(){var k,dt;y(this,L,lr).call(this),y(this,De,or).call(this),this._eventBus._off("editingaction",t(this,U)),this._eventBus._off("pagechanging",t(this,G)),this._eventBus._off("scalechanging",t(this,rt)),this._eventBus._off("rotationchanging",t(this,yt));for(const Ht of t(this,Mt).values())Ht.destroy();t(this,Mt).clear(),t(this,_t).clear(),t(this,Kt).clear(),T(this,Ot,null),t(this,i).clear(),t(this,Q).destroy(),(k=t(this,Pt))==null||k.destroy(),(dt=t(this,Vt))==null||dt.hide(),T(this,Vt,null),t(this,de)&&(clearTimeout(t(this,de)),T(this,de,null)),t(this,St)&&(clearTimeout(t(this,St)),T(this,St,null)),y(this,re,$a).call(this)}async mlGuess(k){var dt;return((dt=t(this,tt))==null?void 0:dt.guess(k))||null}get hasMLManager(){return!!t(this,tt)}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",t(this,d)?t(this,xe).addHCMFilter(t(this,d).foreground,t(this,d).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(t(this,S)).direction)}get highlightColors(){return(0,n.shadow)(this,"highlightColors",t(this,le)?new Map(t(this,le).split(",").map(k=>k.split("=").map(dt=>dt.trim()))):null)}get highlightColorNames(){return(0,n.shadow)(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,k=>k.reverse())):null)}setMainHighlightColorPicker(k){T(this,ne,k)}editAltText(k){var dt;(dt=t(this,Pt))==null||dt.editAltText(this,k)}onPageChanging({pageNumber:k}){T(this,gt,k-1)}focusMainContainer(){t(this,S).focus()}findParent(k,dt){for(const Ht of t(this,Mt).values()){const{x:Bt,y:Jt,width:Zt,height:oe}=Ht.div.getBoundingClientRect();if(k>=Bt&&k<=Bt+Zt&&dt>=Jt&&dt<=Jt+oe)return Ht}return null}disableUserSelect(k=!1){t(this,X).classList.toggle("noUserSelect",k)}addShouldRescale(k){t(this,Kt).add(k)}removeShouldRescale(k){t(this,Kt).delete(k)}onScaleChanging({scale:k}){this.commitOrRemove(),this.viewParameters.realScale=k*$.PixelsPerInch.PDF_TO_CSS_UNITS;for(const dt of t(this,Kt))dt.onScaleChanging()}onRotationChanging({pagesRotation:k}){this.commitOrRemove(),this.viewParameters.rotation=k}highlightSelection(k=""){const dt=document.getSelection();if(!dt||dt.isCollapsed)return;const{anchorNode:Ht,anchorOffset:Bt,focusNode:Jt,focusOffset:Zt}=dt,oe=dt.toString(),be=y(this,nt,cn).call(this,dt).closest(".textLayer"),ke=this.getSelectionBoxes(be);if(ke){dt.empty(),t(this,s)===n.AnnotationEditorType.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:n.AnnotationEditorType.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const He of t(this,Mt).values())if(He.hasTextLayer(be)){He.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:k,boxes:ke,anchorNode:Ht,anchorOffset:Bt,focusNode:Jt,focusOffset:Zt,text:oe});break}}}addToAnnotationStorage(k){!k.isEmpty()&&t(this,Et)&&!t(this,Et).has(k.id)&&t(this,Et).setValue(k.id,k)}blur(){if(this.isShiftKeyDown=!1,t(this,ve)&&(T(this,ve,!1),y(this,ft,dn).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:k}=document;for(const dt of t(this,i))if(dt.div.contains(k)){T(this,Ee,[dt,k]),dt._focusEventsAllowed=!1;break}}focus(){if(!t(this,Ee))return;const[k,dt]=t(this,Ee);T(this,Ee,null),dt.addEventListener("focusin",()=>{k._focusEventsAllowed=!0},{once:!0}),dt.focus()}addEditListeners(){y(this,Pe,hr).call(this),y(this,Y,cr).call(this)}removeEditListeners(){y(this,L,lr).call(this),y(this,ct,dr).call(this)}copy(k){var Ht;if(k.preventDefault(),(Ht=t(this,Ot))==null||Ht.commitOrRemove(),!this.hasSelection)return;const dt=[];for(const Bt of t(this,i)){const Jt=Bt.serialize(!0);Jt&&dt.push(Jt)}dt.length!==0&&k.clipboardData.setData("application/pdfjs",JSON.stringify(dt))}cut(k){this.copy(k),this.delete()}paste(k){k.preventDefault();const{clipboardData:dt}=k;for(const Jt of dt.items)for(const Zt of t(this,qt))if(Zt.isHandlingMimeForPasting(Jt.type)){Zt.paste(Jt,this.currentLayer);return}let Ht=dt.getData("application/pdfjs");if(!Ht)return;try{Ht=JSON.parse(Ht)}catch(Jt){(0,n.warn)(`paste: "${Jt.message}".`);return}if(!Array.isArray(Ht))return;this.unselectAll();const Bt=this.currentLayer;try{const Jt=[];for(const be of Ht){const ke=Bt.deserialize(be);if(!ke)return;Jt.push(ke)}const Zt=()=>{for(const be of Jt)y(this,Qt,ur).call(this,be);y(this,Xe,pr).call(this,Jt)},oe=()=>{for(const be of Jt)be.remove()};this.addCommands({cmd:Zt,undo:oe,mustExec:!0})}catch(Jt){(0,n.warn)(`paste: "${Jt.message}".`)}}keydown(k){!this.isShiftKeyDown&&k.key==="Shift"&&(this.isShiftKeyDown=!0),t(this,s)!==n.AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&ss._keyboardManager.exec(this,k)}keyup(k){this.isShiftKeyDown&&k.key==="Shift"&&(this.isShiftKeyDown=!1,t(this,ve)&&(T(this,ve,!1),y(this,ft,dn).call(this,"main_toolbar")))}onEditingAction({name:k}){switch(k){case"undo":case"redo":case"delete":case"selectAll":this[k]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(k){k?(y(this,Ce,Ba).call(this),y(this,Y,cr).call(this),y(this,bt,Je).call(this,{isEditing:t(this,s)!==n.AnnotationEditorType.NONE,isEmpty:y(this,Me,Mi).call(this),hasSomethingToUndo:t(this,Q).hasSomethingToUndo(),hasSomethingToRedo:t(this,Q).hasSomethingToRedo(),hasSelectedEditor:!1})):(y(this,De,or).call(this),y(this,ct,dr).call(this),y(this,bt,Je).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(k){if(!t(this,qt)){T(this,qt,k);for(const dt of t(this,qt))y(this,Gt,Es).call(this,dt.defaultPropertiesToUpdate)}}getId(){return t(this,ae).id}get currentLayer(){return t(this,Mt).get(t(this,gt))}getLayer(k){return t(this,Mt).get(k)}get currentPageIndex(){return t(this,gt)}addLayer(k){t(this,Mt).set(k.pageIndex,k),t(this,Te)?k.enable():k.disable()}removeLayer(k){t(this,Mt).delete(k.pageIndex)}updateMode(k,dt=null,Ht=!1){if(t(this,s)!==k){if(T(this,s,k),k===n.AnnotationEditorType.NONE){this.setEditingState(!1),y(this,xt,Va).call(this);return}this.setEditingState(!0),y(this,Yt,Ua).call(this),this.unselectAll();for(const Bt of t(this,Mt).values())Bt.updateMode(k);if(!dt&&Ht){this.addNewEditorFromKeyboard();return}if(dt){for(const Bt of t(this,_t).values())if(Bt.annotationElementId===dt){this.setSelected(Bt),Bt.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(k){k!==t(this,s)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:k})}updateParams(k,dt){var Ht;if(t(this,qt)){switch(k){case n.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case n.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(Ht=t(this,ne))==null||Ht.updateColor(dt);break;case n.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(t(this,a)||T(this,a,new Map)).set(k,dt),this.showAllEditors("highlight",dt);break}for(const Bt of t(this,i))Bt.updateParams(k,dt);for(const Bt of t(this,qt))Bt.updateDefaultParams(k,dt)}}showAllEditors(k,dt,Ht=!1){var Bt;for(const Jt of t(this,_t).values())Jt.editorType===k&&Jt.show(dt);(((Bt=t(this,a))==null?void 0:Bt.get(n.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==dt&&y(this,Gt,Es).call(this,[[n.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,dt]])}enableWaiting(k=!1){if(t(this,ee)!==k){T(this,ee,k);for(const dt of t(this,Mt).values())k?dt.disableClick():dt.enableClick(),dt.div.classList.toggle("waiting",k)}}getEditors(k){const dt=[];for(const Ht of t(this,_t).values())Ht.pageIndex===k&&dt.push(Ht);return dt}getEditor(k){return t(this,_t).get(k)}addEditor(k){t(this,_t).set(k.id,k)}removeEditor(k){var dt;k.div.contains(document.activeElement)&&(t(this,de)&&clearTimeout(t(this,de)),T(this,de,setTimeout(()=>{this.focusMainContainer(),T(this,de,null)},0))),t(this,_t).delete(k.id),this.unselect(k),(!k.annotationElementId||!t(this,kt).has(k.annotationElementId))&&((dt=t(this,Et))==null||dt.remove(k.id))}addDeletedAnnotationElement(k){t(this,kt).add(k.annotationElementId),k.deleted=!0}isDeletedAnnotationElement(k){return t(this,kt).has(k)}removeDeletedAnnotationElement(k){t(this,kt).delete(k.annotationElementId),k.deleted=!1}setActiveEditor(k){t(this,Ot)!==k&&(T(this,Ot,k),k&&y(this,Gt,Es).call(this,k.propertiesToUpdate))}updateUI(k){t(this,ce,Ga)===k&&y(this,Gt,Es).call(this,k.propertiesToUpdate)}toggleSelected(k){if(t(this,i).has(k)){t(this,i).delete(k),k.unselect(),y(this,bt,Je).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,i).add(k),k.select(),y(this,Gt,Es).call(this,k.propertiesToUpdate),y(this,bt,Je).call(this,{hasSelectedEditor:!0})}setSelected(k){for(const dt of t(this,i))dt!==k&&dt.unselect();t(this,i).clear(),t(this,i).add(k),k.select(),y(this,Gt,Es).call(this,k.propertiesToUpdate),y(this,bt,Je).call(this,{hasSelectedEditor:!0})}isSelected(k){return t(this,i).has(k)}get firstSelectedEditor(){return t(this,i).values().next().value}unselect(k){k.unselect(),t(this,i).delete(k),y(this,bt,Je).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,i).size!==0}get isEnterHandled(){return t(this,i).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){t(this,Q).undo(),y(this,bt,Je).call(this,{hasSomethingToUndo:t(this,Q).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:y(this,Me,Mi).call(this)})}redo(){t(this,Q).redo(),y(this,bt,Je).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,Q).hasSomethingToRedo(),isEmpty:y(this,Me,Mi).call(this)})}addCommands(k){t(this,Q).add(k),y(this,bt,Je).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:y(this,Me,Mi).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const k=[...t(this,i)],dt=()=>{for(const Bt of k)Bt.remove()},Ht=()=>{for(const Bt of k)y(this,Qt,ur).call(this,Bt)};this.addCommands({cmd:dt,undo:Ht,mustExec:!0})}commitOrRemove(){var k;(k=t(this,Ot))==null||k.commitOrRemove()}hasSomethingToControl(){return t(this,Ot)||this.hasSelection}selectAll(){for(const k of t(this,i))k.commit();y(this,Xe,pr).call(this,t(this,_t).values())}unselectAll(){if(!(t(this,Ot)&&(t(this,Ot).commitOrRemove(),t(this,s)!==n.AnnotationEditorType.NONE))&&this.hasSelection){for(const k of t(this,i))k.unselect();t(this,i).clear(),y(this,bt,Je).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(k,dt,Ht=!1){if(Ht||this.commitOrRemove(),!this.hasSelection)return;t(this,ut)[0]+=k,t(this,ut)[1]+=dt;const[Bt,Jt]=t(this,ut),Zt=[...t(this,i)];t(this,St)&&clearTimeout(t(this,St)),T(this,St,setTimeout(()=>{T(this,St,null),t(this,ut)[0]=t(this,ut)[1]=0,this.addCommands({cmd:()=>{for(const be of Zt)t(this,_t).has(be.id)&&be.translateInPage(Bt,Jt)},undo:()=>{for(const be of Zt)t(this,_t).has(be.id)&&be.translateInPage(-Bt,-Jt)},mustExec:!1})},1e3));for(const be of Zt)be.translateInPage(k,dt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,Rt,new Map);for(const k of t(this,i))t(this,Rt).set(k,{savedX:k.x,savedY:k.y,savedPageIndex:k.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,Rt))return!1;this.disableUserSelect(!1);const k=t(this,Rt);T(this,Rt,null);let dt=!1;for(const[{x:Bt,y:Jt,pageIndex:Zt},oe]of k)oe.newX=Bt,oe.newY=Jt,oe.newPageIndex=Zt,dt||(dt=Bt!==oe.savedX||Jt!==oe.savedY||Zt!==oe.savedPageIndex);if(!dt)return!1;const Ht=(Bt,Jt,Zt,oe)=>{if(t(this,_t).has(Bt.id)){const be=t(this,Mt).get(oe);be?Bt._setParentAndPosition(be,Jt,Zt):(Bt.pageIndex=oe,Bt.x=Jt,Bt.y=Zt)}};return this.addCommands({cmd:()=>{for(const[Bt,{newX:Jt,newY:Zt,newPageIndex:oe}]of k)Ht(Bt,Jt,Zt,oe)},undo:()=>{for(const[Bt,{savedX:Jt,savedY:Zt,savedPageIndex:oe}]of k)Ht(Bt,Jt,Zt,oe)},mustExec:!0}),!0}dragSelectedEditors(k,dt){if(t(this,Rt))for(const Ht of t(this,Rt).keys())Ht.drag(k,dt)}rebuild(k){if(k.parent===null){const dt=this.getLayer(k.pageIndex);dt?(dt.changeParent(k),dt.addOrRebuild(k)):(this.addEditor(k),this.addToAnnotationStorage(k),k.rebuild())}else k.parent.addOrRebuild(k)}get isEditorHandlingKeyboard(){var k;return((k=this.getActive())==null?void 0:k.shouldGetKeyboardEvents())||t(this,i).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(k){return t(this,Ot)===k}getActive(){return t(this,Ot)}getMode(){return t(this,s)}get imageManager(){return(0,n.shadow)(this,"imageManager",new M)}getSelectionBoxes(k){if(!k)return null;const dt=document.getSelection();for(let ke=0,He=dt.rangeCount;ke<He;ke++)if(!k.contains(dt.getRangeAt(ke).commonAncestorContainer))return null;const{x:Ht,y:Bt,width:Jt,height:Zt}=k.getBoundingClientRect();let oe;switch(k.getAttribute("data-main-rotation")){case"90":oe=(ke,He,Ke,qe)=>({x:(He-Bt)/Zt,y:1-(ke+Ke-Ht)/Jt,width:qe/Zt,height:Ke/Jt});break;case"180":oe=(ke,He,Ke,qe)=>({x:1-(ke+Ke-Ht)/Jt,y:1-(He+qe-Bt)/Zt,width:Ke/Jt,height:qe/Zt});break;case"270":oe=(ke,He,Ke,qe)=>({x:1-(He+qe-Bt)/Zt,y:(ke-Ht)/Jt,width:qe/Zt,height:Ke/Jt});break;default:oe=(ke,He,Ke,qe)=>({x:(ke-Ht)/Jt,y:(He-Bt)/Zt,width:Ke/Jt,height:qe/Zt});break}const be=[];for(let ke=0,He=dt.rangeCount;ke<He;ke++){const Ke=dt.getRangeAt(ke);if(!Ke.collapsed)for(const{x:qe,y:Xo,width:Cs,height:Rr}of Ke.getClientRects())Cs===0||Rr===0||be.push(oe(qe,Xo,Cs,Rr))}return be.length===0?null:be}};Ot=new WeakMap,_t=new WeakMap,Mt=new WeakMap,Pt=new WeakMap,Et=new WeakMap,Q=new WeakMap,gt=new WeakMap,kt=new WeakMap,Rt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,ie=new WeakMap,xe=new WeakMap,de=new WeakMap,le=new WeakMap,ve=new WeakMap,Vt=new WeakMap,ae=new WeakMap,Te=new WeakMap,ee=new WeakMap,Ee=new WeakMap,ne=new WeakMap,tt=new WeakMap,s=new WeakMap,i=new WeakMap,l=new WeakMap,d=new WeakMap,a=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,c=new WeakMap,r=new WeakMap,o=new WeakMap,E=new WeakMap,U=new WeakMap,G=new WeakMap,rt=new WeakMap,ot=new WeakMap,yt=new WeakMap,At=new WeakMap,ut=new WeakMap,St=new WeakMap,S=new WeakMap,X=new WeakMap,nt=new WeakSet,cn=function({anchorNode:k}){return k.nodeType===Node.TEXT_NODE?k.parentElement:k},u=new WeakSet,Na=function(){const k=document.getSelection();if(!k||k.isCollapsed)return;const dt=y(this,nt,cn).call(this,k).closest(".textLayer"),Ht=this.getSelectionBoxes(dt);Ht&&(t(this,Vt)||T(this,Vt,new A.HighlightToolbar(this)),t(this,Vt).show(dt,Ht,this.direction==="ltr"))},z=new WeakSet,Oa=function(){var Ht,Bt,Jt;const k=document.getSelection();if(!k||k.isCollapsed){t(this,l)&&((Ht=t(this,Vt))==null||Ht.hide(),T(this,l,null),y(this,bt,Je).call(this,{hasSelectedText:!1}));return}const{anchorNode:dt}=k;if(dt!==t(this,l)){if(!y(this,nt,cn).call(this,k).closest(".textLayer")){t(this,l)&&((Bt=t(this,Vt))==null||Bt.hide(),T(this,l,null),y(this,bt,Je).call(this,{hasSelectedText:!1}));return}if((Jt=t(this,Vt))==null||Jt.hide(),T(this,l,dt),y(this,bt,Je).call(this,{hasSelectedText:!0}),!(t(this,s)!==n.AnnotationEditorType.HIGHLIGHT&&t(this,s)!==n.AnnotationEditorType.NONE)&&(t(this,s)===n.AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,ve,this.isShiftKeyDown),!this.isShiftKeyDown)){const Zt=oe=>{oe.type==="pointerup"&&oe.button!==0||(window.removeEventListener("pointerup",Zt),window.removeEventListener("blur",Zt),oe.type==="pointerup"&&y(this,ft,dn).call(this,"main_toolbar"))};window.addEventListener("pointerup",Zt),window.addEventListener("blur",Zt)}}},ft=new WeakSet,dn=function(k=""){t(this,s)===n.AnnotationEditorType.HIGHLIGHT?this.highlightSelection(k):t(this,ie)&&y(this,u,Na).call(this)},Ft=new WeakSet,Ha=function(){document.addEventListener("selectionchange",t(this,ot))},re=new WeakSet,$a=function(){document.removeEventListener("selectionchange",t(this,ot))},Ce=new WeakSet,Ba=function(){window.addEventListener("focus",t(this,p)),window.addEventListener("blur",t(this,f))},De=new WeakSet,or=function(){window.removeEventListener("focus",t(this,p)),window.removeEventListener("blur",t(this,f))},Pe=new WeakSet,hr=function(){window.addEventListener("keydown",t(this,o)),window.addEventListener("keyup",t(this,E))},L=new WeakSet,lr=function(){window.removeEventListener("keydown",t(this,o)),window.removeEventListener("keyup",t(this,E))},Y=new WeakSet,cr=function(){document.addEventListener("copy",t(this,v)),document.addEventListener("cut",t(this,c)),document.addEventListener("paste",t(this,r))},ct=new WeakSet,dr=function(){document.removeEventListener("copy",t(this,v)),document.removeEventListener("cut",t(this,c)),document.removeEventListener("paste",t(this,r))},bt=new WeakSet,Je=function(k){Object.entries(k).some(([dt,Ht])=>t(this,At)[dt]!==Ht)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,At),k)}),t(this,s)===n.AnnotationEditorType.HIGHLIGHT&&k.hasSelectedEditor===!1&&y(this,Gt,Es).call(this,[[n.AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Gt=new WeakSet,Es=function(k){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:k})},Yt=new WeakSet,Ua=function(){if(!t(this,Te)){T(this,Te,!0);for(const k of t(this,Mt).values())k.enable();for(const k of t(this,_t).values())k.enable()}},xt=new WeakSet,Va=function(){if(this.unselectAll(),t(this,Te)){T(this,Te,!1);for(const k of t(this,Mt).values())k.disable();for(const k of t(this,_t).values())k.disable()}},Qt=new WeakSet,ur=function(k){const dt=t(this,Mt).get(k.pageIndex);dt?dt.addOrRebuild(k):(this.addEditor(k),this.addToAnnotationStorage(k))},ce=new WeakSet,Ga=function(){let k=null;for(k of t(this,i));return k},Me=new WeakSet,Mi=function(){if(t(this,_t).size===0)return!0;if(t(this,_t).size===1)for(const k of t(this,_t).values())return k.isEmpty();return!1},Xe=new WeakSet,pr=function(k){for(const dt of t(this,i))dt.unselect();t(this,i).clear();for(const dt of k)dt.isEmpty()||(t(this,i).add(dt),dt.select());y(this,bt,Je).call(this,{hasSelectedEditor:this.hasSelection})},me(ss,"TRANSLATE_SMALL",1),me(ss,"TRANSLATE_BIG",10);let w=ss},94:(g,H,m)=>{m.d(H,{PDFFetchStream:()=>O});var n=m(292),$=m(490);function A(W,R,w){return{method:"GET",headers:W,signal:w.signal,mode:"cors",credentials:R?"include":"same-origin",redirect:"follow"}}function D(W){const R=new Headers;for(const w in W){const N=W[w];N!==void 0&&R.append(w,N)}return R}function st(W){return W instanceof Uint8Array?W.buffer:W instanceof ArrayBuffer?W:((0,n.warn)(`getArrayBuffer - unexpected data format: ${W}`),new Uint8Array(W).buffer)}class O{constructor(R){this.source=R,this.isHttp=/^https?:/i.test(R.url),this.httpHeaders=this.isHttp&&R.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var R;return((R=this._fullRequestReader)==null?void 0:R._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new M(this),this._fullRequestReader}getRangeReader(R,w){if(w<=this._progressiveDataLength)return null;const N=new C(this,R,w);return this._rangeRequestReaders.push(N),N}cancelAllRequests(R){var w;(w=this._fullRequestReader)==null||w.cancel(R);for(const N of this._rangeRequestReaders.slice(0))N.cancel(R)}}class M{constructor(R){this._stream=R,this._reader=null,this._loaded=0,this._filename=null;const w=R.source;this._withCredentials=w.withCredentials||!1,this._contentLength=w.length,this._headersCapability=Promise.withResolvers(),this._disableRange=w.disableRange||!1,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!w.disableStream,this._isRangeSupported=!w.disableRange,this._headers=D(this._stream.httpHeaders);const N=w.url;fetch(N,A(this._headers,this._withCredentials,this._abortController)).then(B=>{if(!(0,$.validateResponseStatus)(B.status))throw(0,$.createResponseStatusError)(B.status,N);this._reader=B.body.getReader(),this._headersCapability.resolve();const K=x=>B.headers.get(x),{allowRangeRequests:at,suggestedLength:J}=(0,$.validateRangeRequestCapabilities)({getResponseHeader:K,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=at,this._contentLength=J||this._contentLength,this._filename=(0,$.extractFilenameFromHeader)(K),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var N;await this._headersCapability.promise;const{value:R,done:w}=await this._reader.read();return w?{value:R,done:w}:(this._loaded+=R.byteLength,(N=this.onProgress)==null||N.call(this,{loaded:this._loaded,total:this._contentLength}),{value:st(R),done:!1})}cancel(R){var w;(w=this._reader)==null||w.cancel(R),this._abortController.abort()}}class C{constructor(R,w,N){this._stream=R,this._reader=null,this._loaded=0;const B=R.source;this._withCredentials=B.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!B.disableStream,this._abortController=new AbortController,this._headers=D(this._stream.httpHeaders),this._headers.append("Range",`bytes=${w}-${N-1}`);const K=B.url;fetch(K,A(this._headers,this._withCredentials,this._abortController)).then(at=>{if(!(0,$.validateResponseStatus)(at.status))throw(0,$.createResponseStatusError)(at.status,K);this._readCapability.resolve(),this._reader=at.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var N;await this._readCapability.promise;const{value:R,done:w}=await this._reader.read();return w?{value:R,done:w}:(this._loaded+=R.byteLength,(N=this.onProgress)==null||N.call(this,{loaded:this._loaded}),{value:st(R),done:!1})}cancel(R){var w;(w=this._reader)==null||w.cancel(R),this._abortController.abort()}}},10:(g,H,m)=>{var D;m.d(H,{FontFaceObject:()=>A,FontLoader:()=>$});var n=m(292);class ${constructor({ownerDocument:O=globalThis.document,styleElement:M=null}){h(this,D,new Set);this._document=O,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(O){this.nativeFontFaces.add(O),this._document.fonts.add(O)}removeNativeFontFace(O){this.nativeFontFaces.delete(O),this._document.fonts.delete(O)}insertRule(O){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const M=this.styleElement.sheet;M.insertRule(O,M.cssRules.length)}clear(){for(const O of this.nativeFontFaces)this._document.fonts.delete(O);this.nativeFontFaces.clear(),t(this,D).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:O,_inspectFont:M}){if(!(!O||t(this,D).has(O.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:C,src:W,style:R}=O,w=new FontFace(C,W,R);this.addNativeFontFace(w);try{await w.load(),t(this,D).add(C),M==null||M(O)}catch{(0,n.warn)(`Cannot load system font: ${O.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(w)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(O){if(O.attached||O.missingFile&&!O.systemFontInfo)return;if(O.attached=!0,O.systemFontInfo){await this.loadSystemFont(O);return}if(this.isFontLoadingAPISupported){const C=O.createNativeFontFace();if(C){this.addNativeFontFace(C);try{await C.loaded}catch(W){throw(0,n.warn)(`Failed to load font '${C.family}': '${W}'.`),O.disableFontFace=!0,W}}return}const M=O.createFontFaceRule();if(M){if(this.insertRule(M),this.isSyncFontLoadingSupported)return;await new Promise(C=>{const W=this._queueLoadingCallback(C);this._prepareFontLoadEvent(O,W)})}}get isFontLoadingAPISupported(){var M;const O=!!((M=this._document)!=null&&M.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",O)}get isSyncFontLoadingSupported(){let O=!1;return(n.isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(O=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",O)}_queueLoadingCallback(O){function M(){for((0,n.assert)(!W.done,"completeRequest() cannot be called twice."),W.done=!0;C.length>0&&C[0].done;){const R=C.shift();setTimeout(R.callback,0)}}const{loadingRequests:C}=this,W={done:!1,complete:M,callback:O};return C.push(W),W}get _loadTestFont(){const O=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",O)}_prepareFontLoadEvent(O,M){function C(Dt,Tt){return Dt.charCodeAt(Tt)<<24|Dt.charCodeAt(Tt+1)<<16|Dt.charCodeAt(Tt+2)<<8|Dt.charCodeAt(Tt+3)&255}function W(Dt,Tt,Ot,_t){const Mt=Dt.substring(0,Tt),Pt=Dt.substring(Tt+Ot);return Mt+_t+Pt}let R,w;const N=this._document.createElement("canvas");N.width=1,N.height=1;const B=N.getContext("2d");let K=0;function at(Dt,Tt){if(++K>30){(0,n.warn)("Load test font never loaded."),Tt();return}if(B.font="30px "+Dt,B.fillText(".",0,20),B.getImageData(0,0,1,1).data[3]>0){Tt();return}setTimeout(at.bind(null,Dt,Tt))}const J=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=W(x,976,J.length,J);const V=16,F=1482184792;let P=C(x,V);for(R=0,w=J.length-3;R<w;R+=4)P=P-F+C(J,R)|0;R<J.length&&(P=P-F+C(J+"XXX",R)|0),x=W(x,V,4,(0,n.string32)(P));const j=`url(data:font/opentype;base64,${btoa(x)});`,Z=`@font-face {font-family:"${J}";src:${j}}`;this.insertRule(Z);const vt=this._document.createElement("div");vt.style.visibility="hidden",vt.style.width=vt.style.height="10px",vt.style.position="absolute",vt.style.top=vt.style.left="0px";for(const Dt of[O.loadedName,J]){const Tt=this._document.createElement("span");Tt.textContent="Hi",Tt.style.fontFamily=Dt,vt.append(Tt)}this._document.body.append(vt),at(J,()=>{vt.remove(),M.complete()})}}D=new WeakMap;class A{constructor(O,{isEvalSupported:M=!0,disableFontFace:C=!1,ignoreErrors:W=!1,inspectFont:R=null}){this.compiledGlyphs=Object.create(null);for(const w in O)this[w]=O[w];this.isEvalSupported=M!==!1,this.disableFontFace=C===!0,this.ignoreErrors=W===!0,this._inspectFont=R}createNativeFontFace(){var M;if(!this.data||this.disableFontFace)return null;let O;if(!this.cssFontInfo)O=new FontFace(this.loadedName,this.data,{});else{const C={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(C.style=`oblique ${this.cssFontInfo.italicAngle}deg`),O=new FontFace(this.cssFontInfo.fontFamily,this.data,C)}return(M=this._inspectFont)==null||M.call(this,this),O}createFontFaceRule(){var W;if(!this.data||this.disableFontFace)return null;const O=(0,n.bytesToString)(this.data),M=`url(data:${this.mimetype};base64,${btoa(O)});`;let C;if(!this.cssFontInfo)C=`@font-face {font-family:"${this.loadedName}";src:${M}}`;else{let R=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(R+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),C=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${R}src:${M}}`}return(W=this._inspectFont)==null||W.call(this,this,M),C}getPathGenerator(O,M){if(this.compiledGlyphs[M]!==void 0)return this.compiledGlyphs[M];let C;try{C=O.get(this.loadedName+"_path_"+M)}catch(W){if(!this.ignoreErrors)throw W;return(0,n.warn)(`getPathGenerator - ignoring character: "${W}".`),this.compiledGlyphs[M]=function(R,w){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const W=[];for(const R of C){const w=R.args!==void 0?R.args.join(","):"";W.push("c.",R.cmd,"(",w,`);
`)}return this.compiledGlyphs[M]=new Function("c","size",W.join(""))}return this.compiledGlyphs[M]=function(W,R){for(const w of C)w.cmd==="scale"&&(w.args=[R,-R]),W[w.cmd].apply(W,w.args)}}}},62:(g,H,m)=>{var A,D;m.d(H,{Metadata:()=>$});var n=m(292);class ${constructor({parsedData:O,rawData:M}){h(this,A,void 0);h(this,D,void 0);T(this,A,O),T(this,D,M)}getRaw(){return t(this,D)}get(O){return t(this,A).get(O)??null}getAll(){return(0,n.objectFromMap)(t(this,A))}has(O){return t(this,A).has(O)}}A=new WeakMap,D=new WeakMap},457:(g,H,m)=>{m.d(H,{PDFNetworkStream:()=>M});var n=m(292),$=m(490);const A=200,D=206;function st(R){const w=R.response;return typeof w!="string"?w:(0,n.stringToBytes)(w).buffer}class O{constructor(w,N={}){this.url=w,this.isHttp=/^https?:/i.test(w),this.httpHeaders=this.isHttp&&N.httpHeaders||Object.create(null),this.withCredentials=N.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(w,N,B){const K={begin:w,end:N};for(const at in B)K[at]=B[at];return this.request(K)}requestFull(w){return this.request(w)}request(w){const N=new XMLHttpRequest,B=this.currXhrId++,K=this.pendingRequests[B]={xhr:N};N.open("GET",this.url),N.withCredentials=this.withCredentials;for(const at in this.httpHeaders){const J=this.httpHeaders[at];J!==void 0&&N.setRequestHeader(at,J)}return this.isHttp&&"begin"in w&&"end"in w?(N.setRequestHeader("Range",`bytes=${w.begin}-${w.end-1}`),K.expectedStatus=D):K.expectedStatus=A,N.responseType="arraybuffer",w.onError&&(N.onerror=function(at){w.onError(N.status)}),N.onreadystatechange=this.onStateChange.bind(this,B),N.onprogress=this.onProgress.bind(this,B),K.onHeadersReceived=w.onHeadersReceived,K.onDone=w.onDone,K.onError=w.onError,K.onProgress=w.onProgress,N.send(null),B}onProgress(w,N){var K;const B=this.pendingRequests[w];B&&((K=B.onProgress)==null||K.call(B,N))}onStateChange(w,N){var x,V,F;const B=this.pendingRequests[w];if(!B)return;const K=B.xhr;if(K.readyState>=2&&B.onHeadersReceived&&(B.onHeadersReceived(),delete B.onHeadersReceived),K.readyState!==4||!(w in this.pendingRequests))return;if(delete this.pendingRequests[w],K.status===0&&this.isHttp){(x=B.onError)==null||x.call(B,K.status);return}const at=K.status||A;if(!(at===A&&B.expectedStatus===D)&&at!==B.expectedStatus){(V=B.onError)==null||V.call(B,K.status);return}const J=st(K);if(at===D){const P=K.getResponseHeader("Content-Range"),j=/bytes (\d+)-(\d+)\/(\d+)/.exec(P);B.onDone({begin:parseInt(j[1],10),chunk:J})}else J?B.onDone({begin:0,chunk:J}):(F=B.onError)==null||F.call(B,K.status)}getRequestXhr(w){return this.pendingRequests[w].xhr}isPendingRequest(w){return w in this.pendingRequests}abortRequest(w){const N=this.pendingRequests[w].xhr;delete this.pendingRequests[w],N.abort()}}class M{constructor(w){this._source=w,this._manager=new O(w.url,{httpHeaders:w.httpHeaders,withCredentials:w.withCredentials}),this._rangeChunkSize=w.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(w){const N=this._rangeRequestReaders.indexOf(w);N>=0&&this._rangeRequestReaders.splice(N,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new C(this._manager,this._source),this._fullRequestReader}getRangeReader(w,N){const B=new W(this._manager,w,N);return B.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(B),B}cancelAllRequests(w){var N;(N=this._fullRequestReader)==null||N.cancel(w);for(const B of this._rangeRequestReaders.slice(0))B.cancel(w)}}class C{constructor(w,N){this._manager=w;const B={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=N.url,this._fullRequestId=w.requestFull(B),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=N.disableRange||!1,this._contentLength=N.length,this._rangeChunkSize=N.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const w=this._fullRequestId,N=this._manager.getRequestXhr(w),B=J=>N.getResponseHeader(J),{allowRangeRequests:K,suggestedLength:at}=(0,$.validateRangeRequestCapabilities)({getResponseHeader:B,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});K&&(this._isRangeSupported=!0),this._contentLength=at||this._contentLength,this._filename=(0,$.extractFilenameFromHeader)(B),this._isRangeSupported&&this._manager.abortRequest(w),this._headersReceivedCapability.resolve()}_onDone(w){if(w&&(this._requests.length>0?this._requests.shift().resolve({value:w.chunk,done:!1}):this._cachedChunks.push(w.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(w){this._storedError=(0,$.createResponseStatusError)(w,this._url),this._headersReceivedCapability.reject(this._storedError);for(const N of this._requests)N.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(w){var N;(N=this.onProgress)==null||N.call(this,{loaded:w.loaded,total:w.lengthComputable?w.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=Promise.withResolvers();return this._requests.push(w),w.promise}cancel(w){this._done=!0,this._headersReceivedCapability.reject(w);for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class W{constructor(w,N,B){this._manager=w;const K={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._requestId=w.requestRange(N,B,K),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var w;(w=this.onClosed)==null||w.call(this,this)}_onDone(w){const N=w.chunk;this._requests.length>0?this._requests.shift().resolve({value:N,done:!1}):this._queuedChunk=N,this._done=!0;for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(w){this._storedError=(0,$.createResponseStatusError)(w,this._url);for(const N of this._requests)N.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(w){var N;this.isStreamingSupported||((N=this.onProgress)==null||N.call(this,{loaded:w.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const N=this._queuedChunk;return this._queuedChunk=null,{value:N,done:!1}}if(this._done)return{value:void 0,done:!0};const w=Promise.withResolvers();return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},490:(g,H,m)=>{m.d(H,{createResponseStatusError:()=>O,extractFilenameFromHeader:()=>st,validateRangeRequestCapabilities:()=>D,validateResponseStatus:()=>M});var n=m(292);function $(C){let W=!0,R=w("filename\\*","i").exec(C);if(R){R=R[1];let V=at(R);return V=unescape(V),V=J(V),V=x(V),B(V)}if(R=K(C),R){const V=x(R);return B(V)}if(R=w("filename","i").exec(C),R){R=R[1];let V=at(R);return V=x(V),B(V)}function w(V,F){return new RegExp("(?:^|;)\\s*"+V+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',F)}function N(V,F){if(V){if(!/^[\x00-\xFF]+$/.test(F))return F;try{const P=new TextDecoder(V,{fatal:!0}),j=(0,n.stringToBytes)(F);F=P.decode(j),W=!1}catch{}}return F}function B(V){return W&&/[\x80-\xff]/.test(V)&&(V=N("utf-8",V),W&&(V=N("iso-8859-1",V))),V}function K(V){const F=[];let P;const j=w("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(P=j.exec(V))!==null;){let[,vt,Dt,Tt]=P;if(vt=parseInt(vt,10),vt in F){if(vt===0)break;continue}F[vt]=[Dt,Tt]}const Z=[];for(let vt=0;vt<F.length&&vt in F;++vt){let[Dt,Tt]=F[vt];Tt=at(Tt),Dt&&(Tt=unescape(Tt),vt===0&&(Tt=J(Tt))),Z.push(Tt)}return Z.join("")}function at(V){if(V.startsWith('"')){const F=V.slice(1).split('\\"');for(let P=0;P<F.length;++P){const j=F[P].indexOf('"');j!==-1&&(F[P]=F[P].slice(0,j),F.length=P+1),F[P]=F[P].replaceAll(/\\(.)/g,"$1")}V=F.join('"')}return V}function J(V){const F=V.indexOf("'");if(F===-1)return V;const P=V.slice(0,F),j=V.slice(F+1).replace(/^[^']*'/,"");return N(P,j)}function x(V){return!V.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(V)?V:V.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(F,P,j,Z){if(j==="q"||j==="Q")return Z=Z.replaceAll("_"," "),Z=Z.replaceAll(/=([0-9a-fA-F]{2})/g,function(vt,Dt){return String.fromCharCode(parseInt(Dt,16))}),N(P,Z);try{Z=atob(Z)}catch{}return N(P,Z)})}return""}var A=m(419);function D({getResponseHeader:C,isHttp:W,rangeChunkSize:R,disableRange:w}){const N={allowRangeRequests:!1,suggestedLength:void 0},B=parseInt(C("Content-Length"),10);return!Number.isInteger(B)||(N.suggestedLength=B,B<=2*R)||w||!W||C("Accept-Ranges")!=="bytes"||(C("Content-Encoding")||"identity")!=="identity"||(N.allowRangeRequests=!0),N}function st(C){const W=C("Content-Disposition");if(W){let R=$(W);if(R.includes("%"))try{R=decodeURIComponent(R)}catch{}if((0,A.isPdfFile)(R))return R}return null}function O(C,W){return C===404||C===0&&W.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+W+'".'):new n.UnexpectedResponseException(`Unexpected server response (${C}) while retrieving PDF "${W}".`,C)}function M(C){return C===200||C===206}},786:(g,H,m)=>{m.a(g,async(n,$)=>{try{let st=function(F){const P=R.parse(F);return P.protocol==="file:"||P.host?P:/^[a-z]:[/\\]/i.test(F)?R.parse(`file:///${F}`):(P.host||(P.protocol="file:"),P)},O=function(F,P){return{protocol:F.protocol,auth:F.auth,host:F.hostname,port:F.port,path:F.path,method:"GET",headers:P}};m.d(H,{PDFNodeStream:()=>N});var A=m(292),D=m(490);let M,C,W,R;A.isNodeJS&&(M=await ms(()=>import("./chunk.js"),[]),C=await ms(()=>import("./chunk.js"),[]),W=await ms(()=>import("./chunk.js"),[]),R=await ms(()=>import("./chunk.js"),[]));const w=/^file:\/\/\/[a-zA-Z]:\//;class N{constructor(P){this.source=P,this.url=st(P.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}getFullReader(){return(0,A.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new x(this):new at(this),this._fullRequestReader}getRangeReader(P,j){if(j<=this._progressiveDataLength)return null;const Z=this.isFsUrl?new V(this,P,j):new J(this,P,j);return this._rangeRequestReaders.push(Z),Z}cancelAllRequests(P){var j;(j=this._fullRequestReader)==null||j.cancel(P);for(const Z of this._rangeRequestReaders.slice(0))Z.cancel(P)}}class B{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null;const j=P.source;this._contentLength=j.length,this._loaded=0,this._filename=null,this._disableRange=j.disableRange||!1,this._rangeChunkSize=j.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!j.disableStream,this._isRangeSupported=!j.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var j;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=P.length,(j=this.onProgress)==null||j.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){if(!this._readableStream){this._error(P);return}this._readableStream.destroy(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",j=>{this._error(j)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new A.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class K{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const j=P.source;this._isStreamingSupported=!j.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var j;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=P.length,(j=this.onProgress)==null||j.call(this,{loaded:this._loaded}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){if(!this._readableStream){this._error(P);return}this._readableStream.destroy(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",j=>{this._error(j)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class at extends B{constructor(P){super(P);const j=Z=>{if(Z.statusCode===404){const Ot=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Ot,this._headersCapability.reject(Ot);return}this._headersCapability.resolve(),this._setReadableStream(Z);const vt=Ot=>this._readableStream.headers[Ot.toLowerCase()],{allowRangeRequests:Dt,suggestedLength:Tt}=(0,D.validateRangeRequestCapabilities)({getResponseHeader:vt,isHttp:P.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Dt,this._contentLength=Tt||this._contentLength,this._filename=(0,D.extractFilenameFromHeader)(vt)};this._request=null,this._url.protocol==="http:"?this._request=C.request(O(this._url,P.httpHeaders),j):this._request=W.request(O(this._url,P.httpHeaders),j),this._request.on("error",Z=>{this._storedError=Z,this._headersCapability.reject(Z)}),this._request.end()}}class J extends K{constructor(P,j,Z){super(P),this._httpHeaders={};for(const Dt in P.httpHeaders){const Tt=P.httpHeaders[Dt];Tt!==void 0&&(this._httpHeaders[Dt]=Tt)}this._httpHeaders.Range=`bytes=${j}-${Z-1}`;const vt=Dt=>{if(Dt.statusCode===404){const Tt=new A.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Tt;return}this._setReadableStream(Dt)};this._request=null,this._url.protocol==="http:"?this._request=C.request(O(this._url,this._httpHeaders),vt):this._request=W.request(O(this._url,this._httpHeaders),vt),this._request.on("error",Dt=>{this._storedError=Dt}),this._request.end()}}class x extends B{constructor(P){super(P);let j=decodeURIComponent(this._url.path);w.test(this._url.href)&&(j=j.replace(/^\//,"")),M.promises.lstat(j).then(Z=>{this._contentLength=Z.size,this._setReadableStream(M.createReadStream(j)),this._headersCapability.resolve()},Z=>{Z.code==="ENOENT"&&(Z=new A.MissingPDFException(`Missing PDF "${j}".`)),this._storedError=Z,this._headersCapability.reject(Z)})}}class V extends K{constructor(P,j,Z){super(P);let vt=decodeURIComponent(this._url.path);w.test(this._url.href)&&(vt=vt.replace(/^\//,"")),this._setReadableStream(M.createReadStream(vt,{start:j,end:Z-1}))}}$()}catch(st){$(st)}},1)},573:(g,H,m)=>{m.a(g,async(n,$)=>{try{m.d(H,{NodeCMapReaderFactory:()=>w,NodeCanvasFactory:()=>R,NodeFilterFactory:()=>W,NodeStandardFontDataFactory:()=>N});var A=m(583),D=m(292);let st,O,M;if(D.isNodeJS){st=await ms(()=>import("./chunk.js"),[]);try{O=await ms(()=>import("./chunk.js"),[])}catch{}try{M=await ms(()=>import("./chunk2.js"),[])}catch{}}const C=function(B){return st.promises.readFile(B).then(K=>new Uint8Array(K))};class W extends A.BaseFilterFactory{}class R extends A.BaseCanvasFactory{_createCanvas(K,at){return O.createCanvas(K,at)}}class w extends A.BaseCMapReaderFactory{_fetchData(K,at){return C(K).then(J=>({cMapData:J,compressionType:at}))}}class N extends A.BaseStandardFontDataFactory{_fetchData(K){return C(K)}}$()}catch(st){$(st)}},1)},626:(g,H,m)=>{var O,M,C,W,R,w,N,B,K,gr;m.d(H,{OptionalContentConfig:()=>st});var n=m(292),$=m(651);const A=Symbol("INTERNAL");class D{constructor(x,{name:V,intent:F,usage:P}){h(this,O,!1);h(this,M,!1);h(this,C,!1);h(this,W,!0);T(this,O,!!(x&n.RenderingIntentFlag.DISPLAY)),T(this,M,!!(x&n.RenderingIntentFlag.PRINT)),this.name=V,this.intent=F,this.usage=P}get visible(){if(t(this,C))return t(this,W);if(!t(this,W))return!1;const{print:x,view:V}=this.usage;return t(this,O)?(V==null?void 0:V.viewState)!=="OFF":t(this,M)?(x==null?void 0:x.printState)!=="OFF":!0}_setVisible(x,V,F=!1){x!==A&&(0,n.unreachable)("Internal method `_setVisible` called."),T(this,C,F),T(this,W,V)}}O=new WeakMap,M=new WeakMap,C=new WeakMap,W=new WeakMap;class st{constructor(x,V=n.RenderingIntentFlag.DISPLAY){h(this,K);h(this,R,null);h(this,w,new Map);h(this,N,null);h(this,B,null);if(this.renderingIntent=V,this.name=null,this.creator=null,x!==null){this.name=x.name,this.creator=x.creator,T(this,B,x.order);for(const F of x.groups)t(this,w).set(F.id,new D(V,F));if(x.baseState==="OFF")for(const F of t(this,w).values())F._setVisible(A,!1);for(const F of x.on)t(this,w).get(F)._setVisible(A,!0);for(const F of x.off)t(this,w).get(F)._setVisible(A,!1);T(this,N,this.getHash())}}isVisible(x){if(t(this,w).size===0)return!0;if(!x)return(0,n.info)("Optional content group not defined."),!0;if(x.type==="OCG")return t(this,w).has(x.id)?t(this,w).get(x.id).visible:((0,n.warn)(`Optional content group not found: ${x.id}`),!0);if(x.type==="OCMD"){if(x.expression)return y(this,K,gr).call(this,x.expression);if(!x.policy||x.policy==="AnyOn"){for(const V of x.ids){if(!t(this,w).has(V))return(0,n.warn)(`Optional content group not found: ${V}`),!0;if(t(this,w).get(V).visible)return!0}return!1}else if(x.policy==="AllOn"){for(const V of x.ids){if(!t(this,w).has(V))return(0,n.warn)(`Optional content group not found: ${V}`),!0;if(!t(this,w).get(V).visible)return!1}return!0}else if(x.policy==="AnyOff"){for(const V of x.ids){if(!t(this,w).has(V))return(0,n.warn)(`Optional content group not found: ${V}`),!0;if(!t(this,w).get(V).visible)return!0}return!1}else if(x.policy==="AllOff"){for(const V of x.ids){if(!t(this,w).has(V))return(0,n.warn)(`Optional content group not found: ${V}`),!0;if(t(this,w).get(V).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${x.policy}.`),!0}return(0,n.warn)(`Unknown group type ${x.type}.`),!0}setVisibility(x,V=!0){const F=t(this,w).get(x);if(!F){(0,n.warn)(`Optional content group not found: ${x}`);return}F._setVisible(A,!!V,!0),T(this,R,null)}setOCGState({state:x,preserveRB:V}){let F;for(const P of x){switch(P){case"ON":case"OFF":case"Toggle":F=P;continue}const j=t(this,w).get(P);if(j)switch(F){case"ON":j._setVisible(A,!0);break;case"OFF":j._setVisible(A,!1);break;case"Toggle":j._setVisible(A,!j.visible);break}}T(this,R,null)}get hasInitialVisibility(){return t(this,N)===null||this.getHash()===t(this,N)}getOrder(){return t(this,w).size?t(this,B)?t(this,B).slice():[...t(this,w).keys()]:null}getGroups(){return t(this,w).size>0?(0,n.objectFromMap)(t(this,w)):null}getGroup(x){return t(this,w).get(x)||null}getHash(){if(t(this,R)!==null)return t(this,R);const x=new $.MurmurHash3_64;for(const[V,F]of t(this,w))x.update(`${V}:${F.visible}`);return T(this,R,x.hexdigest())}}R=new WeakMap,w=new WeakMap,N=new WeakMap,B=new WeakMap,K=new WeakSet,gr=function(x){const V=x.length;if(V<2)return!0;const F=x[0];for(let P=1;P<V;P++){const j=x[P];let Z;if(Array.isArray(j))Z=y(this,K,gr).call(this,j);else if(t(this,w).has(j))Z=t(this,w).get(j).visible;else return(0,n.warn)(`Optional content group not found: ${j}`),!0;switch(F){case"And":if(!Z)return!1;break;case"Or":if(Z)return!0;break;case"Not":return!Z;default:return!0}}return F==="And"}},814:(g,H,m)=>{m.d(H,{cleanupTextLayer:()=>W,renderTextLayer:()=>at,updateTextLayer:()=>J});var n=m(292),$=m(419);const A=1e5,D=30,st=.8,O=new Map;let M=null;function C(){if(!M){const x=document.createElement("canvas");x.className="hiddenCanvasElement",document.body.append(x),M=x.getContext("2d",{alpha:!1})}return M}function W(){M==null||M.canvas.remove(),M=null}function R(x){const V=O.get(x);if(V)return V;const F=C(),P=F.font;F.canvas.width=F.canvas.height=D,F.font=`${D}px ${x}`;const j=F.measureText("");let Z=j.fontBoundingBoxAscent,vt=Math.abs(j.fontBoundingBoxDescent);if(Z){const Tt=Z/(Z+vt);return O.set(x,Tt),F.canvas.width=F.canvas.height=0,F.font=P,Tt}F.strokeStyle="red",F.clearRect(0,0,D,D),F.strokeText("g",0,0);let Dt=F.getImageData(0,0,D,D).data;vt=0;for(let Tt=Dt.length-1-3;Tt>=0;Tt-=4)if(Dt[Tt]>0){vt=Math.ceil(Tt/4/D);break}F.clearRect(0,0,D,D),F.strokeText("A",0,D),Dt=F.getImageData(0,0,D,D).data,Z=0;for(let Tt=0,Ot=Dt.length;Tt<Ot;Tt+=4)if(Dt[Tt]>0){Z=D-Math.floor(Tt/4/D);break}if(F.canvas.width=F.canvas.height=0,F.font=P,Z){const Tt=Z/(Z+vt);return O.set(x,Tt),Tt}return O.set(x,st),st}function w(x,V,F){const P=document.createElement("span"),j={angle:0,canvasWidth:0,hasText:V.str!=="",hasEOL:V.hasEOL,fontSize:0};x._textDivs.push(P);const Z=n.Util.transform(x._transform,V.transform);let vt=Math.atan2(Z[1],Z[0]);const Dt=F[V.fontName];Dt.vertical&&(vt+=Math.PI/2);const Tt=x._fontInspectorEnabled&&Dt.fontSubstitution||Dt.fontFamily,Ot=Math.hypot(Z[2],Z[3]),_t=Ot*R(Tt);let Mt,Pt;vt===0?(Mt=Z[4],Pt=Z[5]-_t):(Mt=Z[4]+_t*Math.sin(vt),Pt=Z[5]-_t*Math.cos(vt));const Et="calc(var(--scale-factor)*",Q=P.style;x._container===x._rootContainer?(Q.left=`${(100*Mt/x._pageWidth).toFixed(2)}%`,Q.top=`${(100*Pt/x._pageHeight).toFixed(2)}%`):(Q.left=`${Et}${Mt.toFixed(2)}px)`,Q.top=`${Et}${Pt.toFixed(2)}px)`),Q.fontSize=`${Et}${Ot.toFixed(2)}px)`,Q.fontFamily=Tt,j.fontSize=Ot,P.setAttribute("role","presentation"),P.textContent=V.str,P.dir=V.dir,x._fontInspectorEnabled&&(P.dataset.fontName=Dt.fontSubstitutionLoadedName||V.fontName),vt!==0&&(j.angle=vt*(180/Math.PI));let gt=!1;if(V.str.length>1)gt=!0;else if(V.str!==" "&&V.transform[0]!==V.transform[3]){const kt=Math.abs(V.transform[0]),Rt=Math.abs(V.transform[3]);kt!==Rt&&Math.max(kt,Rt)/Math.min(kt,Rt)>1.5&&(gt=!0)}gt&&(j.canvasWidth=Dt.vertical?V.height:V.width),x._textDivProperties.set(P,j),x._isReadableStream&&x._layoutText(P)}function N(x){const{div:V,scale:F,properties:P,ctx:j,prevFontSize:Z,prevFontFamily:vt}=x,{style:Dt}=V;let Tt="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:Ot}=Dt,{canvasWidth:_t,fontSize:Mt}=P;(Z!==Mt||vt!==Ot)&&(j.font=`${Mt*F}px ${Ot}`,x.prevFontSize=Mt,x.prevFontFamily=Ot);const{width:Pt}=j.measureText(V.textContent);Pt>0&&(Tt=`scaleX(${_t*F/Pt})`)}P.angle!==0&&(Tt=`rotate(${P.angle}deg) ${Tt}`),Tt.length>0&&(Dt.transform=Tt)}function B(x){if(x._canceled)return;const V=x._textDivs,F=x._capability;if(V.length>A){F.resolve();return}if(!x._isReadableStream)for(const P of V)x._layoutText(P);F.resolve()}class K{constructor({textContentSource:V,container:F,viewport:P,textDivs:j,textDivProperties:Z,textContentItemsStr:vt}){var Mt;this._textContentSource=V,this._isReadableStream=V instanceof ReadableStream,this._container=this._rootContainer=F,this._textDivs=j||[],this._textContentItemsStr=vt||[],this._fontInspectorEnabled=!!((Mt=globalThis.FontInspector)!=null&&Mt.enabled),this._reader=null,this._textDivProperties=Z||new WeakMap,this._canceled=!1,this._capability=Promise.withResolvers(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:C()};const{pageWidth:Dt,pageHeight:Tt,pageX:Ot,pageY:_t}=P.rawDims;this._transform=[1,0,0,-1,-Ot,_t+Tt],this._pageWidth=Dt,this._pageHeight=Tt,(0,$.setLayerDimensions)(F,P),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(V,F){for(const P of V){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const j=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),j.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),w(this,P,F)}}_layoutText(V){const F=this._layoutTextParams.properties=this._textDivProperties.get(V);if(this._layoutTextParams.div=V,N(this._layoutTextParams),F.hasText&&this._container.append(V),F.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const{promise:V,resolve:F,reject:P}=Promise.withResolvers();let j=Object.create(null);if(this._isReadableStream){const Z=()=>{this._reader.read().then(({value:vt,done:Dt})=>{if(Dt){F();return}Object.assign(j,vt.styles),this._processItems(vt.items,j),Z()},P)};this._reader=this._textContentSource.getReader(),Z()}else if(this._textContentSource){const{items:Z,styles:vt}=this._textContentSource;this._processItems(Z,vt),F()}else throw new Error('No "textContentSource" parameter specified.');V.then(()=>{j=null,B(this)},this._capability.reject)}}function at(x){const V=new K(x);return V._render(),V}function J({container:x,viewport:V,textDivs:F,textDivProperties:P,mustRotate:j=!0,mustRescale:Z=!0}){if(j&&(0,$.setLayerDimensions)(x,{rotation:V.rotation}),Z){const vt=C(),Dt={prevFontSize:null,prevFontFamily:null,div:null,scale:V.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:vt};for(const Tt of F)Dt.properties=P.get(Tt),Dt.div=Tt,N(Dt)}}},585:(g,H,m)=>{m.d(H,{PDFDataTransportStream:()=>A});var n=m(292),$=m(419);class A{constructor(M,{disableRange:C=!1,disableStream:W=!1}){(0,n.assert)(M,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:R,initialData:w,progressiveDone:N,contentDispositionFilename:B}=M;if(this._queuedChunks=[],this._progressiveDone=N,this._contentDispositionFilename=B,(w==null?void 0:w.length)>0){const K=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;this._queuedChunks.push(K)}this._pdfDataRangeTransport=M,this._isStreamingSupported=!W,this._isRangeSupported=!C,this._contentLength=R,this._fullRequestReader=null,this._rangeReaders=[],M.addRangeListener((K,at)=>{this._onReceiveData({begin:K,chunk:at})}),M.addProgressListener((K,at)=>{this._onProgress({loaded:K,total:at})}),M.addProgressiveReadListener(K=>{this._onReceiveData({chunk:K})}),M.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),M.transportReady()}_onReceiveData({begin:M,chunk:C}){const W=C instanceof Uint8Array&&C.byteLength===C.buffer.byteLength?C.buffer:new Uint8Array(C).buffer;if(M===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(W):this._queuedChunks.push(W);else{const R=this._rangeReaders.some(function(w){return w._begin!==M?!1:(w._enqueue(W),!0)});(0,n.assert)(R,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var M;return((M=this._fullRequestReader)==null?void 0:M._loaded)??0}_onProgress(M){var C,W,R,w;M.total===void 0?(W=(C=this._rangeReaders[0])==null?void 0:C.onProgress)==null||W.call(C,{loaded:M.loaded}):(w=(R=this._fullRequestReader)==null?void 0:R.onProgress)==null||w.call(R,{loaded:M.loaded,total:M.total})}_onProgressiveDone(){var M;(M=this._fullRequestReader)==null||M.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(M){const C=this._rangeReaders.indexOf(M);C>=0&&this._rangeReaders.splice(C,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const M=this._queuedChunks;return this._queuedChunks=null,new D(this,M,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(M,C){if(C<=this._progressiveDataLength)return null;const W=new st(this,M,C);return this._pdfDataRangeTransport.requestDataRange(M,C),this._rangeReaders.push(W),W}cancelAllRequests(M){var C;(C=this._fullRequestReader)==null||C.cancel(M);for(const W of this._rangeReaders.slice(0))W.cancel(M);this._pdfDataRangeTransport.abort()}}class D{constructor(M,C,W=!1,R=null){this._stream=M,this._done=W||!1,this._filename=(0,$.isPdfFile)(R)?R:null,this._queuedChunks=C||[],this._loaded=0;for(const w of this._queuedChunks)this._loaded+=w.byteLength;this._requests=[],this._headersReady=Promise.resolve(),M._fullRequestReader=this,this.onProgress=null}_enqueue(M){this._done||(this._requests.length>0?this._requests.shift().resolve({value:M,done:!1}):this._queuedChunks.push(M),this._loaded+=M.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const M=Promise.withResolvers();return this._requests.push(M),M.promise}cancel(M){this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class st{constructor(M,C,W){this._stream=M,this._begin=C,this._end=W,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(M){if(!this._done){if(this._requests.length===0)this._queuedChunk=M;else{this._requests.shift().resolve({value:M,done:!1});for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const C=this._queuedChunk;return this._queuedChunk=null,{value:C,done:!1}}if(this._done)return{value:void 0,done:!0};const M=Promise.withResolvers();return this._requests.push(M),M.promise}cancel(M){this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},164:(g,H,m)=>{var $,A;m.d(H,{GlobalWorkerOptions:()=>n});class n{static get workerPort(){return t(this,$)}static set workerPort(st){if(!(typeof Worker<"u"&&st instanceof Worker)&&st!==null)throw new Error("Invalid `workerPort` type.");T(this,$,st)}static get workerSrc(){return t(this,A)}static set workerSrc(st){if(typeof st!="string")throw new Error("Invalid `workerSrc` type.");T(this,A,st)}}$=new WeakMap,A=new WeakMap,h(n,$,null),h(n,A,"")},284:(g,H,m)=>{m.d(H,{XfaLayer:()=>$});var n=m(50);class ${static setupStorage(D,st,O,M,C){const W=M.getValue(st,{value:null});switch(O.name){case"textarea":if(W.value!==null&&(D.textContent=W.value),C==="print")break;D.addEventListener("input",R=>{M.setValue(st,{value:R.target.value})});break;case"input":if(O.attributes.type==="radio"||O.attributes.type==="checkbox"){if(W.value===O.attributes.xfaOn?D.setAttribute("checked",!0):W.value===O.attributes.xfaOff&&D.removeAttribute("checked"),C==="print")break;D.addEventListener("change",R=>{M.setValue(st,{value:R.target.checked?R.target.getAttribute("xfaOn"):R.target.getAttribute("xfaOff")})})}else{if(W.value!==null&&D.setAttribute("value",W.value),C==="print")break;D.addEventListener("input",R=>{M.setValue(st,{value:R.target.value})})}break;case"select":if(W.value!==null){D.setAttribute("value",W.value);for(const R of O.children)R.attributes.value===W.value?R.attributes.selected=!0:R.attributes.hasOwnProperty("selected")&&delete R.attributes.selected}D.addEventListener("input",R=>{const w=R.target.options,N=w.selectedIndex===-1?"":w[w.selectedIndex].value;M.setValue(st,{value:N})});break}}static setAttributes({html:D,element:st,storage:O=null,intent:M,linkService:C}){const{attributes:W}=st,R=D instanceof HTMLAnchorElement;W.type==="radio"&&(W.name=`${W.name}-${M}`);for(const[w,N]of Object.entries(W))if(N!=null)switch(w){case"class":N.length&&D.setAttribute(w,N.join(" "));break;case"dataId":break;case"id":D.setAttribute("data-element-id",N);break;case"style":Object.assign(D.style,N);break;case"textContent":D.textContent=N;break;default:(!R||w!=="href"&&w!=="newWindow")&&D.setAttribute(w,N)}R&&C.addLinkAttributes(D,W.href,W.newWindow),O&&W.dataId&&this.setupStorage(D,W.dataId,st,O)}static render(D){var K,at;const st=D.annotationStorage,O=D.linkService,M=D.xfaHtml,C=D.intent||"display",W=document.createElement(M.name);M.attributes&&this.setAttributes({html:W,element:M,intent:C,linkService:O});const R=C!=="richText",w=D.div;if(w.append(W),D.viewport){const J=`matrix(${D.viewport.transform.join(",")})`;w.style.transform=J}R&&w.setAttribute("class","xfaLayer xfaFont");const N=[];if(M.children.length===0){if(M.value){const J=document.createTextNode(M.value);W.append(J),R&&n.XfaText.shouldBuildText(M.name)&&N.push(J)}return{textDivs:N}}const B=[[M,-1,W]];for(;B.length>0;){const[J,x,V]=B.at(-1);if(x+1===J.children.length){B.pop();continue}const F=J.children[++B.at(-1)[1]];if(F===null)continue;const{name:P}=F;if(P==="#text"){const Z=document.createTextNode(F.value);N.push(Z),V.append(Z);continue}const j=(K=F==null?void 0:F.attributes)!=null&&K.xmlns?document.createElementNS(F.attributes.xmlns,P):document.createElement(P);if(V.append(j),F.attributes&&this.setAttributes({html:j,element:F,storage:st,intent:C,linkService:O}),((at=F.children)==null?void 0:at.length)>0)B.push([F,-1,j]);else if(F.value){const Z=document.createTextNode(F.value);R&&n.XfaText.shouldBuildText(P)&&N.push(Z),j.append(Z)}}for(const J of w.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))J.setAttribute("readOnly",!0);return{textDivs:N}}static update(D){const st=`matrix(${D.viewport.transform.join(",")})`;D.div.style.transform=st,D.div.hidden=!1}}},50:(g,H,m)=>{m.d(H,{XfaText:()=>n});class n{static textContent(A){const D=[],st={items:D,styles:Object.create(null)};function O(M){var R;if(!M)return;let C=null;const W=M.name;if(W==="#text")C=M.value;else if(n.shouldBuildText(W))(R=M==null?void 0:M.attributes)!=null&&R.textContent?C=M.attributes.textContent:M.value&&(C=M.value);else return;if(C!==null&&D.push({str:C}),!!M.children)for(const w of M.children)O(w)}return O(A),st}static shouldBuildText(A){return!(A==="textarea"||A==="input"||A==="option"||A==="select")}}},228:(g,H,m)=>{m.a(g,async(n,$)=>{try{m.d(H,{AbortException:()=>A.AbortException,AnnotationEditorLayer:()=>M.AnnotationEditorLayer,AnnotationEditorParamsType:()=>A.AnnotationEditorParamsType,AnnotationEditorType:()=>A.AnnotationEditorType,AnnotationEditorUIManager:()=>C.AnnotationEditorUIManager,AnnotationLayer:()=>W.AnnotationLayer,AnnotationMode:()=>A.AnnotationMode,CMapCompressionType:()=>A.CMapCompressionType,ColorPicker:()=>R.ColorPicker,DOMSVGFactory:()=>st.DOMSVGFactory,DrawLayer:()=>w.DrawLayer,FeatureTest:()=>A.FeatureTest,GlobalWorkerOptions:()=>N.GlobalWorkerOptions,ImageKind:()=>A.ImageKind,InvalidPDFException:()=>A.InvalidPDFException,MissingPDFException:()=>A.MissingPDFException,OPS:()=>A.OPS,Outliner:()=>B.Outliner,PDFDataRangeTransport:()=>D.PDFDataRangeTransport,PDFDateString:()=>st.PDFDateString,PDFWorker:()=>D.PDFWorker,PasswordResponses:()=>A.PasswordResponses,PermissionFlag:()=>A.PermissionFlag,PixelsPerInch:()=>st.PixelsPerInch,RenderingCancelledException:()=>st.RenderingCancelledException,UnexpectedResponseException:()=>A.UnexpectedResponseException,Util:()=>A.Util,VerbosityLevel:()=>A.VerbosityLevel,XfaLayer:()=>K.XfaLayer,build:()=>D.build,createValidAbsoluteUrl:()=>A.createValidAbsoluteUrl,fetchData:()=>st.fetchData,getDocument:()=>D.getDocument,getFilenameFromUrl:()=>st.getFilenameFromUrl,getPdfFilenameFromUrl:()=>st.getPdfFilenameFromUrl,getXfaPageViewport:()=>st.getXfaPageViewport,isDataScheme:()=>st.isDataScheme,isPdfFile:()=>st.isPdfFile,noContextMenu:()=>st.noContextMenu,normalizeUnicode:()=>A.normalizeUnicode,renderTextLayer:()=>O.renderTextLayer,setLayerDimensions:()=>st.setLayerDimensions,shadow:()=>A.shadow,updateTextLayer:()=>O.updateTextLayer,version:()=>D.version});var A=m(292),D=m(831),st=m(419),O=m(814),M=m(731),C=m(830),W=m(976),R=m(259),w=m(47),N=m(164),B=m(61),K=m(284),at=n([D]);D=(at.then?(await at)():at)[0];const J="4.1.392",x="fcb76a78d";$()}catch(J){$(J)}})},178:(g,H,m)=>{var O,ja,C,qa,R,un;m.d(H,{MessageHandler:()=>st});var n=m(292);const $={UNKNOWN:0,DATA:1,ERROR:2},A={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function D(N){switch(N instanceof Error||typeof N=="object"&&N!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),N.name){case"AbortException":return new n.AbortException(N.message);case"MissingPDFException":return new n.MissingPDFException(N.message);case"PasswordException":return new n.PasswordException(N.message,N.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(N.message,N.status);case"UnknownErrorException":return new n.UnknownErrorException(N.message,N.details);default:return new n.UnknownErrorException(N.message,N.toString())}}class st{constructor(B,K,at){h(this,O);h(this,C);h(this,R);this.sourceName=B,this.targetName=K,this.comObj=at,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=J=>{const x=J.data;if(x.targetName!==this.sourceName)return;if(x.stream){y(this,C,qa).call(this,x);return}if(x.callback){const F=x.callbackId,P=this.callbackCapabilities[F];if(!P)throw new Error(`Cannot resolve callback ${F}`);if(delete this.callbackCapabilities[F],x.callback===$.DATA)P.resolve(x.data);else if(x.callback===$.ERROR)P.reject(D(x.reason));else throw new Error("Unexpected callback case");return}const V=this.actionHandler[x.action];if(!V)throw new Error(`Unknown action from worker: ${x.action}`);if(x.callbackId){const F=this.sourceName,P=x.sourceName;new Promise(function(j){j(V(x.data))}).then(function(j){at.postMessage({sourceName:F,targetName:P,callback:$.DATA,callbackId:x.callbackId,data:j})},function(j){at.postMessage({sourceName:F,targetName:P,callback:$.ERROR,callbackId:x.callbackId,reason:D(j)})});return}if(x.streamId){y(this,O,ja).call(this,x);return}V(x.data)},at.addEventListener("message",this._onComObjOnMessage)}on(B,K){const at=this.actionHandler;if(at[B])throw new Error(`There is already an actionName called "${B}"`);at[B]=K}send(B,K,at){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:B,data:K},at)}sendWithPromise(B,K,at){const J=this.callbackId++,x=Promise.withResolvers();this.callbackCapabilities[J]=x;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:B,callbackId:J,data:K},at)}catch(V){x.reject(V)}return x.promise}sendWithStream(B,K,at,J){const x=this.streamId++,V=this.sourceName,F=this.targetName,P=this.comObj;return new ReadableStream({start:j=>{const Z=Promise.withResolvers();return this.streamControllers[x]={controller:j,startCall:Z,pullCall:null,cancelCall:null,isClosed:!1},P.postMessage({sourceName:V,targetName:F,action:B,streamId:x,data:K,desiredSize:j.desiredSize},J),Z.promise},pull:j=>{const Z=Promise.withResolvers();return this.streamControllers[x].pullCall=Z,P.postMessage({sourceName:V,targetName:F,stream:A.PULL,streamId:x,desiredSize:j.desiredSize}),Z.promise},cancel:j=>{(0,n.assert)(j instanceof Error,"cancel must have a valid reason");const Z=Promise.withResolvers();return this.streamControllers[x].cancelCall=Z,this.streamControllers[x].isClosed=!0,P.postMessage({sourceName:V,targetName:F,stream:A.CANCEL,streamId:x,reason:D(j)}),Z.promise}},at)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}O=new WeakSet,ja=function(B){const K=B.streamId,at=this.sourceName,J=B.sourceName,x=this.comObj,V=this,F=this.actionHandler[B.action],P={enqueue(j,Z=1,vt){if(this.isCancelled)return;const Dt=this.desiredSize;this.desiredSize-=Z,Dt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),x.postMessage({sourceName:at,targetName:J,stream:A.ENQUEUE,streamId:K,chunk:j},vt)},close(){this.isCancelled||(this.isCancelled=!0,x.postMessage({sourceName:at,targetName:J,stream:A.CLOSE,streamId:K}),delete V.streamSinks[K])},error(j){(0,n.assert)(j instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,x.postMessage({sourceName:at,targetName:J,stream:A.ERROR,streamId:K,reason:D(j)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:B.desiredSize,ready:null};P.sinkCapability.resolve(),P.ready=P.sinkCapability.promise,this.streamSinks[K]=P,new Promise(function(j){j(F(B.data,P))}).then(function(){x.postMessage({sourceName:at,targetName:J,stream:A.START_COMPLETE,streamId:K,success:!0})},function(j){x.postMessage({sourceName:at,targetName:J,stream:A.START_COMPLETE,streamId:K,reason:D(j)})})},C=new WeakSet,qa=function(B){const K=B.streamId,at=this.sourceName,J=B.sourceName,x=this.comObj,V=this.streamControllers[K],F=this.streamSinks[K];switch(B.stream){case A.START_COMPLETE:B.success?V.startCall.resolve():V.startCall.reject(D(B.reason));break;case A.PULL_COMPLETE:B.success?V.pullCall.resolve():V.pullCall.reject(D(B.reason));break;case A.PULL:if(!F){x.postMessage({sourceName:at,targetName:J,stream:A.PULL_COMPLETE,streamId:K,success:!0});break}F.desiredSize<=0&&B.desiredSize>0&&F.sinkCapability.resolve(),F.desiredSize=B.desiredSize,new Promise(function(P){var j;P((j=F.onPull)==null?void 0:j.call(F))}).then(function(){x.postMessage({sourceName:at,targetName:J,stream:A.PULL_COMPLETE,streamId:K,success:!0})},function(P){x.postMessage({sourceName:at,targetName:J,stream:A.PULL_COMPLETE,streamId:K,reason:D(P)})});break;case A.ENQUEUE:if((0,n.assert)(V,"enqueue should have stream controller"),V.isClosed)break;V.controller.enqueue(B.chunk);break;case A.CLOSE:if((0,n.assert)(V,"close should have stream controller"),V.isClosed)break;V.isClosed=!0,V.controller.close(),y(this,R,un).call(this,V,K);break;case A.ERROR:(0,n.assert)(V,"error should have stream controller"),V.controller.error(D(B.reason)),y(this,R,un).call(this,V,K);break;case A.CANCEL_COMPLETE:B.success?V.cancelCall.resolve():V.cancelCall.reject(D(B.reason)),y(this,R,un).call(this,V,K);break;case A.CANCEL:if(!F)break;new Promise(function(P){var j;P((j=F.onCancel)==null?void 0:j.call(F,D(B.reason)))}).then(function(){x.postMessage({sourceName:at,targetName:J,stream:A.CANCEL_COMPLETE,streamId:K,success:!0})},function(P){x.postMessage({sourceName:at,targetName:J,stream:A.CANCEL_COMPLETE,streamId:K,reason:D(P)})}),F.sinkCapability.reject(D(B.reason)),F.isCancelled=!0,delete this.streamSinks[K];break;default:throw new Error("Unexpected stream case")}},R=new WeakSet,un=async function(B,K){var at,J,x;await Promise.allSettled([(at=B.startCall)==null?void 0:at.promise,(J=B.pullCall)==null?void 0:J.promise,(x=B.cancelCall)==null?void 0:x.promise]),delete this.streamControllers[K]}},651:(g,H,m)=>{m.d(H,{MurmurHash3_64:()=>D});const n=3285377520,$=4294901760,A=65535;class D{constructor(O){this.h1=O?O&4294967295:n,this.h2=O?O&4294967295:n}update(O){let M,C;if(typeof O=="string"){M=new Uint8Array(O.length*2),C=0;for(let P=0,j=O.length;P<j;P++){const Z=O.charCodeAt(P);Z<=255?M[C++]=Z:(M[C++]=Z>>>8,M[C++]=Z&255)}}else if(ArrayBuffer.isView(O))M=O.slice(),C=M.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const W=C>>2,R=C-W*4,w=new Uint32Array(M.buffer,0,W);let N=0,B=0,K=this.h1,at=this.h2;const J=3432918353,x=461845907,V=J&A,F=x&A;for(let P=0;P<W;P++)P&1?(N=w[P],N=N*J&$|N*V&A,N=N<<15|N>>>17,N=N*x&$|N*F&A,K^=N,K=K<<13|K>>>19,K=K*5+3864292196):(B=w[P],B=B*J&$|B*V&A,B=B<<15|B>>>17,B=B*x&$|B*F&A,at^=B,at=at<<13|at>>>19,at=at*5+3864292196);switch(N=0,R){case 3:N^=M[W*4+2]<<16;case 2:N^=M[W*4+1]<<8;case 1:N^=M[W*4],N=N*J&$|N*V&A,N=N<<15|N>>>17,N=N*x&$|N*F&A,W&1?K^=N:at^=N}this.h1=K,this.h2=at}hexdigest(){let O=this.h1,M=this.h2;return O^=M>>>1,O=O*3981806797&$|O*36045&A,M=M*4283543511&$|((M<<16|O>>>16)*2950163797&$)>>>16,O^=M>>>1,O=O*444984403&$|O*60499&A,M=M*3301882366&$|((M<<16|O>>>16)*3120437893&$)>>>16,O^=M>>>1,(O>>>0).toString(16).padStart(8,"0")+(M>>>0).toString(16).padStart(8,"0")}}},292:(g,H,m)=>{var a,pn,p,fr;m.d(H,{AbortException:()=>ie,AnnotationBorderStyleType:()=>at,AnnotationEditorParamsType:()=>R,AnnotationEditorPrefix:()=>C,AnnotationEditorType:()=>W,AnnotationMode:()=>M,AnnotationPrefix:()=>d,AnnotationType:()=>K,BaseException:()=>Et,CMapCompressionType:()=>x,FONT_IDENTITY_MATRIX:()=>A,FeatureTest:()=>Te,FormatError:()=>Kt,IDENTITY_MATRIX:()=>$,ImageKind:()=>B,InvalidPDFException:()=>kt,LINE_FACTOR:()=>st,MAX_IMAGE_SIZE_TO_CACHE:()=>D,MissingPDFException:()=>Rt,OPS:()=>V,PasswordException:()=>Q,PasswordResponses:()=>F,PermissionFlag:()=>w,RenderingIntentFlag:()=>O,TextRenderingMode:()=>N,UnexpectedResponseException:()=>qt,UnknownErrorException:()=>gt,Util:()=>Ee,VerbosityLevel:()=>J,assert:()=>Ot,bytesToString:()=>xe,createValidAbsoluteUrl:()=>Mt,getUuid:()=>l,getVerbosityLevel:()=>Z,info:()=>vt,isNodeJS:()=>n,normalizeUnicode:()=>i,objectFromMap:()=>ve,setVerbosityLevel:()=>j,shadow:()=>Pt,string32:()=>le,stringToBytes:()=>de,unreachable:()=>Tt,warn:()=>Dt});const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),$=[1,0,0,1,0,0],A=[.001,0,0,.001,0,0],D=1e7,st=1.35,O={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},M={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},C="pdfjs_internal_editor_",W={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},R={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},w={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},N={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},B={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},K={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},at={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},J={ERRORS:0,WARNINGS:1,INFOS:5},x={NONE:0,BINARY:1},V={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},F={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let P=J.WARNINGS;function j(c){Number.isInteger(c)&&(P=c)}function Z(){return P}function vt(c){P>=J.INFOS&&console.log(`Info: ${c}`)}function Dt(c){P>=J.WARNINGS&&console.log(`Warning: ${c}`)}function Tt(c){throw new Error(c)}function Ot(c,r){c||Tt(r)}function _t(c){switch(c==null?void 0:c.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Mt(c,r=null,o=null){var E;if(!c)return null;try{if(o&&typeof c=="string"&&(o.addDefaultProtocol&&c.startsWith("www.")&&((E=c.match(/\./g))==null?void 0:E.length)>=2&&(c=`http://${c}`),o.tryConvertEncoding))try{c=ne(c)}catch{}const U=r?new URL(c,r):new URL(c);if(_t(U))return U}catch{}return null}function Pt(c,r,o,E=!1){return Object.defineProperty(c,r,{value:o,enumerable:!E,configurable:!0,writable:!1}),o}const Et=function(){function c(r,o){this.constructor===c&&Tt("Cannot initialize BaseException."),this.message=r,this.name=o}return c.prototype=new Error,c.constructor=c,c}();class Q extends Et{constructor(r,o){super(r,"PasswordException"),this.code=o}}class gt extends Et{constructor(r,o){super(r,"UnknownErrorException"),this.details=o}}class kt extends Et{constructor(r){super(r,"InvalidPDFException")}}class Rt extends Et{constructor(r){super(r,"MissingPDFException")}}class qt extends Et{constructor(r,o){super(r,"UnexpectedResponseException"),this.status=o}}class Kt extends Et{constructor(r){super(r,"FormatError")}}class ie extends Et{constructor(r){super(r,"AbortException")}}function xe(c){(typeof c!="object"||(c==null?void 0:c.length)===void 0)&&Tt("Invalid argument for bytesToString");const r=c.length,o=8192;if(r<o)return String.fromCharCode.apply(null,c);const E=[];for(let U=0;U<r;U+=o){const G=Math.min(U+o,r),rt=c.subarray(U,G);E.push(String.fromCharCode.apply(null,rt))}return E.join("")}function de(c){typeof c!="string"&&Tt("Invalid argument for stringToBytes");const r=c.length,o=new Uint8Array(r);for(let E=0;E<r;++E)o[E]=c.charCodeAt(E)&255;return o}function le(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function ve(c){const r=Object.create(null);for(const[o,E]of c)r[o]=E;return r}function Vt(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function ae(){try{return new Function(""),!0}catch{return!1}}class Te{static get isLittleEndian(){return Pt(this,"isLittleEndian",Vt())}static get isEvalSupported(){return Pt(this,"isEvalSupported",ae())}static get isOffscreenCanvasSupported(){return Pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Pt(this,"platform",{isMac:navigator.platform.includes("Mac")}):Pt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var r,o;return Pt(this,"isCSSRoundSupported",(o=(r=globalThis.CSS)==null?void 0:r.supports)==null?void 0:o.call(r,"width: round(1.5px, 1px)"))}}const ee=Array.from(Array(256).keys(),c=>c.toString(16).padStart(2,"0"));class Ee{static makeHexColor(r,o,E){return`#${ee[r]}${ee[o]}${ee[E]}`}static scaleMinMax(r,o){let E;r[0]?(r[0]<0&&(E=o[0],o[0]=o[2],o[2]=E),o[0]*=r[0],o[2]*=r[0],r[3]<0&&(E=o[1],o[1]=o[3],o[3]=E),o[1]*=r[3],o[3]*=r[3]):(E=o[0],o[0]=o[1],o[1]=E,E=o[2],o[2]=o[3],o[3]=E,r[1]<0&&(E=o[1],o[1]=o[3],o[3]=E),o[1]*=r[1],o[3]*=r[1],r[2]<0&&(E=o[0],o[0]=o[2],o[2]=E),o[0]*=r[2],o[2]*=r[2]),o[0]+=r[4],o[1]+=r[5],o[2]+=r[4],o[3]+=r[5]}static transform(r,o){return[r[0]*o[0]+r[2]*o[1],r[1]*o[0]+r[3]*o[1],r[0]*o[2]+r[2]*o[3],r[1]*o[2]+r[3]*o[3],r[0]*o[4]+r[2]*o[5]+r[4],r[1]*o[4]+r[3]*o[5]+r[5]]}static applyTransform(r,o){const E=r[0]*o[0]+r[1]*o[2]+o[4],U=r[0]*o[1]+r[1]*o[3]+o[5];return[E,U]}static applyInverseTransform(r,o){const E=o[0]*o[3]-o[1]*o[2],U=(r[0]*o[3]-r[1]*o[2]+o[2]*o[5]-o[4]*o[3])/E,G=(-r[0]*o[1]+r[1]*o[0]+o[4]*o[1]-o[5]*o[0])/E;return[U,G]}static getAxialAlignedBoundingBox(r,o){const E=this.applyTransform(r,o),U=this.applyTransform(r.slice(2,4),o),G=this.applyTransform([r[0],r[3]],o),rt=this.applyTransform([r[2],r[1]],o);return[Math.min(E[0],U[0],G[0],rt[0]),Math.min(E[1],U[1],G[1],rt[1]),Math.max(E[0],U[0],G[0],rt[0]),Math.max(E[1],U[1],G[1],rt[1])]}static inverseTransform(r){const o=r[0]*r[3]-r[1]*r[2];return[r[3]/o,-r[1]/o,-r[2]/o,r[0]/o,(r[2]*r[5]-r[4]*r[3])/o,(r[4]*r[1]-r[5]*r[0])/o]}static singularValueDecompose2dScale(r){const o=[r[0],r[2],r[1],r[3]],E=r[0]*o[0]+r[1]*o[2],U=r[0]*o[1]+r[1]*o[3],G=r[2]*o[0]+r[3]*o[2],rt=r[2]*o[1]+r[3]*o[3],ot=(E+rt)/2,yt=Math.sqrt((E+rt)**2-4*(E*rt-G*U))/2,At=ot+yt||1,ut=ot-yt||1;return[Math.sqrt(At),Math.sqrt(ut)]}static normalizeRect(r){const o=r.slice(0);return r[0]>r[2]&&(o[0]=r[2],o[2]=r[0]),r[1]>r[3]&&(o[1]=r[3],o[3]=r[1]),o}static intersect(r,o){const E=Math.max(Math.min(r[0],r[2]),Math.min(o[0],o[2])),U=Math.min(Math.max(r[0],r[2]),Math.max(o[0],o[2]));if(E>U)return null;const G=Math.max(Math.min(r[1],r[3]),Math.min(o[1],o[3])),rt=Math.min(Math.max(r[1],r[3]),Math.max(o[1],o[3]));return G>rt?null:[E,G,U,rt]}static bezierBoundingBox(r,o,E,U,G,rt,ot,yt,At){return At?(At[0]=Math.min(At[0],r,ot),At[1]=Math.min(At[1],o,yt),At[2]=Math.max(At[2],r,ot),At[3]=Math.max(At[3],o,yt)):At=[Math.min(r,ot),Math.min(o,yt),Math.max(r,ot),Math.max(o,yt)],y(this,p,fr).call(this,r,E,G,ot,o,U,rt,yt,3*(-r+3*(E-G)+ot),6*(r-2*E+G),3*(E-r),At),y(this,p,fr).call(this,r,E,G,ot,o,U,rt,yt,3*(-o+3*(U-rt)+yt),6*(o-2*U+rt),3*(U-o),At),At}}a=new WeakSet,pn=function(r,o,E,U,G,rt,ot,yt,At,ut){if(At<=0||At>=1)return;const St=1-At,S=At*At,X=S*At,nt=St*(St*(St*r+3*At*o)+3*S*E)+X*U,I=St*(St*(St*G+3*At*rt)+3*S*ot)+X*yt;ut[0]=Math.min(ut[0],nt),ut[1]=Math.min(ut[1],I),ut[2]=Math.max(ut[2],nt),ut[3]=Math.max(ut[3],I)},p=new WeakSet,fr=function(r,o,E,U,G,rt,ot,yt,At,ut,St,S){if(Math.abs(At)<1e-12){Math.abs(ut)>=1e-12&&y(this,a,pn).call(this,r,o,E,U,G,rt,ot,yt,-St/ut,S);return}const X=ut**2-4*St*At;if(X<0)return;const nt=Math.sqrt(X),I=2*At;y(this,a,pn).call(this,r,o,E,U,G,rt,ot,yt,(-ut+nt)/I,S),y(this,a,pn).call(this,r,o,E,U,G,rt,ot,yt,(-ut-nt)/I,S)},h(Ee,a),h(Ee,p);function ne(c){return decodeURIComponent(escape(c))}let tt=null,s=null;function i(c){return tt||(tt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,s=new Map([["\uFB05","\u017Ft"]])),c.replaceAll(tt,(r,o,E)=>o?o.normalize("NFKC"):s.get(E))}function l(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const c=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(c);else for(let r=0;r<32;r++)c[r]=Math.floor(Math.random()*255);return xe(c)}const d="pdfjs_internal_id_"}},Lr={};function Ts(g){var H=Lr[g];if(H!==void 0)return H.exports;var m=Lr[g]={exports:{}};return ko[g](m,m.exports,Ts),m.exports}(()=>{var g=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",H=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",m=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",n=A=>{A&&A.d<1&&(A.d=1,A.forEach(D=>D.r--),A.forEach(D=>D.r--?D.r++:D()))},$=A=>A.map(D=>{if(D!==null&&typeof D=="object"){if(D[g])return D;if(D.then){var st=[];st.d=0,D.then(C=>{O[H]=C,n(st)},C=>{O[m]=C,n(st)});var O={};return O[g]=C=>C(st),O}}var M={};return M[g]=C=>{},M[H]=D,M});Ts.a=(A,D,st)=>{var O;st&&((O=[]).d=-1);var M=new Set,C=A.exports,W,R,w,N=new Promise((B,K)=>{w=K,R=B});N[H]=C,N[g]=B=>(O&&B(O),M.forEach(B),N.catch(K=>{})),A.exports=N,D(B=>{W=$(B);var K,at=()=>W.map(x=>{if(x[m])throw x[m];return x[H]}),J=new Promise(x=>{K=()=>x(at),K.r=0;var V=F=>F!==O&&!M.has(F)&&(M.add(F),F&&!F.d&&(K.r++,F.push(K)));W.map(F=>F[g](V))});return K.r?J:at()},B=>(B?w(N[m]=B):R(C),n(O))),O&&O.d<0&&(O.d=0)}})(),Ts.d=(g,H)=>{for(var m in H)Ts.o(H,m)&&!Ts.o(g,m)&&Object.defineProperty(g,m,{enumerable:!0,get:H[m]})},Ts.o=(g,H)=>Object.prototype.hasOwnProperty.call(g,H);var ge=Ts(228);ge=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=ge),ge.AbortException,ge.AnnotationEditorLayer,ge.AnnotationEditorParamsType,ge.AnnotationEditorType,ge.AnnotationEditorUIManager,ge.AnnotationLayer,ge.AnnotationMode,ge.CMapCompressionType,ge.ColorPicker,ge.DOMSVGFactory,ge.DrawLayer,ge.FeatureTest;var Ro=ge.GlobalWorkerOptions;ge.ImageKind,ge.InvalidPDFException,ge.MissingPDFException,ge.OPS,ge.Outliner,ge.PDFDataRangeTransport,ge.PDFDateString,ge.PDFWorker,ge.PasswordResponses,ge.PermissionFlag,ge.PixelsPerInch,ge.RenderingCancelledException,ge.UnexpectedResponseException,ge.Util,ge.VerbosityLevel,ge.XfaLayer,ge.build,ge.createValidAbsoluteUrl,ge.fetchData;var Io=ge.getDocument;ge.getFilenameFromUrl,ge.getPdfFilenameFromUrl,ge.getXfaPageViewport,ge.isDataScheme,ge.isPdfFile,ge.noContextMenu,ge.normalizeUnicode,ge.renderTextLayer,ge.setLayerDimensions,ge.shadow,ge.updateTextLayer,ge.version;const Do="https://cdn.jsdelivr.net/gh/daimular-ito11/ui-demo-v2/dist/cmaps/",Fo="https://cdn.jsdelivr.net/gh/daimular-ito11/ui-demo-v2/dist/pdf.worker.mjs";class No{constructor(H,m=2){if(!H||!H.dataset.url)throw new Error("invalid element!");this.element=H,this.url=H.dataset.url,this.scale=m,this.data=[]}loading(H){H?this.element.classList.add("pdf-preview__loading"):this.element.classList.remove("pdf-preview__loading")}async fetchFile(){return this.loading(!0),fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(H=>H.blob()).then(H=>this.blobtoDataUrl(H)).then(H=>this.draw(H))}blobtoDataUrl(H){return new Promise(m=>{const n=new FileReader;n.readAsDataURL(H),n.onload=()=>{m(n.result.replace("data:application/pdf;base64,",""))}})}draw(H){Ro.workerSrc=Fo,Io({data:atob(H),cMapUrl:Do,cMapPacked:!0}).promise.then(async m=>{for(let n=1;n<=m.numPages;n++)await this.getPage(n,m)},m=>{console.error(m)}).then(()=>{const m=document.createElement("img");m.setAttribute("class","pdf-preview__image"),m.onload=()=>{this.element.addEventListener("click",this.display(this.data)),this.element.appendChild(m),this.loading(!1)},m.src=this.data[0]})}display(H){var m=new FsLightbox;return m.props.sources=H,refreshFsLightbox(),()=>{m.open()}}async getPage(H,m){const n=this.scale,$=this.data;return new Promise(A=>{m.getPage(H).then(function(D){var st=D.getViewport({scale:n}),O=document.createElement("canvas"),M=O.getContext("2d");O.height=st.height,O.width=st.width;var C={canvasContext:M,viewport:st},W=D.render(C);W.promise.then(async()=>{$.push(O.toDataURL("image/png")),A()})})})}}class Oo extends No{async fetchFile(){return this.loading(!0),fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(H=>H.text()).then(H=>{var m=new Blob([H],{type:"application/pdf"});return Ho(m)}).then(H=>this.draw(H))}}function Ho(g){return new Promise(H=>{const m=new FileReader;m.readAsDataURL(g),m.onload=()=>{H(m.result.replace("data:application/pdf;base64,",""))}})}document.querySelectorAll('[data-role="pdf-preview"]').forEach(g=>{new Oo(g).fetchFile()});const Pr=document.querySelector('[data-role="zip-search_input"]'),Pi=document.querySelector('[data-role="zip-search_btn"'),$o=document.querySelector("#prefecture"),Bo=document.querySelector("#city"),Uo=document.querySelector("#street"),Vo=document.querySelector("#js-zip_error"),Go="https://api.zipaddress.net/";var vn="",ki="";Pr&&Pi&&(Pr.addEventListener("input",qo),Pi.addEventListener("click",zo));async function jo(){const g=`${Go}?zipcode=${vn}`;return fetch(g).then(H=>H.json()).then(H=>H.code!==200?{data:H.message,error:!0}:{data:H.data,error:!1})}function qo(g){const H=g.target.value;Pi.disabled=!0,ki="",H.length===7?(vn=H,Pi.disabled=!1):H.length!=0&&(ki="7\u6841\u306E\u6570\u5B57\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),kr()}async function zo(){var g;if(vn.length===7){const H=await jo();if(H.error){ki=H.data,kr();return}$o.value=bn[g=H.data.pref]??(bn[g]=""),Bo.value=H.data.city,Uo.value=H.data.town}}function kr(){Vo.textContent=ki}const bn={\u5317\u6D77\u9053:1,\u9752\u68EE\u770C:2,\u5CA9\u624B\u770C:3,\u5BAE\u57CE\u770C:4,\u79CB\u7530\u770C:5,\u5C71\u5F62\u770C:6,\u798F\u5CF6\u770C:7,\u8328\u57CE\u770C:8,\u6803\u6728\u770C:9,\u7FA4\u99AC\u770C:10,\u57FC\u7389\u770C:11,\u5343\u8449\u770C:12,\u6771\u4EAC\u90FD:13,\u795E\u5948\u5DDD\u770C:14,\u65B0\u6F5F\u770C:15,\u5BCC\u5C71\u770C:16,\u77F3\u5DDD\u770C:17,\u798F\u4E95\u770C:18,\u5C71\u68A8\u770C:19,\u9577\u91CE\u770C:20,\u5C90\u961C\u770C:21,\u9759\u5CA1\u770C:22,\u611B\u77E5\u770C:23,\u4E09\u91CD\u770C:24,\u6ECB\u8CC0\u770C:25,\u4EAC\u90FD\u5E9C:26,\u5927\u962A\u5E9C:27,\u5175\u5EAB\u770C:28,\u5948\u826F\u770C:29,\u548C\u6B4C\u5C71\u770C:30,\u9CE5\u53D6\u770C:31,\u5CF6\u6839\u770C:32,\u5CA1\u5C71\u770C:33,\u5E83\u5CF6\u770C:34,\u5C71\u53E3\u770C:35,\u5FB3\u5CF6\u770C:36,\u9999\u5DDD\u770C:37,\u611B\u5A9B\u770C:38,\u9AD8\u77E5\u770C:39,\u798F\u5CA1\u770C:40,\u4F50\u8CC0\u770C:41,\u9577\u5D0E\u770C:42,\u718A\u672C\u770C:43,\u5927\u5206\u770C:44,\u5BAE\u5D0E\u770C:45,\u9E7F\u5150\u5CF6\u770C:46,\u6C96\u7E04\u770C:47}})();
